!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r,i=t("../frontend/js/lodash.custom"),o=t("./slider"),a=t("./color-wheel"),s=t("class-list"),c=t("hyperscript"),u=t("./config"),l=u.CSS_CLASSES.NOT_VISIBLE,f=u.CSS_CLASSES.CURRENT,d=u.CSS_CLASSES.SELECTED,h=u.CSS_CLASSES.VISIBLE,p=u.MAX_CUSTOM_COLORS,g=u.AWW_COLOR,m=u.TOP_LEFT_TOOLBAR_MARGIN,v=t("dom-events"),y=function(t,e){return t.querySelector(e)},C=u.COLORS,b={text:["color-picker","size-slider","duplicate","delete"],postit:["color-picker","duplicate","delete"],select:["duplicate","copy","paste","delete"],right_click:["paste"],default:["duplicate","delete"]};e.exports=function(t,e,n,u){function w(t,e,n){tt=e;var o=b[t];o||(o=b.default),I(Y.parentNode),I(F.parentNode),I(V.parentNode),I(U.parentNode),I(J.parentNode),I(K.parentNode),i.each(o,function(t){"color-picker"===t?(r=n.opStateColor,A(Y.parentNode)):"size-slider"===t?(et=n.opStateSize,nt=n.sizes,A(F.parentNode)):"duplicate"===t?A(V.parentNode):"delete"===t?A(U.parentNode):"copy"===t?A(J.parentNode):"paste"===t&&A(K.parentNode)})}function I(t){t.className.indexOf(l)===-1&&s(t).add(l)}function A(t){t.className.indexOf(l)!==-1&&s(t).remove(l)}function _(){for(var t=q.getElementsByClassName("tools__item"),e=t.length-2;e>=0;e--)q.removeChild(t[e]);i.each(u.customColors,function(t,e){Z(t,C.length+e)})}function x(t){t.className.indexOf(d)===-1&&s(t).add(d)}function O(t){t.className.indexOf(d)!==-1&&s(t).remove(d)}function S(){L(rt,it)}function L(t,e){t&&(at.style.left=Math.min(tt.wrapperRect().width-at.offsetWidth,Math.max(m,t-at.offsetWidth))+"px",rt=t),e&&(at.style.top=Math.min(tt.wrapperRect().height-at.offsetHeight,Math.max(m,e-at.offsetHeight))+"px",it=e)}function T(){Q&&(t.emit("send-new-color-to-backend",Q),Q=void 0);var e=y(at,"#context-toolbox-size");e&&e.className.indexOf(f)!==-1&&(s(e).remove(f),z.destroy()),W&&W.className.indexOf(f)!==-1&&(s(W).remove(f),D.destroy()),st.className.indexOf(h)!==-1&&s(st).remove(h),G.className.indexOf(l)!==-1&&s(G).remove(l),$&&(O($),$=void 0),X&&O(X.parentNode),at.className.indexOf(h)!==-1&&s(at).remove(h)}function k(t){ot=t,at.className.indexOf(h)===-1&&(s(at).add(h),Y.parentNode.className.indexOf(l)===-1&&(H.style.backgroundColor=r()))}function M(t){y(t,".slide--dot")&&(z=new o(t,nt,et(),E),z.init())}function E(t){et(t)}function B(t){Q=t,u.customColors[u.customColors.length-1]=t,r(t),H&&(H.style.backgroundColor=t)}function N(t,e){u.customColors.push(t),Z(t,C.length+u.customColors.length,e)}function Z(t,e,n){u.customColors.length>p&&(P(),e=C.length+p-1),X=c(".predefined__color",{style:{"background-color":t}});var r=c(".tools__item--button"+(n?"."+d:""),X),i=c("li.tools__item#aww-toolbar-color-"+e,r);n&&O($),$=r,q.insertBefore(i,q.children[q.children.length-1]),D&&D.setNewColorEl(X)}function P(){u.customColors=u.customColors.slice(Math.max(0,u.customColors.length-p)),q.removeChild(q.children[0]),i.each(q.children,function(t,e){t.id.indexOf("aww-toolbar-color-")!==-1&&(t.id="aww-toolbar-color-"+(C.length+e))})}function j(){}var W,R,z,D,X,G,F,Y,H,U,V,J,K,q,Q,$,tt,et,nt,rt,it,ot,at=document.getElementById("context-menu"),st=y(at,".tools__colorwheel");return function(){Y=y(at,"#change-color-button"),H=y(Y,"#color-indicator"),G=y(at,"#aww-toolbar-add-color"),q=y(at,"#custom-colors-row"),W=y(at,"#context-toolbox-colors"),D=new a(W,B),v.on(G,"click",function(t){t.preventDefault(),st.className.indexOf(h)===-1&&(s(st).add(h),S(),s(G).add(l),N(g,!0),D.init())}),v.on(Y,"click",function(t){if(t.preventDefault(),W.className.indexOf(f)!==-1)s(W).remove(f),D.destroy();else{s(W).add(f),_(),S();var e=W.getElementsByClassName("tools__item--button");i.each(e,function(t,e){t.parentNode.id.indexOf("color-"+C.concat(u.customColors).indexOf(r()))!==-1&&($=t,x(t)),v.on(t,"click",function(n){n.preventDefault(),$&&O($),x(t),$=t;var i=C.concat(u.customColors)[e];r(i),H.style.backgroundColor=i})})}})}(),function(){F=y(at,"#change-size-button"),R=y(at,"#context-toolbox-size"),v.on(F,"click",function(t){t.preventDefault(),R.className.indexOf(f)!==-1?(s(R).remove(f),z.destroy()):(s(R).add(f),S(),M(R))})}(),function(){V=y(at,"#duplicate-button"),v.on(V,"click",function(t){t.preventDefault();var n=tt.getOpsToDuplicate(),r=i.map(e.duplicateOps(n.ops,n.offset),function(t){return{op:t,initPos:tt.getOpPosition(t)}});r&&tt.selectOps&&tt.selectOps(r)})}(),function(){U=y(at,"#delete-button"),v.on(U,"click",function(t){t.preventDefault(),tt.removeDOMElements&&tt.removeDOMElements();var n=tt.getSelectedOps();if(n.length>0){var r=i.map(n,function(t){return{opid:t.op.opid}}),o={op:"delete",ops:r};e.setDeleteFlags(i.map(n,function(t){return t.op}),!0),tt.save(o),tt.resetFields&&tt.resetFields()}})}(),function(){J=y(at,"#copy-button"),v.on(J,"click",function(e){e.preventDefault(),t.emit("copy")})}(),function(){K=y(at,"#paste-button"),v.on(K,"click",function(e){e.preventDefault(),t.emit("paste",ot)})}(),{initMenu:w,positionChange:L,hideMenu:T,showMenu:k,destroy:j}}},{"../frontend/js/lodash.custom":12,"./color-wheel":4,"./config":5,"./slider":8,"class-list":52,"dom-events":65,hyperscript:72}],2:[function(t,e,n){"use strict";e.exports=function(){function t(t){n.push(t)}function e(t){for(var e=0;e<n.length;e++)if(n[e].src===t)return n[e]}var n=[];return{addToCache:t,getImage:e}}},{}],3:[function(t,e,n){"use strict";var r=t("../frontend/js/lodash.custom"),i=t("./drawing"),o=t("./config"),a=t("uuid").v4;e.exports=function(t,e,n){function s(t){f=JSON.parse(JSON.stringify(t))}function c(t){var e=[],n=i.getOpsBoundingBox(f),a=t?t[0]-n[0][0]:(n[1][0]-n[0][0])*o.PASTE_REPOSITION_COEFFICIENT,s=t?t[1]-n[0][1]:(n[1][1]-n[0][1])*o.PASTE_REPOSITION_COEFFICIENT;return r.each(f,function(t){var n=i.repositionOpByMiddlePoint(t,a,s);e.push(n)}),e}function u(i){if(0===f.length)return void t.emit("flash-message","Nothing to paste","success",3);var o=c(i),u=[];r.each(o,function(r){r._id&&(delete r._id,delete r.time,delete r.uid,delete r.opid,delete r.pg),r.opid=a(),r.pg=e.currentPage(),t.emit("do-op",r),t.emit("queue-op",r),u.push({op:r,initPos:n.getOpPosition(r)})}),t.emit("change-tool",{tool:"select"}),t.emit("select-ops",u),s(o)}function l(t){n=t}var f=[];return t.subMany({paste:u}),{pushOps:s,getOpsToPaste:c,setCanvasStore:l}}},{"../frontend/js/lodash.custom":12,"./config":5,"./drawing":6,uuid:98}],4:[function(t,e,n){"use strict";var r=(t("./config"),t("dom-events")),i=function(t,e){return t.querySelector(e)};e.exports=function(t,e){function n(){r.off(t,"mousedown",a),r.off(t,"touchstart",a),r.off(t,"mouseup",c),r.off(t,"mouseleave",c),r.off(t,"touchend",c)}function o(){g=i(t,".tools__colorwheel--canvas"),m=g.width,v=g.getContext("2d"),y=i(t,".tools__colorwheel--picker"),b=i(t,".slide--dot");var e=new Image;e.onload=function(){v.drawImage(e,0,0,e.width,e.height)},e.src="/static/site/app-assets/color-wheel.png",r.on(t,"mousedown",a),r.on(t,"touchstart",a),r.on(t,"mouseup",c),r.on(t,"mouseleave",c),r.on(t,"touchend",c)}function a(n){if(n.target===b)w=[n.touches?n.touches[0].clientX:n.clientX,n.touches?n.touches[0].clientY:n.clientY],I=[b.offsetLeft,b.offsetTop],r.on(t,"mousemove",s),r.on(t,"touchmove",s);else if(n.target===g){var i=u(g),o=(n.touches?n.touches[0].clientX:n.clientX)-i.left+_,a=(n.touches?n.touches[0].clientY:n.clientY)-i.top+_,c=l(o-2*_,a-2*_,m/2,m/2,m/2);y.style.marginLeft=c.x+"px",y.style.marginTop=c.y+"px";var f=v.getImageData(o-2*_,a-2*_,1,1),h=f.data;C=d(h[0],h[1],h[2]),A.style.backgroundColor=C,e(C)}}function s(t){if(b){var e=t.touches?t.touches[0].clientX:t.clientX,n=e-w[0],r=t.touches?t.touches[0].clientY:t.clientY,i=r-w[1],o=l(I[0]+n,I[1]+i,m/2,m/2,m/2);b.style.marginLeft=o.x+"px",b.style.marginTop=o.y+"px";var a=b.offsetLeft,s=b.offsetTop,c=v.getImageData(a+_,s+_,1,1),u=c.data;C=d(u[0],u[1],u[2]),A.style.backgroundColor=C}}function c(n){C&&e(C),r.off(t,"mousemove",s),r.off(t,"touchmove",s)}function u(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}function l(t,e,n,r,i){if(f(t,e,r,i)<=n)return{x:t,y:e};t-=r,e-=i;var o=Math.atan2(e,t);return{x:Math.cos(o)*n+r-_,y:Math.sin(o)*n+i-_}}function f(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function d(t,e,n){return"#"+h(t)+h(e)+h(n)}function h(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t){A=t}var g,m,v,y,C,b,w,I,A,_=9;return{init:o,destroy:n,setNewColorEl:p}}},{"./config":5,"dom-events":65}],5:[function(t,e,n){"use strict";e.exports={CANVAS_OPS:["line","erase","eraseArea","text","image","presentation","lineStraight","rectangle","ellipse","arc","quadratic","bezier","clear","undo","gotoPage","move","delete","postit"],DRAWING_OPS:["line","erase","eraseArea","text","image","presentation","postit","lineStraight","rectangle","ellipse","arc","quadratic","bezier","move","delete"],GUEST_OPS:["windowSize","misc","user:join","user:left","pp","chat"],HELPER_OPS:["pp"],TOP_MENU:["colors","sizes","tools","saveload","admin","share","googleClassroom","googleClassroomTurnIn"],COLORS:["#000000","#f7412d","#47b04b","#1194f6","#ffc200","#9d1bb2","#ec1561","#7a5547"],POINTER_COLORS:["orange","red","green","blue","yellow","purple","magenta","brown"],AWW_COLOR:"#3DC476",AUTH_ONLY:["share","link"],ADVANCED_TOOLS:["presentation"],ADVANCED_SHARING_OPTIONS:["read-only","duplicate"],TOOLS:{basic:["pencil","eraser","eraserArea","text","image","undo","trash","pan","lineStraight","rectangle","rectangleFilled","ellipse","ellipseFilled","marker","select","postit"],advanced:["presentation"]},SIZES:[2,4,6,9,15,25,40],SETTINGS:["link","save"],FONT_SIZES:[10,12,16,22,30,40,60],ASSETS_PATH:"/static/site/app-assets",MIN_BOARD_SIZE:void 0,MAX_BOARD_SIZE:[4096,4096],CANVAS_SNAPSHOT_MARGIN:.1,MAX_CANVAS_DIMENSIONS:[4080,4080],MAX_PDF_DIMENSIONS:[1920,1920],CANVAS_STARTING_ZOOM_LEVEL:100,ZOOM_CHECK_INTERVAL:300,MAX_ZOOM_LEVEL:2500,MIN_ZOOM_LEVEL:.5,BOARD_RESIZE:!0,DEFAULT_TOOL:"pencil",DEFAULT_SIZES:{draw:2,erase:10,shape:1,text:16},MAX_CUSTOM_COLORS:7,DEFAULT_COLOR:"#000000",BACKGROUND_COLOR:"#ffffff",CSS_CLASSES:{VISIBLE:"is--visible",NOT_VISIBLE:"is--hidden",TOOLBAR_PREFIX:"aww-toolbar-",SELECTED:"is--selected",LOADING:"is--loading",EDITING:"is--editing",DISABLED:"is--disabled",OPEN:"is--open",CURRENT:"is--current",BUTTON_ENABLED:"button--enabled",BUTTON_DISABLED:"button--disabled"},TOP_LEFT_TOOLBAR_MARGIN:68,DEFAULT_TOOLBAR:{select:{tools:["select"],currentTool:"select"},undo:{tools:["undo"],currentTool:"undo"},colors:{tools:["color"]},draw:{tools:["pencil","marker","lineStraight"],currentTool:"pencil",selected:!0,size:2},erase:{tools:["eraser","eraserArea","trash"],currentTool:"eraser",size:10},shape:{tools:["rectangle","rectangleFilled","ellipse","ellipseFilled"],currentTool:"rectangle",size:2},text:{tools:["text"],currentTool:"text"},postit:{tools:["postit"],currentTool:"postit"},upload:{tools:["image","presentation","presentation","gdrive-upload"]}},FONT_FAMILY:"Arial, sans-serif",FONT_LINE_HEIGHT:1,FONT_SIZE:16,FONT_WEIGHT:"normal",FONT_STYLE:"normal",FONT:"normal normal 16px/1.3em Arial, sans-serif",STRANGE_FIREFOX_CONST:.33333333,SAFARI_STRANGE_PIXEL_RATIO_CONST:.75,DEFAULT_POSTIT_SIZE:[230,230],POSTIT:{MAX_COLUMNS:40,SHADOW_SIZE:4,MIN_FONT_SIZE:10,MAX_FONT_SIZE:66,MAX_ROWS:13,PADDING_TOP:.1,TEXTAREA_PADDING:10,SHADOW_BLUR:10,SHADOW_OFFSET:4,WEIGHT:"normal",DEFAULT_COLOR:"rgb(255, 247, 205)",DEFAULT_TEXT_COLOR:"#000000",TEXT_COLOR:"#000000",SHADOW_COLOR:"rgba(0, 0, 0, 0.3)"},POSTIT_SHADOW_COLOR:"rgba(0, 0, 0, 0.3)",MARKER_OPACITY:.3,MARKER_SIZE_MULTIPLE:2,ERASER_SIZE_MULTIPLE:3,MAX_DECIMAL_POINTS:3,PASTE_REPOSITION_COEFFICIENT:.2,GET_TOOL_PARENT:function(t){for(var e in this.DEFAULT_TOOLBAR)if(this.DEFAULT_TOOLBAR.hasOwnProperty(e)){var n=this.DEFAULT_TOOLBAR[e];for(var r in n.tools)if(t===n.tools[r])return e}},isInIframe:function(){try{return window.self!==window.top}catch(t){return!0}}}},{}],6:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=t("./config"),o=t("debug")("awwapp:drawing"),a=t("d3-queue"),s=(t("lodash"),t("./ImageCache")),c=t("./math").rotateCoordinates,u=i.MAX_DECIMAL_POINTS,l=e.exports=function t(e,n,r,c,u){function l(t,e){U&&(t&&(U.width=t),e&&(U.height=e))}function f(t){Q=t}function d(){return Q}function h(t){H.fillStyle=t.color||i.DEFAULT_COLOR,H.strokeStyle=t.color||i.DEFAULT_COLOR,H.lineWidth=t.size||i.DEFAULT_SIZES.draw,x(t.eraser&&!t.text),H.lineCap="round",H.lineJoin="round"}function p(t,e,n,r,i){var o=t.points[0];if(1===t.points.length)H.beginPath(),h(t),H.arc(o[0],o[1],H.lineWidth/2,0,2*Math.PI,!0),H.fill();else{if(Q){h(t),H.beginPath();for(var a=0;a<t.points.length-1;a++)H.moveTo(t.points[a][0],t.points[a][1]),H.lineTo(t.points[a+1][0],t.points[a+1][1]);H.stroke()}else{H.beginPath(),h(t),H.moveTo(o[0],o[1]);for(var s=o,c=0;c<t.points.length;c++){var u=R(s,t.points[c]);H.quadraticCurveTo(s[0],s[1],u[0],u[1]),s=t.points[c]}H.stroke()}if(i)return void(H.isPointInStroke(r[0],r[1])&&i(t,n));h(t),H.stroke()}}function g(t){if(et.queue||(et.queue=a.queue(1)),h(t),1===t.points.length){var e=t.points[0];H.arc(e[0],e[1],H.lineWidth/2,0,2*Math.PI,!0),H.fill()}else if("eraseArea"===t.op){H.moveTo(t.points[0][0],t.points[0][1]);for(var n=1;n<t.points.length;n++)H.lineTo(t.points[n][0],t.points[n][1]);H.fill()}else{for(var r=0;r<t.points.length-1;r++)H.moveTo(t.points[r][0],t.points[r][1]),H.lineTo(t.points[r+1][0],t.points[r+1][1]);H.stroke()}}function m(t,e,n,r){t.points&&t.points.length&&(et.queue?et.queue=et.queue.defer(function(i){p(t,void 0,e,n,r),i()}):p(t,void 0,e,n,r))}function v(t){if(t.x&&t.y&&t.r&&2===t.scale.length){H.beginPath(),h(t);try{H.ellipse(t.x,t.y,t.r*t.scale[0],t.r*t.scale[1],0,0,2*Math.PI)}catch(e){H.save(),H.scale(t.scale[0],t.scale[1]),H.arc(t.x/t.scale[0],t.y/t.scale[1],t.r,0,2*Math.PI,!0),H.restore()}t.filled?H.fill():H.stroke()}}function y(t){et.queue?et.queue=et.queue.defer(function(e){v(t),e()}):v(t)}function C(t,e,n,r){if(2===t.points.length){if(H.beginPath(),h(t),H.moveTo(t.points[0][0],t.points[0][1]),H.lineTo(t.points[1][0],t.points[1][1]),r)return void(H.isPointInStroke(n[0],n[1])&&r(t,e));H.stroke()}}function b(t,e,n,r){et.queue?et.queue=et.queue.defer(function(i){C(t,e,n,r),i()}):C(t,e,n,r)}function w(t){var e=t.op;if(h(t),H.beginPath(),"arc"===e){try{H.moveTo(t.x,t.y),H.arc(t.x,t.y,t.rad,t.start,t.end,!!t.clockwise)}catch(t){}t.stroke?H.stroke():H.fill()}else if("rectangle"===e)try{t.filled?H.fillRect(t.x,t.y,t.w,t.h):(H.lineJoin="miter",H.strokeRect(t.x,t.y,t.w,t.h))}catch(t){}else if("quadratic"===e)try{H.moveTo(t.x0,t.y0),H.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y),H.stroke()}catch(t){}else if("bezier"===e)try{H.moveTo(t.x0,t.y0),H.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y),H.stroke()}catch(t){}}function I(t){et.queue?et.queue=et.queue.defer(function(e){w(t),e()}):w(t)}function A(t,e,n,r){h(t),H.beginPath(),H.moveTo(t.points[0][0],t.points[0][1]);for(var i=1;i<t.points.length;i++)H.lineTo(t.points[i][0],t.points[i][1]);if(r)return void(H.isPointInPath(n[0],n[1])&&r(t,e));H.fill()}function _(t,e,n,r){!t.points||!t.points.length||t.points.length<2||(et.queue?et.queue=et.queue.defer(function(i){A(t,e,n,r),i()}):A(t,e,n,r))}function x(t){H.globalCompositeOperation=t?"destination-out":"source-over"}function O(t,e,n,r,i,o){for(var a=e[0],s=e[1],c=t.split("\n"),u=0;u<c.length;u++){if(U){V.font=i.substring(0,i.indexOf("1px"))+"10px"+i.substring(i.indexOf("1px")+3);for(var l=c[u],f=0,d=[],h=0;h<l.length;h++){var p=V.measureText(l[h]).width/10;d.push(p),f+=p}for(a=e[0]+(o?(r-f)/2:0),h=0;h<l.length;h++)H.fillText(l[h],a,s),a+=d[h]}else H.fillText(c[u],a,s);s+=n}}function S(t,e){if(e)return~e.toString().indexOf("px")?parseInt(e):parseFloat(e)*t}function L(t){if((t.text||t.isPostit)&&t.textPoint&&2===t.textPoint.length){t.fontWeight||(t.fontWeight="normal"),t.fontStyle||(t.fontStyle="normal");var e=t.isPostit?t.lineHeight:S(t.fontSize,t.lineHeight),n=JSON.parse(JSON.stringify(t.textPoint));u&&t.isPostit&&(t.fontStyle="",t.fontWeight="normal"),H.save(),H.translate(t.textPoint[0]*(1-t.fontSize),t.textPoint[1]*(1-t.fontSize)),H.scale(t.fontSize,t.fontSize);var r=1/t.fontSize,o=t.font||[t.fontStyle,t.fontWeight,"1px",t.fontFamily].join(" ");e*=r,H.font=o,H.textAlign=t.isPostit&&!U?"center":"left",H.textBaseline="bottom",h(t),t.isPostit&&(Q?H.fillRect(t.textPoint[0],t.textPoint[1],t.maxWidth*r,t.maxHeight*r):(H.save(),H.shadowColor=i.POSTIT.SHADOW_COLOR,H.shadowBlur=i.POSTIT.SHADOW_BLUR,H.shadowOffsetY=i.POSTIT.SHADOW_OFFSET,H.shadowOffsetX=i.POSTIT.SHADOW_OFFSET,H.fillRect(t.textPoint[0],t.textPoint[1],t.maxWidth*r,t.maxHeight*r),H.restore()),H.fillStyle=i.POSTIT.TEXT_COLOR,n=[t.textPoint[0]+(U?0:t.maxWidth/2*r),t.textPoint[1]+t.maxHeight*i.POSTIT.PADDING_TOP*r]);var a=0;H.webkitBackingStorePixelRatio<2&&(a=i.SAFARI_STRANGE_PIXEL_RATIO_CONST),n[1]=n[1]+a+e+(J?e*i.STRANGE_FIREFOX_CONST:0),O(t.text,n,e,t.maxWidth*r,o,t.isPostit),H.restore()}}function T(t){et.queue?et.queue.defer(function(e){L(t),e()}):L(t)}function k(t,e,r){var i=new n,a="undefined"!=typeof window?window.location.host:"";return"data:"===t.substr(0,5)||t.match(a)||(i.crossOrigin="anonymous"),i.onload=function(){e(null,i)},i.onerror=function(t){c(-1),o("debug","Image load error",t),e&&e(t)},i.src=t,i}function M(t,e,n,r,i,o){H.save(),x(),H.translate(e+r/2,n+i/2),o&&H.rotate(o),r&&i?H.drawImage(t,-1*r/2,-1*i/2,r,i):H.drawImage(t,-1*r/2,-1*i/2),H.restore(),et.queue=null,c(-1)}function E(t,e){r(t,function(t,n){if(t)return e(t);k(n,e)})}function B(t){et.queue||(et.queue=a.queue(1)),et.queue.defer(function(e){c(1);var n=K.getImage(t.src);if(n)return M(n.img,t.left,t.top,t.w,t.h,t.r),void e(null,n.img);E(t.src,function(n,r){if(n)return c(-1),e(null);M(r,t.left,t.top,t.w,t.h,t.r),K.addToCache({src:t.src,img:r}),e(n,r)})})}function N(t){$=t}function Z(){return $}function P(){et.queue?et.queue.defer(function(t){H.clearRect(-q[0]/2-$[0],-q[1]/2-$[1],q[0],q[1]),t()}):H.clearRect(-q[0]/2-$[0],-q[1]/2-$[1],q[0],q[1])}function j(t,e,n,r){t.delete||t.editedOpid||("line"===t.op?m(t,e,n,r):"text"===t.op?T(t):"image"===t.op?B(t):"lineStraight"===t.op?b(t,e,n,r):"ellipse"===t.op?y(t):"eraseArea"===t.op?_(t,e,n,r):"clear"===t.op?P():~["arc","rectangle","bezier","quadratic"].indexOf(t.op)&&I(t))}function W(t){t.length&&t.forEach(j)}function R(t,e){return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2]}function z(t,e,n,r){try{x(!1),H.setTransform(r,0,0,r,t,e),H.save(),H.setTransform(r,0,0,r,0,0),P(),H.restore(),H.save(),P(),W(n),H.restore()}catch(r){throw Raven.captureMessage("Error while doing doPan with data: "+JSON.stringify({x:t,y:e,opsLength:n?n.length:null,err:JSON.stringify(r)})),r}}function D(t,e,n){H.beginPath(),h(n),H.moveTo(t[0],t[1]);var r=R(t,e);return H.quadraticCurveTo(t[0],t[1],r[0],r[1]),H.stroke(),r}function X(t,e){H.beginPath(),h(e),H.moveTo(t[0],t[1]),H.arc(t[0],t[1],H.lineWidth/2,0,2*Math.PI,!0),H.fill()}function G(t,e){return H.isPointInPath(t,e)}function F(){H.beginPath()}function Y(){H.closePath()}r=r||function(t,e){return e(null,t)},c=c||function(){};var H,U,V,J,K=new s,q=i.MAX_CANVAS_DIMENSIONS,Q=!1;"undefined"!=typeof navigator&&(navigator.userAgent.indexOf("Firefox")!==-1&&(J=!0),navigator.appVersion.indexOf("Win")===-1&&navigator.userAgent.indexOf("Firefox")===-1&&navigator.userAgent.indexOf("CrOS")===-1||(U=document.createElement("canvas"),V=U.getContext("2d")));var $=[0,0];H=e,H.imageSmoothingEnabled=!0,h({});var tt=a.queue(1),et={drawLine:D,drawCircle:X,doOps:W,doOp:j,doPan:z,queue:tt,doClear:P,isPointInDrawnAreas:G,beginPath:F,closePath:Y,drawEraserWithoutBeginningPath:g,setFirefoxCanvasSize:l,setPanningZooming:f,getPanningZooming:d,setAdditionalOffset:N,getAdditionalCanvasOffset:Z,roundToDecPoints:t.roundToDecPoints};return et};l.getOpsBoundingBox=function(t){return t.reduce(function(t,e){if(e.delete||e.editedOpid||"undo"===e.op||"gotoPage"===e.op)return t;var n=l.getMaxDimensions(e);return[[Math.min(t[0][0],n[0][0]),Math.min(t[0][1],n[0][1])],[Math.max(t[1][0],n[1][0]),Math.max(t[1][1],n[1][1])]]},[[i.MAX_CANVAS_DIMENSIONS[0],i.MAX_CANVAS_DIMENSIONS[1]],[-i.MAX_CANVAS_DIMENSIONS[0],-i.MAX_CANVAS_DIMENSIONS[1]]])},l.getMaxDimensions=function(t){var e=0,n=0,i=0,o=0;if(t.points&&t.points.length){var a=t.size||0;e=Math.min.apply(Math,r(t.points.map(function(t){return t[0]})))-a,n=Math.max.apply(Math,r(t.points.map(function(t){return t[0]})))-a,i=Math.min.apply(Math,r(t.points.map(function(t){return t[1]})))+a,o=Math.max.apply(Math,r(t.points.map(function(t){return t[1]})))+a}else if("rectangle"===t.op){var s=t.filled?t.size/2:0;e=t.x-s,i=t.y-s,n=t.x+t.w+s,o=t.y+t.h+s}else if("ellipse"===t.op){var u=t.filled?t.size/2:0;e=t.x-t.r*t.scale[0]-u,i=t.y-t.r*t.scale[1]-u,n=t.x+t.r*t.scale[0]+u,o=t.y+t.r*t.scale[1]+u}else if("text"===t.op)e=t.textPoint[0],i=t.textPoint[1],n=t.textPoint[0]+t.maxWidth+(t.postitShadowSize||0),o=t.textPoint[1]+t.maxHeight+(t.postitShadowSize||0);else if("image"===t.op)if(t.r){var l=t.left+t.w/2,f=t.top+t.h/2,d=[c(t.left,t.top,l,f,t.r),c(t.left+t.w,t.top,l,f,t.r),c(t.left,t.top+t.h,l,f,t.r),c(t.left+t.w,t.top+t.h,l,f,t.r)];e=Math.min.apply(Math,r(d.map(function(t){return t.x}))),n=Math.max.apply(Math,r(d.map(function(t){return t.x}))),i=Math.min.apply(Math,r(d.map(function(t){return t.y}))),o=Math.max.apply(Math,r(d.map(function(t){return t.y})))}else e=t.left,i=t.top,n=t.left+t.w,o=t.top+t.h;return[[e,i],[n,o]]},l.getOpOutline=function(t){var e=this.getMaxDimensions(t);return{x:e[0][0],y:e[0][1],width:e[1][0]-e[0][0],height:e[1][1]-e[0][1]}},l.setNewPositionForMovedOp=function(t,e,n,r){var i=n[0]-e[0],o=n[1]-e[1],a=t.op;if("rectangle"===a||"ellipse"===a)t.x=(r?r[0]:t.x)+i,t.y=(r?r[1]:t.y)+o;else if("image"===a)t.left=(r?r[0]:t.left)+i,t.top=(r?r[1]:t.top)+o;else if("text"===a){var s=r?r:t.textPoint;t.textPoint=[s[0]+i,s[1]+o]}else if(t.points){var c=i,u=o,l=t.points;r&&(c=i-(l[0][0]-r[0]),u=o-(l[0][1]-r[1]));for(var f=0;f<l.length;f++)t.points[f]=[l[f][0]+c,l[f][1]+u]}return t},l.roundToDecPoints=function(t,e){e||(e=u);var n=Math.pow(10,e);return Math.round(t*n)/n},l.repositionOpByMiddlePoint=function(t,e,n){if(t.points&&t.points.length)for(var r=0;r<t.points.length;r++)t.points[r][0]+=e,t.points[r][1]+=n;else"rectangle"===t.op||"ellipse"===t.op?(t.x+=e,t.y+=n):"text"===t.op?(t.textPoint[0]+=e,t.textPoint[1]+=n):"image"===t.op&&(t.left+=e,t.top+=n);return t}},{"./ImageCache":2,"./config":5,"./math":7,"d3-queue":58,debug:61,lodash:78}],7:[function(t,e,n){"use strict";function r(t,e,n,r,i){var o=Math.cos(i),a=Math.sin(i);return{x:o*(t-n)+a*(e-r)+n,y:o*(e-r)-a*(t-n)+r}}e.exports={rotateCoordinates:r}},{}],8:[function(t,e,n){"use strict";var r=(t("./config"),t("dom-events")),i=function(t,e){return t.querySelector(e)};e.exports=function(t,e,n,o){function a(){r.off(t,"mousedown",c),r.off(t,"touchstart",c),r.off(t,"mouseup",l),r.off(t,"mouseleave",l),r.off(t,"touchend",l)}function s(){(f=i(t,".slide--dot"))&&(m=i(t,".tools__bigtool--value"),g=Math.max(0,e.indexOf(n)),v=e[g],f.style.marginLeft=g*y+"%",d=f.parentNode.offsetWidth,m&&(m.textContent=v),r.on(t,"mousedown",c),r.on(t,"touchstart",c),r.on(t,"mouseup",l),r.on(t,"mouseleave",l),r.on(t,"touchend",l))}function c(n){n.target===f&&(h=[n.touches?n.touches[0].clientX:n.clientX,n.touches?n.touches[0].clientY:n.clientY],p=[f.offsetLeft,f.offsetTop],g=Math.max(0,e.indexOf(v)),r.on(t,"mousemove",u),r.on(t,"touchmove",u))}function u(t){if(f){var n=t.touches?t.touches[0].clientX:t.clientX,r=n-h[0],i=Math.floor(r/(d*y/100));e[i+g]&&(v=e[i+g],f.style.marginLeft=(i+g)*y+"%",m.textContent=v)}}function l(e){o(v),r.off(t,"mousemove",u),r.off(t,"touchmove",u)}var f,d,h,p,g,m,v,y=90/(e.length-1);return{destroy:a,init:s}}},{"./config":5,"dom-events":65}],9:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(){if("undefined"!=typeof localStorage)try{if(localStorage.setItem("ls_test","yes"),"yes"===localStorage.getItem("ls_test"))return localStorage.removeItem("ls_test"),!0}catch(t){return!1}return!1}function o(t){function e(t,e){"RW"===e&&rt.emit("promote-user",t),"RO"===e&&rt.emit("demote-user",t)}function n(){ut.queue([]),ut.remoteQueue([]),ut.localOps=[],ut.users({}),ut.currentPage(0),ut.boardCanDo({audio:!1,guest:!1,advancedTools:!1,enableClassroom:!1,isPermanent:!1,isSnapshot:!1}),ut.boardInfo({ownerKey:void 0,boardId:void 0,boardLink:void 0,boardSnapshotLink:void 0,isBoardAdmin:void 0,isAdmin:"true"===tt.isAdmin||void 0,boardName:void 0,connectAllAsGuests:!1,classroomCourseId:void 0,classroomAssignmentId:void 0}),ut.isChatVisible(!1),ut.isAudioActive(!1)}function o(t){ut.boardInfo().connectAllAsGuests=t,it("board:connectAllAsGuests",{connectAllAsGuests:t,myUid:ut.currentUser().uid})}function m(t){ut.boardInfo().boardName!==t&&(ut.boardInfo().boardName=t,it("board:changeBoardName",{boardName:t}))}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ut.isConnected()){if(ut.isConnected(!0),t.boardLink){var e=ut.boardInfo();e.boardLink=t.boardLink,ut.boardInfo(e)}t.autojoin&&I(t)}}function y(){ut.isConnected(!1),ut.boardInfo({boardId:null,boardLink:ut.boardInfo().boardLink,boardSnapshotLink:null,ownerKey:null})}function C(t){rt.emit("error",t.err)}function b(t){console.error(t)}function w(){n(),rt.emit("reset-canvas"),rt.emit("recompute-pagination")}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ut.isConnected())return p=!0,rt.emit("socket-init",{boardLink:t.boardLink,autojoin:!0});var e=ut.boardInfo().boardLink,n=t.boardLink||ut.boardInfo().boardLink;n&&e!==n&&(rt.emit("reset-state"),ut.localOps=[]),c("Trying to join board with link:",n),it("board:join",{boardLink:n},function(t,e){if(t)return c("debug","Something wen't wrong, closing connection",t),console.error(t),b(t),void rt.emit("socket-close");A(e),rt.emit("board-joined",e)})}function A(t){if(c("Board joined",t),ut.boardInfo({boardId:t.boardId,boardLink:t.boardLink,isAdmin:t.isAdmin,isBoardAdmin:t.isBoardAdmin,boardSnapshotLink:t.boardSnapshotLink,ownerKey:t.ownerKey,connectAllAsGuests:t.connectAllAsGuests,classroomAssignmentId:t.classroomAssignmentId,classroomCourseId:t.classroomCourseId,boardName:t.boardName,isAssignment:!!t.classroomAssignmentId&&!!t.classroomCourseId&&!!t.cloneOfBoard}),t.currentUser=a.extend(t.currentUser,ut.currentUser()),ut.currentUser(t.currentUser),ut.users(a.indexBy(t.users,"uid")),ut.boardCanDo(t.canDo),ut.currentUser().isPremium||ut.boardCanDo().advancedTools||!tt||d.isInIframe()||Y("showAdsOnJoinBoard"),!p||ut.boardInfo().isAdmin||g?!ut.boardCanDo().advancedTools&&p||(rt.emit("remove-beforeunload-event"),g=!1):(rt.emit("add-beforeunload-event"),g=!0),rt.emit("track-mouse",!0),t.isFrozen){var e={message:"Hey, this board is locked in a view only mode.",link:{text:"Get your plan here and start editing.",src:"/info/plans",target:"_blank"}};rt.emit("show-message",e)}o(ot.connectAllAsReadOnly),O(void 0,ut.boardCanDo().advancedTools)}function _(){it("board:leave"),ut.boardInfo({boardId:null,boardLink:null,boardSnapshotLink:null,ownerKey:null})}function x(t){if(t.ops&&t.ops.length){var e,n,r,i=ut.localOps,o=i,s=a.map(o,function(t){return t.opid}),c=0;a.each(t.ops,function(t){s.indexOf(t.opid)===-1&&(o.push(t),s.push(t.opid),a.includes(d.HELPER_OPS,t.op)||c++)});for(var u=0;u<o.length;u++){var l=o[u];if(l&&(l.pg=l.pg||0,!l.delete))if("undo"===l.op){var f=D(l,o);f&&(f.delete=!0,"text"===f.op&&f.editedOpid?(e=s.indexOf(f.editedOpid),ut.revertEditedText(o[e],f)):"move"!==f.op&&"delete"!==f.op||a.each(f.ops,function(t){t&&(e=s.indexOf(t.opid))!==-1&&("move"===f.op&&t.pos?o[e]=N(f,t,o[e]):"delete"===f.op&&(o[e].delete=!1))}))}else if("clear"===l.op){var p=[];a.each(o,function(t,e){if(e>=u)return!1;t.pg!==l.pg&&p.push(t)}),p=p.concat(o.slice(u)),u-=o.length-p.length,o=p,s=a.map(o,function(t){return t.opid})}else"text"===l.op&&l.editedOpid?ut.alterText(l,o):"move"!==l.op&&"delete"!==l.op||a.each(l.ops,function(t){t&&(e=s.indexOf(t.opid))!==-1&&("move"===l.op?(n=l.points[0],r=l.points[l.points.length-1],o[e]=h.setNewPositionForMovedOp(o[e],n,r,t.pos)):"delete"===l.op&&(o[e].delete=!0))})}ut.localOps=o,c&&(rt.emit("calc-canvas-boundaries",o),t.repositionCanvas&&rt.emit("reposition-canvas-to-fit-content")),ut.remoteQueue(t.ops),rt.emit("recompute-pagination")}}function O(t,e){at.isLoading(1),t=t||{};var n=a.last(ut.localOps),r=0;n&&!t.all&&(r=n.time||0),c("Getting ops since",r,"from server"),at.fetch({url:s("/api/v2/board/:boardId/ops/",{boardId:ut.boardInfo().boardId}),query:{apiKey:ot.apiKey,since:r},json:!0,cors:!0},function(t,n,r){400===n.statusCode&&rt.emit("error",JSON.stringify(n.body)),c("Retrieved ops from server",r),r&&r.length||(r=[]),rt.emit("receive-ops",{source:"api",ops:r,repositionCanvas:e}),at.isLoading(-1),S()})}function S(){lt||(lt=setTimeout(T,ct))}function L(){return ut.boardInfo().boardId&&ut.queue().length}function T(){if(lt=void 0,L()){var t=B(JSON.parse(JSON.stringify(ut.queue()))),e=t.filter(function(t){return void 0!==t.opid}).map(function(t){return t.opid});it("board:ops",{ops:t},function(t,n){if(t)return void c("pushQueue(): error pushing queue: "+t);var r=[],i=ut.localOps.map(function(t){return t.opid||null}),o=!0,s=!1,u=void 0;try{for(var l,f=n[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=l.value;a.includes(d.HELPER_OPS,h.op)||("opid"in h?a.includes(i,h.opid)||r.push(h):c("pushQueue(): ignoring non-helper op without opid",h))}}catch(t){s=!0,u=t}finally{try{!o&&f.return&&f.return()}finally{if(s)throw u}}var p=ut.queue().filter(function(t){return"opid"in t&&!a.includes(e,t.opid)});ut.queue(p),n.length&&(x({ops:r}),rt.emit("push-confirm",{ops:r}))});var n=t.filter(function(t){return!a.includes(d.HELPER_OPS,t.op)});ut.queue(n)}}function k(t,e){t.forEach(function(t){return M(t,e)})}function M(t,e){if(!t)return console.error("No data provided");if(t.op=t.op||"misc",e=e||{},t.opid||d.HELPER_OPS.indexOf(t.op)!==-1||(t.opid=u()),!e.forcePage&&void 0!==t.pg&&t.pg!==ut.currentPage()&&"gotoPage"!==t.op)return c("Cancelling operation on non-current page",t),void rt.emit("goto-page",ut.currentPage());if(!("gotoPage"!==t.op||ut.boardCanDo().advancedTools&&ut.userCanDraw()))return void c("Ignoring page switch request, not allowed for board/user");if(t.pg=void 0!==t.pg?t.pg:ut.currentPage(),ut.queue(ut.queue().concat([t])),P([t]),!ut.isConnected()&&ut.queue().length>40&&!g){rt.emit("add-beforeunload-event"),g=!0;var n={message:"You've done pretty good work here - don't let it go to waste!",link:{url:"#",emitterEvent:"save-board",text:"Save your board here."}};rt.emit("show-message",n)}rt.emit("calc-canvas-boundaries",t),rt.emit("recompute-pagination")}function E(){var t,e,n=a.findLastIndex(ut.queue(),R);if(~n){c("Undo op on queue");var r=ut.queue();if(e=r[n],ut.currentPage()!==e.pg)return;if(e.delete=!0,"move"===e.op||"delete"===e.op||"text"===e.op&&e.editedOpid){var i=a.map(ut.queue(),function(t){return t.opid});if("move"===e.op)a.each(e.ops,function(t){if(t){var n=i.indexOf(t.opid);n>-1&&(r[n]=N(e,t,r[n]))}});else if("delete"===e.op)a.each(e.ops,function(t){if(t){var e=i.indexOf(t.opid);e>-1&&(r[e].delete=!1)}});else if("text"===e.op&&e.editedOpid){var o=i.indexOf(e.editedOpid);o>-1&&ut.revertEditedText(r[o],e)}}return t={op:"undo",undoOpid:e.opid},M(t),void rt.emit("do-redraw")}if(!~(n=a.findLastIndex(ut.localOps,z)))return void c("No ops to undo found");c("Undo on pushed ops");var s=ut.localOps,u=a.map(s,function(t){return t.opid});if(e=s[n],ut.currentPage()===e.pg){if(e.delete=!0,"move"===e.op)a.each(e.ops,function(t){if(t){var n=u.indexOf(t.opid)
;n>-1&&(s[n]=N(e,t,s[n]))}});else if("delete"===e.op)a.each(e.ops,function(t){if(t){var e=u.indexOf(t.opid);e>-1&&(s[e].delete=!1)}});else if("text"===e.op&&e.editedOpid){var o=u.indexOf(e.editedOpid);o>-1&&ut.revertEditedText(s[o],e)}Z(s),t={op:"undo",undoOpid:e.opid},M(t),rt.emit("do-redraw")}}function B(t){for(var e=a.map(t,function(t){return t.opid}),n=0;n<t.length;n++){var r=t[n];"move"===r.op?a.each(r.ops,function(n){if(n){var i=e.indexOf(n.opid);i>-1&&(t[i]=N(r,n,t[i]))}}):"delete"===r.op&&a.each(r.ops,function(n){if(n){var r=e.indexOf(n.opid);r>-1&&(t[r].delete=!1)}})}return t}function N(t,e,n){var r=t.points[0],i=t.points[t.points.length-1],o=[e.pos[0]+(i[0]-r[0]),e.pos[1]+(i[1]-r[1])];return h.setNewPositionForMovedOp(n,i,r,o)}function Z(t){var e=ut.localOps,n=a.map(e,function(t){return t.opid});a.each(t,function(t,r){n.indexOf(t.opid)===-1&&e.push(t)}),ut.localOps=e}function P(t){var e=ut.queue(),n=a.map(ut.queue(),function(t){return t.opid});a.each(t,function(t,r){n.indexOf(t.opid)===-1&&e.push(t)}),ut.queue(e)}function j(t,e){void 0===t&&(t=ut.currentPage());var n=function(e){return e.pg!==t};ut.queue(a.filter(ut.queue(),n)),ut.localOps.length&&(ut.localOps=a.filter(ut.localOps,n)),M({op:"clear",pg:t},e),rt.emit("do-redraw")}function W(t){if(!ut.boardCanDo().advancedTools)return void c("gotoPage: advanced tools are off, ignoring page switch request");if(!ot.multiPage)return void c("gotoPage: multPage option is disabled, ignoring page switch request");var e=ut.getLastPage()+1;t<0&&(t=0),t>e&&(t=e),c("gotoPage: new page is",t),ut.currentPage(t)}function R(t){return!t.delete&&a.includes(d.DRAWING_OPS,t.op)}function z(t){return t.uid===ut.currentUser().uid&&!t.delete&&R(t)}function D(t,e){if(!t)throw new Error("No undo op provided");var n;if(t.undoOpid&&(a.each(e,function(e){e.opid===t.undoOpid&&t.uid===e.uid&&(n=e)}),n&&R(n)))return n}function X(t){var e=t.boardLink||t.boardSnapshotLink;if(e)return ot.boardLinkSetter?ot.boardLinkSetter(e):at.setBoardLink(e)}function G(t){void 0!==t.isAdmin&&nt&&(localStorage.isLoggedIn=t.isAdmin),t.isAdmin&&nt&&(localStorage.wasLoggedIn="yes"),rt.emit("board-info-changed",t)}function F(){at.fetch({url:"/api/v2/check-login/",query:{apiKey:ot.apiKey},json:!0,cors:!0,withCredentials:!0},function(t,e,n){if(200===e.statusCode&&e.body.redirectUrl)return window.location.href=e.body.redirectUrl;if(n.isAuth){var r=!!n.hasTrial,i=n.trialDays,o=ut.boardInfo(),s=ut.boardCanDo();ut.currentUser().email=n.email,ut.currentUser().nick=n.name,ut.currentUser().isPremium=n.features.advancedTools,ut.currentUser().hasTrial=r,ut.currentUser().avatarThumbUrl=n.avatarThumbUrl,ut.currentUser().segment=n.segment,ut.currentUser().accountType=n.accountType,ut.currentUser().key=n.key,ut.currentUser().enableClassroom=n.enableClassroom,ut.currentUser().shownTips=n.shownTips||[],ut.currentUser(ut.currentUser()),void 0!==n.isInEu||n.gdprAccepted||(rt.emit("close-menus"),rt.emit("EU-member-widget","/account/data-privacy")),o.isAdmin=!0,ut.boardInfo(o),a.each(s,function(t,e){n.features&&n.features[e]&&(s[e]=n.features[e])}),ut.boardCanDo(s),"awwapp-api-key"===ut.boardInfo().ownerKey&&H(),n.colors&&rt.emit("set-user-custom-colors",n.colors),rt.emit("update-ui"),rt.emit("userLoggedIn",{email:n.email,trialDaysLeft:i,hasTrial:r}),et&&(rt.emit("flash-message","Nice to have you back :)","success",3),et=!1)}else rt.emit("userLoggedOut"),rt.emit("get-cookie","_aww_cookies_allowed",function(t){t||rt.emit("show-message",{message:"We use cookies to analyze traffic and for ads measurement purposes",link:{text:"Learn more about cookies",src:"/info/tos",target:"_blank"},button:{onClick:function(){return rt.emit("set-cookie","cookies_allowed",!0,36500)}}})});if(n.isAuth&&ut.currentUser().isPremium||!tt||d.isInIframe()){var c=document.getElementById("google-ad-wrapper");c&&(c.style.display="none");var u=document.getElementById("bottom-notification"),l=u.className.indexOf("bottom-notif-ad");l!==-1&&(u.className=u.className.substring(0,l)+u.className.substring(l+"bottom-notif-ad".length)),googletag&&googletag.destroySlots&&googleBottomAd&&googletag.destroySlots([googleBottomAd]),clearInterval(adRefreshInterval),googletag={}}else Y("showAdsOnAccountLoad")})}function Y(t){void 0===window.localStorage.adtag&&(window.localStorage.adtag=Math.floor(10*Math.random())+1),["1","2","3"].indexOf(window.localStorage.adtag)!==-1&&rt.emit(t)}function H(){ut.boardInfo().boardId&&at.fetch({url:"/api/v2/claim-board/",query:{boardId:ut.boardInfo().boardId},json:!0,cors:!0,withCredentials:!0},function(t,e,n){e.error||(ut.boardInfo().isBoardAdmin=n,ut.boardInfo().ownerKey=ut.currentUser().key)})}function U(t){if(rt.emit("user-data-changed",t),c("Setting session cookie for user:",t),t&&t.uid){var e=[t.uid,t.sid];f("session",e.join(":"),{path:"/"})}}function V(t){var e=ut.currentUser();a.extend(e,t),ut.currentUser(e),it("user:update",t)}function J(){var t=ut.boardCanDo();t.audioEnabled||(t.audioEnabled=!0,ut.boardCanDo(t))}function K(t){var e=ut.users()[t.uid];e.isSpeaking=t.speaking,ut.users(a.extend(ut.users(),r({},t.uid,e)))}function q(t){if(t.user){var e=a.extend({},ut.users()[t.user.uid],t.user),n=ut.users()[t.user.uid];n?n.nick!==e.nick?rt.emit("show-chat-message",[{op:"chat",text:(n.nick||"Anonymous user")+" changed their name to "+(e.nick||"Anonymous user")+".",type:"info"}]):e.status&&"0"===e.status&&(rt.emit("user-left-board",e),delete ut.users()[e.uid],ut.users(ut.users()),rt.emit("show-chat-message",[{op:"chat",text:(e.nick||"Anonymous user")+" left the board.",type:"info"}])):(rt.emit("user-joined-board",e),rt.emit("show-chat-message",[{op:"chat",text:(e.nick||"Anonymous user")+" joined the board.",type:"info"}])),e.status&&"0"!==e.status&&ut.users(a.extend(ut.users(),r({},e.uid,e))),ut.currentUser().uid===t.user.uid&&("RO"===t.user.status&&n&&"RW"===n.status?rt.emit("flash-message","Hey,  you can't edit the board. Board owner switched you to a view-only mode.","success","10"):"RW"===t.user.status&&n&&"RO"===n.status&&rt.emit("flash-message","Hey, you can now edit the board again.","success","10"),ut.currentUser(a.extend(ut.currentUser(),JSON.parse(JSON.stringify(e)))))}}function Q(t){var e,n=st.querySelector(".aww-canvas-wrapper"),r=n.getBoundingClientRect();if(t)e=ut.queue();else if(!ut.boardInfo().boardId)return;c("Asking server to export the board to PDF"),it("board:exportPdf",ut.boardInfo().boardId,r.width,r.height,e)}function $(t){ut.boardInfo(function(e){t&&e.ownerKey&&at.fetch({url:"/account/get-user-name/",query:{apiKey:e.ownerKey},json:!0,cors:!0,withCredentials:!0},function(e,n,r){if(e)return rt.emit("error",e),void t(e);c("Server returns",n),t(r),t=null})})}var tt,et=!0,nt=i();tt=nt?{isAdmin:localStorage.isAdmin,wasLoggedIn:localStorage.wasLoggedIn,isLoggedIn:localStorage.isLoggedIn}:{isAdmin:!1,wasLoggedIn:void 0,isLoggedIn:void 0};var rt=t.dispatcher,it=t.socketEmitter,ot=t.options,at=t.utils,st=t.canvasContainer,ct=200,ut={options:ot,queue:l([]),remoteQueue:l([]),localOps:[],users:l({}),currentUser:l({}),currentPage:l(0),localStorageAvailable:nt,boardCanDo:l({audio:!1,guest:!1,advancedTools:!1,enableClassroom:!1,isPermanent:!1,isSnapshot:!1}),boardInfo:l({ownerKey:void 0,boardId:void 0,boardLink:void 0,boardSnapshotLink:void 0,isBoardAdmin:void 0,isAdmin:"true"===tt.isAdmin||void 0,boardName:void 0,connectAllAsGuests:!1,classroomCourseId:void 0,classroomAssignmentId:void 0}),isConnected:l.signal(),isAuthenticated:l.signal(),isChatVisible:l(!1),isAudioActive:l(!1),getBoardOwner:$};ut.isAuthenticated(!!ot.apiKey),ut.isConnected(!1),ut.isConnected(function(t){return c("debug","Connected:",t)}),ut.queue(S),ut.boardInfo(X),ut.boardInfo(G),ut.currentUser(U),F(),rt.on("on-board-delete",function(){ut.boardCanDo().isPermanent=!1,ut.boardCanDo().isSnapshot=!1,it("on-board-delete")}),rt.subMany({"receive-ops":x,"join-board":I,"leave-board":_,"update-user":q,"socket-connect":v,"socket-disconnect":y,"socket-error":C,error:b,"do-undo":E,"do-clear":j,"goto-page":W,"queue-op":M,"queue-ops":k,"push-queue":T,"change-user":V,"set-connect-all-as-guests":function(t){return o(t)},"board-name-change":function(t){return m(t)},"promote-user":function(t,e){return it("user:promote",{targetUid:t,allUsers:e})},"demote-user":function(t,e){return it("user:demote",{targetUid:t,allUsers:e})},"webrtc-message":J,"webrtc-hark":K,"check-login":F,"export-pdf":Q,"claim-board":H,"reset-board":w,"set-user-permissions":e});var lt;return ut.userCanDraw=function(){var t=ut.currentUser();return!t||void 0===t.status||"U"===t.status||"RW"===t.status},ut.isBoardOwner=function(){return ut.currentUser().key===ut.boardInfo().ownerKey},ut.replaceOpsOnCanvas=function(t,e){var n=a.map(ut.queue(),function(t){return t.opid}),r=a.map(ut.localOps,function(t){return t.opid});a.each(t,function(t){var i=h.setNewPositionForMovedOp(t,e[0],e[e.length-1]);ut.replaceOp(i,!0,n,r)}),rt.emit("do-redraw")},ut.replaceOp=function(t,e,n,r){var i=r.indexOf(t.opid);if(i>-1){var o=ut.localOps;return o[i]=t,ut.localOps=o,void(e||rt.emit("do-redraw"))}if(!((i=n.indexOf(t.opid))>-1))return void c("No ops to MOVE");var a=ut.queue();a[i]=t,ut.queue(a),e||rt.emit("do-redraw")},ut.setDeleteFlags=function(t,e){var n=a.map(ut.queue(),function(t){return t.opid}),r=a.map(ut.localOps,function(t){return t.opid});a.each(t,function(t){ut.setDeleteFlag(t,n,r,e,!0)}),rt.emit("do-redraw")},ut.setDeleteFlag=function(t,e,n,r,i){var o=e.indexOf(t.opid);if(o>-1){c("Doing delete on queue");var a=ut.queue();return a[o].delete=r,ut.queue(a),void rt.emit("do-redraw")}if(!((o=n.indexOf(t.opid))>-1))return void c("No ops to MOVE");c("Doing delete on pushed ops");var s=ut.localOps;s[o].delete=r,ut.localOps=s,i||rt.emit("do-redraw")},ut.alterText=function(t,e){a.each(e,function(e){if(e.opid===t.editedOpid)return e.textPoint=t.textPoint,e.fontSize=t.fontSize,e.color=t.color,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.text=t.text,e.lineHeight=t.lineHeight,!1})},ut.revertEditedText=function(t,e){t.textPoint=e.initData.textPoint,t.fontSize=e.initData.fontSize,t.color=e.initData.color,t.maxWidth=e.initData.maxWidth,t.maxHeight=e.initData.maxHeight,t.text=e.initData.text,t.lineHeight=e.initData.lineHeight},ut.duplicateOp=function(t,e){if(t){t._id&&(delete t._id,delete t.time,delete t.uid,delete t.opid);var n=h.setNewPositionForMovedOp(JSON.parse(JSON.stringify(t)),[0,0],e);return n.opid=u(),M(n),rt.emit("do-op",n),n}},ut.duplicateOps=function(t,e){if(!(t.length<1)&&e&&2===e.length){var n=[];return a.each(t,function(t){n.push(ut.duplicateOp(t,e))}),n}},ut.getLastPage=function(){var t=[].concat(ut.localOps,ut.queue()),e=0;return a.each(t,function(t){if("gotoPage"!==t.op){var n=t.pg||0;n>e&&(e=n)}}),e},ut}var a=t("./lodash.custom"),s=t("url-builder").tokenise,c=t("debug")("awwapp:board"),u=t("uuid").v4,l=t("observable"),f=t("set-cookie"),d=t("../../common/config"),h=t("../../common/drawing"),p=("https://awwapp.com/".match(location.host),!1),g=!1;e.exports=o},{"../../common/config":5,"../../common/drawing":6,"./lodash.custom":12,debug:61,observable:80,"set-cookie":87,"url-builder":97,uuid:98}],10:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n,r){var i=0,o=0;return n=n?n:{x:0,y:0},r?(i=t.touches[0].clientX,o=t.touches[0].clientY):(t.changedTouches&&t.changedTouches.length&&(t=t.changedTouches[0]),i=t.clientX,o=t.clientY),[d.roundToDecPoints(i-e.left-n.x),d.roundToDecPoints(o-e.top-n.y)]}var o=t("./lodash.custom"),a=t("debug")("awwapp:canvas"),s=t("hyperscript"),c=t("observable"),u=t("class-list"),l=t("dom-events"),f=t("../../common/config"),d=t("../../common/drawing"),h=t("./op"),p=t("./ui/icon-definitions"),g=t("../../common/ContextMenu"),m=t("../../common/clipboard"),v=f.CANVAS_SNAPSHOT_MARGIN,y=f.MAX_CANVAS_DIMENSIONS,C=f.CANVAS_STARTING_ZOOM_LEVEL,b=f.MAX_ZOOM_LEVEL,w=!1,I=f.MIN_ZOOM_LEVEL;e.exports=function(t){function e(t){var e;return t.points?e=t.points[0]:"rectangle"===t.op||"ellipse"===t.op?e=[t.x,t.y]:"text"===t.op?e=t.textPoint:"image"===t.op&&(e=[t.left,t.top]),e}function n(t){Ne=t,Ne?setInterval(x,300):clearInterval(x)}function A(t){Be=t,je.style.display=t?"block":"none"}function _(t){if(!zt.currentUser().uid||"RW"!==t.status||zt.currentUser().uid===t.uid)return"";var e,n=Math.floor(Math.random()*ue().height)+"px",r=Math.floor(Math.random()*ue().width)+"px";if(Pe.hasOwnProperty(t.uid))n=Pe[t.uid].top,r=Pe[t.uid].left,e=Pe[t.uid].color;else{var i=f.POINTER_COLORS.slice(1);o.each(le.allUserPointers,function(t){i.splice(i.indexOf(t.color),1),0===i.length&&(i=f.COLORS.slice(1))}),e=i[0]}var a=s(".cursor.cursor--"+e,{"data-uid":t.uid,"data-username":t.nick||"anonymous",style:{transform:"translate("+r+", "+n+")"}},p.elHW("userPointer"));return le.allUserPointers[t.uid]={top:n,left:r,color:e},a}function x(){Ze=!0}function O(t){w=t}function S(t){Rt.emit("queue-op",{op:"pp",uid:zt.currentUser().uid,x:t[0],y:t[1]})}function L(t){Oe()||le.isPanningMode()||t.button&&0!==t.button||(t.touches&&t.touches.length>=2&&(Te=!0),Te||(se.hideMenu(),Rt.emit("close-menus"),xe=!0,t.normalizedPoint=i(t,pe,le.canvasOffset),t.isTouchEvent=!!t.touches,t.isPenDown=xe,_e.onPenDown(t)))}function T(t){Oe()||le.isPanningMode()||!xe||(xe=!1,t.normalizedPoint=i(t,pe,le.canvasOffset),t.isTouchEvent=!!t.touches,t.isPenDown=xe,te=[le.canvasOffset.x,le.canvasOffset.y],_e.onPenUp(t))}function k(t){le.isPanningMode()||((!t.touches||t.touches.length<2)&&(t.normalizedPoint=i(t,pe,le.canvasOffset)),Ne&&w&&Ze&&!Oe()&&(Ze=!1,S([t.normalizedPoint[0]/le.zoomLevel(),t.normalizedPoint[1]/le.zoomLevel()])),Oe()||(t.isTouchEvent=!!t.touches,t.isPenDown=xe,_e.onPenMove(t)))}function M(t){Oe()||le.isPanningMode()||(Rt.emit("close-menus"),t.normalizedPoint=i(t,pe,le.canvasOffset),t.isTouchEvent=!!t.touches,t.isPenDown=!1,_e.onClick(t))}function E(t,e){Rt.emit("canvas-pan-before");var n,r,i=[(ee[0]-t.normalizedPoint[0])/le.zoomLevel(),(ee[1]-t.normalizedPoint[1])/le.zoomLevel()],o=[[-y[0]/2-Ae[0],-y[1]/2-Ae[1]],[y[0]/2-Ae[0],y[1]/2-Ae[1]]];e&&(le.zoomLevel(le.zoomLevel()*e),Rt.emit("update-zoom-level",le.zoomLevel())),n=i[0]<=o[0][0]?-o[0][0]*le.zoomLevel():i[0]>=o[1][0]-ue().width/le.zoomLevel()?-(o[1][0]*le.zoomLevel()-ue().width):t.normalizedPoint[0]-ee[0],r=i[1]<=o[0][1]?-o[0][1]*le.zoomLevel():i[1]>=o[1][1]-ue().height/le.zoomLevel()?-(o[1][1]*le.zoomLevel()-ue().height):t.normalizedPoint[1]-ee[1],Be&&B(n-le.canvasOffset.x,r-le.canvasOffset.y),le.canvasOffset.x=n,le.canvasOffset.y=r,le.draw.doPan(n,r,st(),le.zoomLevel()),Rt.emit("canvas-pan-after"),qt&&bt()}function B(t,e){Object.keys(le.allUserPointers).forEach(function(n){var r=le.allUserPointers[n],i=le.container.querySelector('div[data-uid="'+n+'"]');if(i){var o=Number(r.left.substring(0,r.left.indexOf("px")))+t+"px",a=Number(r.top.substring(0,r.top.indexOf("px")))+e+"px";r.left=o,r.top=a,i.style.transform="translate("+o+", "+a+")"}})}function N(){le.draw.doClear(),j()}function Z(){Rt.emit("recompute-pagination",!0),j(),U(st(),!0),Y()}function P(){le.zoomLevel(C),G(ue().width/2,ue().height/2)}function j(){ge=[[y[0]/2,y[1]/2],[-y[0]/2,-y[1]/2]]}function W(t){t(oe.activeTool())}function R(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function z(t){return R(t[0][0]-t[1][0],t[0][1]-t[1][1])}function D(t){return[[t.touches[0].pageX,t.touches[0].pageY],[t.touches[1].pageX,t.touches[1].pageY]]}function X(t,e){var n=[0,0];return t[0]>e[0]?n[0]=e[0]+(t[0]-e[0])/2:n[0]=t[0]+(e[0]-t[0])/2,t[1]>e[1]?n[1]=e[1]+(t[1]-e[1])/2:n[1]=t[1]+(e[1]-t[1])/2,n}function G(t,e,n){Ie=[t,e],ee=[0,0],E({normalizedPoint:[t,e]},n)}function F(){Rt.emit("ga-send","PDF old version"),We++}function Y(){We&&(Re=!0,We--),ge[1][0]>y[0]/2&&(Ae[0]=y[0]/2-ge[1][0]),ge[1][1]>y[1]/2&&(Ae[1]=y[1]/2-ge[1][1]),ce.setAdditionalOffset(Ae);var t=ge[1][0]-ge[0][0],e=ge[1][1]-ge[0][1],n=Math.min(Math.min((ue().width-f.TOP_LEFT_TOOLBAR_MARGIN)/t,(ue().height-f.TOP_LEFT_TOOLBAR_MARGIN)/e)),r=Pt(n/le.zoomLevel());t>.95*ue().width/C||e>.95*ue().height/C?G((-ge[0][0]+Ae[0])*r*le.zoomLevel()+f.TOP_LEFT_TOOLBAR_MARGIN,(-ge[0][1]+Ae[1])*r*le.zoomLevel()+f.TOP_LEFT_TOOLBAR_MARGIN,r):P()}function H(t,e,n,r,i){if(e.pg!==r||e.delete||e.editedOpid||"undo"===e.op||"gotoPage"===e.op)return t;var o=d.getMaxDimensions(e,V,F,n);return[[Math.min(t[0][0],o[0][0]),Math.min(t[0][1],o[0][1])],[Math.max(t[1][0],o[1][0]),Math.max(t[1][1],o[1][1])]]}function U(t,e){t=st();var n=zt.currentPage(),r=t.reduce(function(r,i){return H(r,i,e,n,t)},[[Number.MAX_VALUE,Number.MAX_VALUE],[Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER]]);V(d.roundToDecPoints(r[0][0]),d.roundToDecPoints(r[0][1]),d.roundToDecPoints(r[1][0]),d.roundToDecPoints(r[1][1]))}function V(t,e,n,r,i,o){var a;(t<ge[0][0]||ze)&&(ge[0][0]=t,a=!0),(e<ge[0][1]||ze)&&(ge[0][1]=e,a=!0),(n>ge[1][0]||ze)&&(ge[1][0]=Math.min(n,ge[0][0]+y[0]),a=!0),(r>ge[1][1]||ze)&&(ge[1][1]=Math.min(r,ge[0][1]+y[1]),a=!0),a&&(qt&&yt(),Re&&o&&Y()),i&&!Re&&We--,ze&&(ze=!1)}function J(t){try{ue(Vt.getBoundingClientRect()),Rt.emit("window-resize",ue().width,ue().height),pe.left=ue().left,t.width=ue().width,pe.top=ue().top,t.height=ue().height,re.setFirefoxCanvasSize(ue().width,ue().height),ce.doRedraw()}catch(t){throw Raven.captureMessage("Error while doing resize with data: "+JSON.stringify({wrapperRectLeft:ue().left,wrapperRectTop:ue().top,wrapperRectWidth:ue().width,wrapperRectHeight:ue().height,err:JSON.stringify(t)})),t}}function K(t){var e=Vt.getBoundingClientRect();pe={left:e.left,top:e.top,width:e.width,height:e.height}}function q(t){if(zt.boardCanDo().advancedTools||!o.includes(f.ADVANCED_TOOLS,t.tool)){a("This is the tool now:",t.tool),_e.cancel();var e=_e.hasSeparateCanvas;!_e.hasSeparateCanvas||"marker"!==t.tool&&"pencil"!==t.tool&&"select"!==t.tool||(_e.removeCanvas(),e=!1);var n=ve(t.tool,t);n.stateless||(e&&_e.removeCanvas(),_e.disableDispatchers&&_e.op!==n.op&&_e.disableDispatchers(),_e=n,oe.activeTool(t.tool))}}function Q(t){oe.size()[t.parentId]=t.size}function $(t){if(t.fontSize)oe.fontSize(t.fontSize);else if(t.size){var e=Dt.sizes.indexOf(t.size),n=Dt.fontSizes[e];oe.fontSize(n)}}function tt(t){oe.color(t.color)}function et(t){oe.textColor(t.color)}function nt(t){oe.fontFamily(t.fontFamily)}function rt(t){t(oe.color())}function it(t){t(oe.textColor())}function ot(t,e){if(!e&&("undo"===t.op||"move"===t.op||"delete"===t.op||"text"===t.op&&t.editedOpid))return ce.doRedraw();t.pg=t.pg||0,t.pg!=zt.currentPage()&&"gotoPage"!==t.op||me.handleRemoteOp(t)}function at(){return[].concat(zt.localOps,zt.queue())}function st(){return o.filter(at(),function(t){return(t.pg||0)===zt.currentPage()})}function ct(t){Ut.style.cursor=t}function ut(t,e){a("Getting image out of canvas");var n=ge[1][0]-ge[0][0],r=ge[1][1]-ge[0][1],i=[ue().width/n,ue().height/r],o=n*i[0],s=r*i[1],c=ge[0][0]-n*v/2,u=ge[0][1]-r*v/2,l=document.createElement("canvas");l.width=o*(1+v),l.height=s*(1+v);var f=l.getContext("2d"),h=d(f,Image),p={op:"rectangle",x:c,y:u,w:o,h:s,color:Dt.backgroundColor,filled:!0};h.doPan(-c*i[0],-u*i[1],[p].concat(st()),Math.min(i[0],i[1])),h.queue.awaitAll(function(n,r){t(e,l.toDataURL("image/png"))})}function lt(t,e){var n=s("form",{method:"POST",target:"_blank",action:"https://awwapp.com/s/",style:{display:"none"}},s("input",{type:"hidden",name:"file",value:e}),s("input",{type:"submit",value:"val"}));t&&n.appendChild(s("input",{type:"hidden",name:"download",value:"yes"})),Gt.appendChild(n),n.submit()}function ft(){ut(lt,!1)}function dt(){ut(lt,!0)}function ht(){window.innerHeight>.8*window.innerWidth?(u(Xt).add("portrait"),u(Xt).remove("landscape")):(u(Xt).add("landscape"),u(Xt).remove("portrait"))}function pt(){if(!le.isPanningAvailable())return!1;le.isPanningMode()||(le.isPanningMode(!0),u(Vt).add("panning"),zt.isChatVisible()&&(zt.isChatVisible(!1),ke=!0))}function gt(){le.isPanningMode(!1),Se=!1,mt(Se),u(Vt).remove("panning"),u(Vt).remove("panning-grabbed"),ke&&(zt.isChatVisible(!0),ke=!1)}function mt(t){t!==le.draw.getPanningZooming()&&(le.draw.setPanningZooming(t),t||le.drawingOperations.doRedraw())}function vt(t){qt=t,t&&yt()}function yt(){var t=ge[0][0],e=ge[0][1],n=ge[1][0]-ge[0][0],r=ge[1][1]-ge[0][1];be=Kt.offsetWidth,we=Kt.offsetHeight,n/r>be/we?(Jt.style.width=be-$t+"px",Jt.width=be-$t,Jt.style.height=(be-$t)*r/n+"px",Jt.height=(be-$t)*r/n):(Jt.width=(we-$t)*n/r,Jt.style.width=(we-$t)*n/r+"px",Jt.height=we-$t,Jt.style.height=we-$t+"px"),ye=Jt.width/n,Ce=Jt.height/r;var i=[];o.each(st(),function(n){var r=d.getOpOutline(n);i.push({op:"rectangle",pg:0,x:(r.x-t)*ye,y:(r.y-e)*Ce,w:r.width*ye,h:r.height*Ce,color:"rgba(61,196,118,0.2)",size:8,filled:!0,delete:n.delete})}),Ht&&Ht.doOps(i),bt()}function Ct(){Ht&&Ht.doClear()}function bt(){var t,e,n=ge[1][0]-ge[0][0],r=ge[1][1]-ge[0][1],i=jt(),o=ge[0][0]+i[0],a=ge[0][1]+i[1],s=[Kt.offsetWidth-$t,Kt.offsetHeight-$t],c=ue().width/ue().height,u=[ue().width/le.zoomLevel(),ue().height/le.zoomLevel()],l=(s[0]-Jt.offsetWidth)/2;r>n?(t=s[1]*u[1]/r,e=t*c,o=-o*(e/ue().width)*le.zoomLevel(),a=-a*(e/ue().width)*le.zoomLevel()):(e=s[0]*u[0]/n,t=e/c,o=-o*(e/ue().width)*le.zoomLevel(),a=-a*(e/ue().width)*le.zoomLevel()),Qt.style.marginLeft=l+"px",Qt.style.width=e+"px",Qt.style.height=t+"px",Qt.style.top=Math.min(Math.max(a+$t/2,.9*-Qt.offsetHeight),.9*s[1]+$t/2)+"px",Qt.style.left=Math.min(Math.max(o+$t/2,.9*-Qt.offsetWidth-l),.9*s[0]-l+$t/2)+"px"}function wt(t){var e=t[0],n=t[1];return e+=Ut.getBoundingClientRect().left-Vt.getBoundingClientRect().left+le.canvasOffset.x,n+=Ut.getBoundingClientRect().top-Vt.getBoundingClientRect().top+le.canvasOffset.y,[e,n]}function It(t){var t=[d.roundToDecPoints(t[0]/le.zoomLevel()),d.roundToDecPoints(t[1]/le.zoomLevel())];return t}function At(){le.zoomLevel()===De&&(fe=!1,mt(fe),clearInterval(Xe))}function _t(){Nt({clientX:ue().width/2,clientY:ue().height/2,wheelDelta:100,preventDefault:function(){}},!0)}function xt(){Nt({clientX:ue().width/2,clientY:ue().height/2,wheelDelta:-100,preventDefault:function(){}},!0)}function Ot(t){t(le.zoomLevel())}function St(t){le.zoomLevel(t)}function Lt(t,e){b=e,I=t}function Tt(t){t(I,b)}function kt(t,e){le.canvasOffset.x=t,le.canvasOffset.y=e}function Mt(t){Dt.enableZoom=t}function Et(t){Dt.enablePan=t}function Bt(t){t(le.canvasOffset.x,le.canvasOffset.y)}function Nt(t,e){if(Dt.enableZoom){Rt.emit("zoom-triggered");var n=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;e||(n=Math.min(6,Math.max(-6,n)));var r=Pt(Math.pow(he,n));t.normalizedPoint=i(t,pe,le.canvasOffset);var o=t.normalizedPoint[0]*(1-r),a=t.normalizedPoint[1]*(1-r);return le.canvasOffset.x+=o,le.canvasOffset.y+=a,ee=i(t,pe,le.canvasOffset),t.normalizedPoint=i(t,pe),E(t,r),fe=!0,mt(fe),De=le.zoomLevel(),clearInterval(Xe),Xe=setInterval(At,f.ZOOM_CHECK_INTERVAL),t.preventDefault()&&!1}}function Zt(t){if(Dt.enableZoom){var e,n;if(!(t.touches.length<2)||fe){if(t.touches.length<2){var r=R(t.touches[0].pageX-Me[0][0],t.touches[0].pageY-Me[0][1]),o=R(t.touches[0].pageX-Me[1][0],t.touches[0].pageY-Me[1][1]);r>o?(e=[[t.touches[0].pageX,Me[0][0]],[t.touches[0].pageY,Me[0][1]]],n=r):(e=[[t.touches[0].pageX,Me[1][0]],[t.touches[0].pageY,Me[1][1]]],n=o)}else e=D(t),n=z(e);var a=n-Ee;Me=e,Ee=n;var s=a/10,c=Pt(Math.pow(he,s));if(de+=a,Math.abs(de)>40){fe=!0,mt(fe);var u=X(Me[0],Me[1]);u={clientX:u[0],clientY:u[1]},t.normalizedPoint=i(u,pe,le.canvasOffset);var l=t.normalizedPoint[0]*(1-c),f=t.normalizedPoint[1]*(1-c);return le.canvasOffset.x+=Math.round(l),le.canvasOffset.y+=Math.round(f),ee=i(t,pe,le.canvasOffset),t.normalizedPoint=i(t,pe),E(t,c),t.preventDefault()&&!1}}}}function Pt(t){var e=t*le.zoomLevel();return Math.max(Math.min(e,b),I)/le.zoomLevel()}function jt(){return[le.canvasOffset.x/le.zoomLevel(),le.canvasOffset.y/le.zoomLevel()]}var Wt,Rt=t.dispatcher,zt=t.board,Dt=t.options,Xt=t.el,Gt=t.canvasContainer,Ft=t.utils;a("Initiating canvas on",Gt);var Yt,Ht,Ut=s("canvas.aww-canvas"),Vt=s(".aww-canvas-wrapper",Ut),Jt=document.getElementById("minimap-canvas"),Kt=document.getElementById("minimap-container"),qt=!1,Qt=document.getElementById("minimap-screen-mark"),$t=20,te=[0,0],ee=[0,0];Jt&&(Yt=Jt.getContext("2d"),Ht=d(Yt,Image,void 0,Ft.isLoading)),0!==Dt.defaultZoomLevel&&(C=Dt.defaultZoomLevel),0!==Dt.zoomLevelLimits.length&&(I=Dt.zoomLevelLimits[0],b=Dt.zoomLevelLimits[1]),Gt.appendChild(Vt);var ne=Ut.getContext("2d"),re=d(ne,Image,void 0,Ft.isLoading),ie=Dt.defaultSizes.text,oe={activeTool:c(Dt.defaultTool),color:c(Dt.defaultColor),size:c(Dt.defaultSizes),fontSize:c(ie),fontFamily:c(Dt.defaultFontFamily),textColor:c(Dt.defaultColor)},ae=new m(Rt,zt),se=new g(Rt,zt,oe,Ft),ce={doOp:function(t){le.draw.doOp(t);var e=d.getOpOutline(t),n=ge[0][0],r=ge[0][1];Ht&&Ht.doOp({op:"rectangle",pg:0,x:(e.x-n)*ye,y:(e.y-r)*Ce,w:e.width*ye,h:e.height*Ce,color:"rgba(61,196,118,0.2)",size:8,filled:!0,delete:t.delete})},doOps:function(t){le.draw.doOps(t)},drawCircle:function(t,e){le.draw.drawCircle(t,e)},drawLine:function(t,e,n){return le.draw.drawLine(t,e,n)},doClear:function(){le.draw.doClear()},setAdditionalOffset:function(t){le.draw.setAdditionalOffset(t)},doRedraw:function(){le.draw.doPan(le.canvasOffset.x,le.canvasOffset.y,st(),le.zoomLevel())},queue:function(){le.draw.queue.apply(null,arguments)}},ue=c(Vt.getBoundingClientRect()),le={draw:re,container:Vt,wrapperRect:ue,operationState:oe,currentUser:zt.currentUser,isPanningMode:c(!1),isPanningAvailable:c(!1),canvasToWrapperCoords:wt,wrapperToCanvasCoords:It,boundaries:{},canvas:Ut,canvasOffset:{x:0,y:0},ctx:ne,pageOps:st,allOps:at,allUserPointers:{},drawingOperations:ce,zoomLevel:c(1),contextMenu:se,clipboard:ae,getOpPosition:e};ae.setCanvasStore(le);var fe=!1,de=0,he=1.1;ht();var pe={left:ue().left,top:ue().top,width:ue().width,height:ue().height},ge=[[y[0]/2,y[1]/2],[-y[0]/2,-y[1]/2]],me=h(le,t),ve=me.initOp;if(Jt)var ye=(.1*ue().width>80||ue().width,0),Ce=0,be=Kt.offsetWidth,we=Kt.offsetHeight;var Ie=[0,0],Ae=[0,0];Dt.minBoardSize?(le.boundaries.minW=Dt.minBoardSize[0]||ue().width,le.boundaries.minH=Dt.minBoardSize[1]||ue().height):(le.boundaries.minW=ue().width,le.boundaries.minH=ue().height),function(t,e){var n=Dt.maxBoardSize&&Dt.maxBoardSize[0]||y[0],r=Dt.maxBoardSize&&Dt.maxBoardSize[1]||y[1],i=!1;null!==t&&t>=le.boundaries.minW&&t<=n&&(Ut.width=t,re.setFirefoxCanvasSize(t,null),pe.width=t,i=!0),null!==e&&e>=le.boundaries.minH&&e<=r&&(Ut.height=e,re.setFirefoxCanvasSize(null,e),pe.height=e,i=!0),i&&ce.doRedraw(),le.isPanningAvailable(!0)}(le.boundaries.minW,le.boundaries.minH),Rt.emit("recompute-pagination"),P();var _e=ve(Dt.defaultTool),xe=!1,Oe=c.transform(zt.currentUser,function(t){return"RO"===t.status}),Se=!1,Le=!1,Te=!1,ke=!1,Me=[[0,0],[0,0]],Ee=0,Be=Dt.showUserPointers,Ne=Dt.sendUserPointer,Ze=!0,Pe={},je=s(".aww-user-pointers",c.transform(zt.users,function(t){return Pe=JSON.parse(JSON.stringify(le.allUserPointers)),le.allUserPointers={},o.filter(t,function(t){return"0"!==t.status}),s("div",o.map(t,_))}));Vt.appendChild(je),n(Ne),A(Be),window.addEventListener("resize",o.debounce(function(){ht(),J(Ut),Rt.emit("recompute-pagination")},150)),window.addEventListener("scroll",o.debounce(function(){K(Ut)},25)),Gt.addEventListener("contextmenu",function(t){return t.preventDefault(),t.normalizedPoint=i(t,pe,le.canvasOffset),se.initMenu("right_click",le),se.showMenu(It(t.normalizedPoint)),se.positionChange(t.x,t.y),!1},!1),Gt.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault()},!1),Gt.addEventListener("dragenter",function(t){t.preventDefault(),Rt.emit("upload-notify-widget")},!1),Gt.addEventListener("dragleave",function(t){t.preventDefault()},!1),Gt.addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.files;if(e.length>0){var n=e[0],r=new FileReader;r.onload=function(t){n.name.match(/\.(gif|jpe?g|png)$/gi)?Rt.emit("change-tool",{tool:"image",src:t.target.result}):n.name.match(/\.(ppt|pdf)$/gi)?Rt.emit("change-tool",{tool:"presentation",e:t,file:n}):Rt.emit("flash-message","File is not valid","error",5)},r.readAsDataURL(n)}Rt.emit("file-dropped")},!1),l.on(Vt,"mousedown",L),l.on(Vt,"touchstart",L),l.on(Vt,"mouseup",T),l.on(Vt,"mouseleave",T),l.on(Vt,"touchend",T),l.on(Vt,"mousemove",k),l.on(Vt,"click",M),l.on(Vt,"DOMMouseScroll",Nt),l.on(Vt,"mousewheel",Nt),l.on(Ut,"mousedown",function(t){t.button&&0!==t.button||(t.normalizedPoint=i(t,pe,le.canvasOffset),le.isPanningMode()&&(ue(Vt.getBoundingClientRect()),ee=[t.normalizedPoint[0],t.normalizedPoint[1]],Se=!0,mt(Se),u(Vt).add("panning-grabbed")))}),l.on(Ut,"mouseup",function(t){t.normalizedPoint=i(t,pe,le.canvasOffset),le.isPanningMode()&&(te=[le.canvasOffset.x,le.canvasOffset.y],Se=!1,mt(Se),u(Vt).remove("panning-grabbed"))}),l.on(Vt,"touchstart",function(t){t.preventDefault(),2===t.touches.length&&le.isPanningAvailable()&&!le.isPanningMode()?(pt(),Me=D(t),Ee=z(Me),t.normalizedPoint=i(t,pe,le.canvasOffset,!0),ue(Vt.getBoundingClientRect()),ee=[t.normalizedPoint[0],t.normalizedPoint[1]],Le=!0,mt(Le),Rt.emit("started-panning")):1===t.touches.length&&le.isPanningMode()&&(t.normalizedPoint=i(t,pe,le.canvasOffset),ue(Vt.getBoundingClientRect()),ee=[t.normalizedPoint[0],t.normalizedPoint[1]],Se=!0,mt(Se))}),l.on(Vt,"touchend",function(t){if(Le&&t.touches.length>1||fe&&t.touches.length>1)return!1;if(t.touches.length<=1&&(Te=!1),0===t.touches.length&&Rt.emit("stopped-panning"),t.normalizedPoint=i(t,pe,le.canvasOffset),fe){de=0,fe=!1,mt(fe);var e=X(Me[0],Me[1]);ue(Vt.getBoundingClientRect()),ee=[e[0]*le.zoomLevel(),e[1]*le.zoomLevel()]}le.isPanningMode()&&(Se=!1,mt(Se),Le&&(gt(),Le=!1))}),window.addEventListener("mousemove",function(t){t.normalizedPoint=i(t,pe),Se&&Dt.enablePan&&E(t)}),l.on(Vt,"mouseleave",function(t){Se=!1,mt(Se)}),l.on(Vt,"touchmove",function(t){t.normalizedPoint=i(t,pe,void 0,Le),t.preventDefault(),Se||Le?(Zt(t),!fe&&Dt.enablePan&&E(t)):k(t)}),zt.remoteQueue(function(t){var e=o.findLastIndex(t,function(t){return"gotoPage"===t.op}),n=e!==-1?t[e].pg:zt.currentPage(),r=!1;n!==zt.currentPage()?(a("handleOps(): replaying last gotoPage op to",n),ot({op:"gotoPage",pg:n})):(t.forEach(function(t){"gotoPage"!==t.op&&(("undo"===t.op||"move"===t.op||"delete"===t.op||"text"===t.op&&t.editedOpid||"line"===t.op&&t.color&&t.color.match(/^rgba\(.*, 0.\d+\)$/))&&(r=!0),ot(t,!0))}),r&&ce.doRedraw())}),Rt.subMany((Wt={"change-tool":q,"change-size":Q,"change-font-size":$,"change-font-family":nt,"change-color":tt,"change-font-color":et,"download-picture":dt,"share-picture":ft,"reset-minimap":Ct,"goto-page":Z,"init-tool":ve,"reposition-canvas-to-fit-content":Y,"enable-panning":pt,"disable-panning":gt,"change-cursor":ct,"track-mouse":O,"reset-canvas":N,"calc-canvas-boundaries":U,"reset-state":le.drawingOperations.doClear,"do-resize":function(){J(Ut)},"get-current-op":W,"minimap-toggle":vt,"zoom-in":_t,"zoom-out":xt,"set-zoom-level":St,"get-zoom-level":Ot,"get-text-color":it,"get-stroke-color":rt,"set-pan":kt,"get-top-left-point":Bt,"do-clear":function(t){t===zt.currentPage()&&le.drawingOperations.doClear()},"do-op":ce.doOp,"do-ops":ce.doOps,"send-user-pointer":n,"show-user-pointers":A},r(Wt,"do-op",ce.doOp),r(Wt,"set-zoom-level-limits",Lt),r(Wt,"get-zoom-level-limits",Tt),r(Wt,"set-enable-zoom",Mt),r(Wt,"set-enable-pan",Et),Wt)),Rt.sub("do-redraw",ce.doRedraw);var We=0,Re=!1,ze=!1;le.getDataURL=ut;var De,Xe;return le}},{"../../common/ContextMenu":1,"../../common/clipboard":3,"../../common/config":5,"../../common/drawing":6,"./lodash.custom":12,"./op":17,"./ui/icon-definitions":31,"class-list":52,debug:61,"dom-events":65,hyperscript:72,observable:80}],11:[function(t,e,n){(function(e){"use strict";function n(t,e){e=e||{};var n=e.prepend===!0?"prepend":"append",i=void 0!==e.container?e.container:document.querySelector("head"),o=C.indexOf(i);o===-1&&(o=C.push(i)-1,b[o]={});var a;return void 0!==b[o]&&void 0!==b[o][n]?a=b[o][n]:(a=b[o][n]=r(),"prepend"===n?i.insertBefore(a,i.childNodes[0]):i.appendChild(a)),a.styleSheet?a.styleSheet.cssText+=t:a.textContent+=t,a}function r(){
var t=document.createElement("style");return t.setAttribute("type","text/css"),t}function i(t){var e=s("ul.tools__menu.tools__menu--inline",[s("li.tools__item",[s("div#change-color-button.tools__item--button",[s("div#color-indicator.predefined__color",{style:{"background-color":"#1194f6"},alt:"Change color"})])]),s("li.tools__item",[s("div#change-size-button.tools__item--button has--tooltip",[s("img",{src:"https://awwapp.com//static/site/app-assets/ict-text.svg",alt:"Change size"})])]),s("li.tools__item",[s("div#duplicate-button.tools__item--button has--tooltip",[s("img",{src:"https://awwapp.com//static/site/app-assets/ict-text-duplicate.svg",alt:"Duplicate"})])]),s("li.tools__item",[s("div#delete-button.tools__item--button has--tooltip",[s("img",{src:"https://awwapp.com//static/site/app-assets/ict-text-delete.svg",alt:"Delete"})])]),s("li.tools__item",[s("div#copy-button.tools__item--button has--tooltip",[s("img",{src:"https://awwapp.com//static/site/app-assets/ic-copy.svg",alt:"Copy"})])]),s("li.tools__item",[s("div#paste-button.tools__item--button has--tooltip",[s("img",{src:"https://awwapp.com//static/site/app-assets/ic-paste.svg",alt:"Paste"})])])]),n=s("div#context-toolbox-colors.tabs__toolbox--content",[s("div.toolbox__separator"),s("ul.tools__menu.tools__menu--inline",[s("li#aww-toolbar-color-0.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#000000"}})])]),s("li#aww-toolbar-color-1.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#f7412d"}})])]),s("li#aww-toolbar-color-2.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#47b04b"}})])]),s("li#aww-toolbar-color-3.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#1194f6"}})])]),s("li#aww-toolbar-color-4.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#ffc200"}})])]),s("li#aww-toolbar-color-5.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#9d1bb2"}})])]),s("li#aww-toolbar-color-6.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#ec1561"}})])]),s("li#aww-toolbar-color-7.tools__item",[s("div.tools__item--button",[s("div.predefined__color",{style:{"background-color":"#7a5547"}})])])])]),r=s("div.tools__colorwheel",[s("div.tools__colorwheel--inner",[s("div.tools__colorwheel--picker.slide--dot"),s("canvas.tools__colorwheel--canvas",{width:"260",height:"260"})])]),i=s("div#context-toolbox-colors.tabs__toolbox--content",[s("div.toolbox__separator"),s("ul#custom-colors-row.tools__menu.tools__menu--inlinefloat wrap--8.tools__menu--colors",[s("li#aww-toolbar-add-color.tools__item",[s("div.tools__item--button",[s("img",{src:"https://awwapp.com//static/site/app-assets/ict-upload.svg",alt:"Add color"})])]),r])]),o=s("div#context-toolbox-size.tabs__toolbox--content",[s("div.toolbox__separator"),s("ul.tools__bigtool",[s("p.paragraph.tools__bigtool--title","Font-size"),s("div.tools__bigtool--slider.cf.flex--middle",[s("div.tools__bigtool--value","10"),s("div.tools__bigtool--slide",[s("div.slide--dot",[s("img",{src:"https://awwapp.com//static/site/app-assets/slider-background.svg"})])])])])]),a=s("#context-menu.toolbox toolbox--flexible.toolbox--drop",{style:{display:"none"}},[e,n,i,o]);t.append(a)}t("polyfill-function-prototype-bind"),window.console||(window.console={}),window.console.log||(window.console.log=function(){})
;var o=t("./lodash.custom"),a=t("debug")("awwapp:index"),s=t("hyperscript"),c=t("./utils/dispatcher"),u=t("./board"),l=t("../../common/config"),f=t("./socket"),d=t("./user-api"),h=t("./widgets"),p=t("./canvas"),g=t("./ui/toolbar"),m=t("./p2p-rtc"),v=e("LmF3dyBodG1sIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwogIC8qIDEgKi8KICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgLyogMSAqLyB9CgouYXd3ICosCi5hd3cgKjpiZWZvcmUsCi5hd3cgKjphZnRlciB7CiAgYm94LXNpemluZzogaW5oZXJpdDsgfQoKLmF3dyBib2R5IHsKICBvdmVyZmxvdy14OiBoaWRkZW47CiAgbWFyZ2luOiAwOyB9CgouYXd3IGFydGljbGUsCi5hd3cgYXNpZGUsCi5hd3cgZm9vdGVyLAouYXd3IGhlYWRlciwKLmF3dyBuYXYsCi5hd3cgc2VjdGlvbiB7CiAgZGlzcGxheTogYmxvY2s7IH0KCi5hd3cgZmlnY2FwdGlvbiwKLmF3dyBmaWd1cmUsCi5hd3cgbWFpbiB7CiAgLyogMSAqLwogIGRpc3BsYXk6IGJsb2NrOyB9CgouYXd3IGZpZ3VyZSB7CiAgbWFyZ2luOiAxZW0gMmVtOyB9CgouYXd3IGhyIHsKICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAvKiAxICovCiAgaGVpZ2h0OiAwOwogIC8qIDEgKi8KICBvdmVyZmxvdzogdmlzaWJsZTsKICAvKiAyICovIH0KCi5hd3cgcHJlLAouYXd3IGNvZGUsCi5hd3cga2JkLAouYXd3IHNhbXAgewogIGZvbnQtc2l6ZTogMWVtOyB9CgouYXd3IGEgewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIC8qIDEgKi8KICAtd2Via2l0LXRleHQtZGVjb3JhdGlvbi1za2lwOiBvYmplY3RzOwogIC8qIDIgKi8gfQoKLmF3dyBhYmJyW3RpdGxlXSB7CiAgYm9yZGVyLWJvdHRvbTogbm9uZTsKICAvKiAxICovCiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgLyogMiAqLwogIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lIGRvdHRlZDsKICAvKiAyICovIH0KCi5hd3cgYiwKLmF3dyBzdHJvbmcgewogIGZvbnQtd2VpZ2h0OiBpbmhlcml0OyB9CgouYXd3IGIsCi5hd3cgc3Ryb25nIHsKICBmb250LXdlaWdodDogYm9sZGVyOyB9CgouYXd3IGRmbiB7CiAgZm9udC1zdHlsZTogaXRhbGljOyB9CgouYXd3IHNtYWxsIHsKICBmb250LXNpemU6IDgwJTsgfQoKLmF3dyBzdWIsCi5hd3cgc3VwIHsKICBmb250LXNpemU6IDc1JTsKICBsaW5lLWhlaWdodDogMDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyB9CgouYXd3IHN1YiB7CiAgYm90dG9tOiAtMC4yNWVtOyB9CgouYXd3IHN1cCB7CiAgdG9wOiAtMC41ZW07IH0KCi5hd3cgYXVkaW8sCi5hd3cgdmlkZW8gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQoKLmF3dyBhdWRpbzpub3QoW2NvbnRyb2xzXSkgewogIGRpc3BsYXk6IG5vbmU7CiAgaGVpZ2h0OiAwOyB9CgouYXd3IGltZyB7CiAgYm9yZGVyLXN0eWxlOiBub25lOyB9CgouYXd3IHN2ZyB7CiAgZmlsbDogY3VycmVudENvbG9yOwogIC8qIDEgKi8KICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIC8qIDIgKi8gfQoKLmF3dyBzdmc6bm90KDpyb290KSB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKLmF3dyBidXR0b24sCi5hd3cgaW5wdXQsCi5hd3cgb3B0Z3JvdXAsCi5hd3cgc2VsZWN0LAouYXd3IHRleHRhcmVhIHsKICBtYXJnaW46IDA7IH0KCi5hd3cgYnV0dG9uLAouYXd3IGlucHV0IHsKICAvKiAxICovCiAgb3ZlcmZsb3c6IHZpc2libGU7IH0KCi5hd3cgYnV0dG9uLAouYXd3IHNlbGVjdCB7CiAgLyogMSAqLwogIHRleHQtdHJhbnNmb3JtOiBub25lOyB9CgouYXd3IGJ1dHRvbiwKLmF3dyBodG1sIFt0eXBlPSJidXR0b24iXSwKLmF3dyBbdHlwZT0icmVzZXQiXSwKLmF3dyBbdHlwZT0ic3VibWl0Il0gewogIC13ZWJraXQtYXBwZWFyYW5jZTogYnV0dG9uOwogIC8qIDIgKi8gfQoKLmF3dyBidXR0b246Oi1tb3otZm9jdXMtaW5uZXIsCi5hd3cgW3R5cGU9ImJ1dHRvbiJdOjotbW96LWZvY3VzLWlubmVyLAouYXd3IFt0eXBlPSJyZXNldCJdOjotbW96LWZvY3VzLWlubmVyLAouYXd3IFt0eXBlPSJzdWJtaXQiXTo6LW1vei1mb2N1cy1pbm5lciB7CiAgYm9yZGVyLXN0eWxlOiBub25lOwogIHBhZGRpbmc6IDA7IH0KCi5hd3cgYnV0dG9uOi1tb3otZm9jdXNyaW5nLAouYXd3IFt0eXBlPSJidXR0b24iXTotbW96LWZvY3VzcmluZywKLmF3dyBbdHlwZT0icmVzZXQiXTotbW96LWZvY3VzcmluZywKLmF3dyBbdHlwZT0ic3VibWl0Il06LW1vei1mb2N1c3JpbmcgewogIG91dGxpbmU6IDFweCBkb3R0ZWQgQnV0dG9uVGV4dDsgfQoKLmF3dyBsZWdlbmQgewogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgLyogMSAqLwogIGNvbG9yOiBpbmhlcml0OwogIC8qIDIgKi8KICBkaXNwbGF5OiB0YWJsZTsKICAvKiAxICovCiAgbWF4LXdpZHRoOiAxMDAlOwogIC8qIDEgKi8KICBwYWRkaW5nOiAwOwogIC8qIDMgKi8KICB3aGl0ZS1zcGFjZTogbm9ybWFsOwogIC8qIDEgKi8gfQoKLmF3dyBwcm9ncmVzcyB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIC8qIDEgKi8KICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7CiAgLyogMiAqLyB9CgouYXd3IHRleHRhcmVhIHsKICBvdmVyZmxvdzogYXV0bzsgfQoKLmF3dyBbdHlwZT0iY2hlY2tib3giXSwKLmF3dyBbdHlwZT0icmFkaW8iXSB7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAvKiAxICovCiAgcGFkZGluZzogMDsKICAvKiAyICovIH0KCi5hd3cgW3R5cGU9Im51bWJlciJdOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uLAouYXd3IFt0eXBlPSJudW1iZXIiXTo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbiB7CiAgaGVpZ2h0OiBhdXRvOyB9CgouYXd3IFt0eXBlPSJzZWFyY2giXSB7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7CiAgLyogMSAqLwogIG91dGxpbmUtb2Zmc2V0OiAtMnB4OwogIC8qIDIgKi8gfQoKLmF3dyBbdHlwZT0ic2VhcmNoIl06Oi13ZWJraXQtc2VhcmNoLWNhbmNlbC1idXR0b24sCi5hd3cgW3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uIHsKICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IH0KCi5hd3cgOjotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbiB7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBidXR0b247CiAgLyogMSAqLwogIGZvbnQ6IGluaGVyaXQ7CiAgLyogMiAqLyB9CgouYXd3IGRldGFpbHMsCi5hd3cgbWVudSB7CiAgZGlzcGxheTogYmxvY2s7IH0KCi5hd3cgc3VtbWFyeSB7CiAgZGlzcGxheTogbGlzdC1pdGVtOyB9CgouYXd3IGNhbnZhcyB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9CgouYXd3IHRlbXBsYXRlIHsKICBkaXNwbGF5OiBub25lOyB9CgouYXd3IFtoaWRkZW5dIHsKICBkaXNwbGF5OiBub25lOyB9CgouYXd3IGJvZHkgewogIGZvbnQtZmFtaWx5OiAiTGF0byIsIHNhbnMtc2VyaWY7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDsKICAtbXMtdG91Y2gtYWN0aW9uOiBub25lOwogICAgICB0b3VjaC1hY3Rpb246IG5vbmU7IH0KCi5hd3cgLndyYXBwZXItZm9yLWZ1bGxzY3JlZW4gewogIGJhY2tncm91bmQ6IHVybCgiL3N0YXRpYy9zaXRlL2FwcC1hc3NldHMvYmcuc3ZnIikgI2Y5ZjlmOSByZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiA0MHB4IDQwcHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOyB9CgouYXd3IC5ib3R0b20tbm90aWYtYWQgewogIGJvdHRvbTogMTMwcHggIWltcG9ydGFudDsgfQoKQG1lZGlhIChtaW4td2lkdGg6IDMwZW0pIHsKICAuYXd3IGh0bWwsIC5hd3cgYm9keSB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsgfSB9CgpAbWVkaWEgKG1heC13aWR0aDogMjkuOTM3NWVtKSB7CiAgLmF3dyBodG1sLCAuYXd3IGJvZHkgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogMTAwdnc7CiAgICBoZWlnaHQ6IDEwMHZoOyB9IH0KCi5hd3cgLmxvZ29fX2JveCB7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKICBtYXJnaW4tcmlnaHQ6IDE1cHg7IH0KICAuYXd3IC5sb2dvX19ib3ggLmxvYWRlciB7CiAgICBkaXNwbGF5OiBub25lOyB9CiAgLmF3dyAubG9nb19fYm94LmlzLS1sb2FkaW5nIC5sb2dvIHsKICAgIGRpc3BsYXk6IG5vbmU7IH0KICAuYXd3IC5sb2dvX19ib3guaXMtLWxvYWRpbmcgLmxvYWRlciB7CiAgICBkaXNwbGF5OiBibG9jazsgfQoKLmF3dyAuY2FudmFzIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMHZ3OwogIGhlaWdodDogMTAwdmg7CiAgei1pbmRleDogMjsKICAtbXMtdG91Y2gtYWN0aW9uOiBub25lOwogICAgICB0b3VjaC1hY3Rpb246IG5vbmU7IH0KCi5hd3cgLmNmOmJlZm9yZSwKLmF3dyAuY2Y6YWZ0ZXIgewogIGNvbnRlbnQ6ICIgIjsKICAvKiAxICovCiAgZGlzcGxheTogdGFibGU7CiAgLyogMiAqLyB9CgouYXd3IC5jZjphZnRlciB7CiAgY2xlYXI6IGJvdGg7IH0KCi5hd3cgLmZsZXggewogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7IH0KCi5hd3cgLmZsZXgtLW1pZGRsZSB7CiAgZGlzcGxheTogLW1zLWZsZXhib3ggIWltcG9ydGFudDsKICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7CiAgLW1zLWZsZXgtcGFjazogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOyB9CgouYXd3IC5mbGV4LS10b3AgewogIGRpc3BsYXk6IC1tcy1mbGV4Ym94ICFpbXBvcnRhbnQ7CiAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OwogIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0OwogICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsgfQoKLmF3dyAuZmxleC0tbWlkZGxlc2VsZiB7CiAgLW1zLWZsZXgtaXRlbS1hbGlnbjogY2VudGVyOwogICAgICAtbXMtZ3JpZC1yb3ctYWxpZ246IGNlbnRlcjsKICAgICAgYWxpZ24tc2VsZjogY2VudGVyOyB9CgouYXd3IC5mbGV4LS10b3BzZWxmIHsKICAtbXMtZmxleC1pdGVtLWFsaWduOiBzdGFydDsKICAgICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDsgfQoKQG1lZGlhIChtYXgtd2lkdGg6IDI5LjkzNzVlbSkgewogIC5hd3cgLmZsZXgtLW1pZGRsZSB7CiAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyB9IH0KCi5hd3cgLmZsZXgtLXJpZ2h0IHsKICAtbXMtZmxleC1wYWNrOiBlbmQ7CiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IH0KCi5hd3cgLmZsZXgtLXN0YXJ0IHsKICAtbXMtZmxleC1wYWNrOiBzdGFydDsKICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OyB9CgouYXd3IC5mbGV4LS1yb3cgewogIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93OwogICAgICBmbGV4LWRpcmVjdGlvbjogcm93OyB9CgouYXd3IC5mbGV4LS1jb2x1bW4gewogIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyB9CgouYXd3IC5mbGV4LS1zZWxmcmlnaHQgewogIG1hcmdpbi1sZWZ0OiBhdXRvOyB9CgouYXd3IC5tci0tMSB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7IH0KCi5hd3cgLm1yLS0yIHsKICBtYXJnaW4tcmlnaHQ6IDIwcHggIWltcG9ydGFudDsgfQoKLmF3dyAubXItLTMgewogIG1hcmdpbi1yaWdodDogMzBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tci0tNCB7CiAgbWFyZ2luLXJpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IH0KCi5hd3cgLm1yLS01IHsKICBtYXJnaW4tcmlnaHQ6IDUwcHggIWltcG9ydGFudDsgfQoKLmF3dyAubWwtLTEgewogIG1hcmdpbi1sZWZ0OiAxMHB4ICFpbXBvcnRhbnQ7IH0KCi5hd3cgLm1sLS0yIHsKICBtYXJnaW4tbGVmdDogMjBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tbC0tMyB7CiAgbWFyZ2luLWxlZnQ6IDMwcHggIWltcG9ydGFudDsgfQoKLmF3dyAubWwtLTQgewogIG1hcmdpbi1sZWZ0OiA0MHB4ICFpbXBvcnRhbnQ7IH0KCi5hd3cgLm1sLS01IHsKICBtYXJnaW4tbGVmdDogNTBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tdC0tMSB7CiAgbWFyZ2luLXRvcDogMTBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tdC0tMiB7CiAgbWFyZ2luLXRvcDogMjBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tdC0tMyB7CiAgbWFyZ2luLXRvcDogMzBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tdC0tNCB7CiAgbWFyZ2luLXRvcDogNDBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tdC0tNSB7CiAgbWFyZ2luLXRvcDogNTBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tYi0tMSB7CiAgbWFyZ2luLWJvdHRvbTogMTBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tYi0tMiB7CiAgbWFyZ2luLWJvdHRvbTogMjBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tYi0tMyB7CiAgbWFyZ2luLWJvdHRvbTogMzBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tYi0tNCB7CiAgbWFyZ2luLWJvdHRvbTogNDBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5tYi0tNSB7CiAgbWFyZ2luLWJvdHRvbTogNTBweCAhaW1wb3J0YW50OyB9CgouYXd3IC5uby0tc2VsZWN0IHsKICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICB1c2VyLXNlbGVjdDogbm9uZTsKICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7CiAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IG5vbmU7CiAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiBub25lOwogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KCi5hd3cgLmlzLS12aXNpYmxlIHsKICBkaXNwbGF5OiBibG9jazsgfQoKLmF3dyAuaXMtLXZpc2libGUtZmxleCB7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsgfQoKLmF3dyAuaXMtLWhpZGRlbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CgouYXd3IC5tb2JpbGUtLWhpZGRlbiB7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsgfQogIEBtZWRpYSAobWF4LXdpZHRoOiAyOS45Mzc1ZW0pIHsKICAgIC5hd3cgLm1vYmlsZS0taGlkZGVuIHsKICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9IH0KCi5hd3cgLm1vYmlsZS0tb25seSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgQG1lZGlhIChtYXgtd2lkdGg6IDI5LjkzNzVlbSkgewogICAgLmF3dyAubW9iaWxlLS1vbmx5IHsKICAgICAgZGlzcGxheTogLW1zLWZsZXhib3ggIWltcG9ydGFudDsKICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OyB9IH0KCkBtZWRpYSAobWF4LXdpZHRoOiAyOS45Mzc1ZW0pIHsKICAuYXd3IC5tb2JpbGUtLWNlbnRlcmluZyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA1MCUgIWltcG9ydGFudDsKICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTsgfSB9CgouYXd3IC50YWJsZXQtLWhpZGRlbiB7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsgfQogIEBtZWRpYSAobWF4LXdpZHRoOiA1OS45Mzc1ZW0pIHsKICAgIC5hd3cgLnRhYmxldC0taGlkZGVuIHsKICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9IH0KCi5hd3cgLnRhYmxldC0tb25seSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgQG1lZGlhIChtYXgtd2lkdGg6IDU5LjkzNzVlbSkgewogICAgLmF3dyAudGFibGV0LS1vbmx5IHsKICAgICAgZGlzcGxheTogLW1zLWZsZXhib3ggIWltcG9ydGFudDsKICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50OyB9IH0KCkBrZXlmcmFtZXMgZmFkZUluVXAgewogIGZyb20gewogICAgb3BhY2l0eTogMDsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMzBweCwgMCk7IH0KICB0byB7CiAgICBvcGFjaXR5OiAxOwogICAgdHJhbnNmb3JtOiBub25lOyB9IH0KCi5hd3cgLmZhZGVJblVwIHsKICBhbmltYXRpb246IGZhZGVJblVwIC4zNTBzIGVhc2UtaW4tb3V0OyB9CgpAa2V5ZnJhbWVzIGZhZGVPdXREb3duIHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDE7IH0KICB0byB7CiAgICBvcGFjaXR5OiAwOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAxMDAlLCAwKTsgfSB9CgouYXd3IC5mYWRlT3V0RG93biB7CiAgYW5pbWF0aW9uOiBmYWRlT3V0RG93biAuMzUwcyBlYXNlLWluLW91dDsgfQoKLmF3dyAuZmFkZUluVXAtLW1vYmlsZSB7CiAgYW5pbWF0aW9uOiBub25lOyB9CiAgQG1lZGlhIChtYXgtd2lkdGg6IDI5LjkzNzVlbSkgewogICAgLmF3dyAuZmFkZUluVXAtLW1vYmlsZSB7CiAgICAgIGFuaW1hdGlvbjogZmFkZUluVXAgLjM1MHMgZWFzZS1pbi1vdXQ7IH0gfQoKLmF3dyAuZmFkZU91dERvd24tLW1vYmlsZSB7CiAgYW5pbWF0aW9uOiBub25lOyB9CiAgQG1lZGlhIChtYXgtd2lkdGg6IDI5LjkzNzVlbSkgewogICAgLmF3dyAuZmFkZU91dERvd24tLW1vYmlsZSB7CiAgICAgIGFuaW1hdGlvbjogZmFkZU91dERvd24gLjM1MHMgZWFzZS1pbi1vdXQ7IH0gfQoKQGtleWZyYW1lcyBmYWRlSW5MZWZ0IHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDA7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDMwcHgsIDAsIDApOyB9CiAgdG8gewogICAgb3BhY2l0eTogMTsKICAgIHRyYW5zZm9ybTogbm9uZTsgfSB9CgouYXd3IC5mYWRlSW5MZWZ0IHsKICBhbmltYXRpb246IGZhZGVJbkxlZnQgLjM1MHMgZWFzZS1pbi1vdXQ7IH0KCkBrZXlmcmFtZXMgZmFkZU91dFJpZ2h0IHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDE7IH0KICB0byB7CiAgICBvcGFjaXR5OiAwOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgxMDAlLCAwLCAwKTsgfSB9CgouYXd3IC5mYWRlT3V0UmlnaHQgewogIGFuaW1hdGlvbjogZmFkZU91dFJpZ2h0IC4zNTBzIGVhc2UtaW4tb3V0OyB9CgouYXd3IC5mYWRlSW5MZWZ0LS1tb2JpbGUgewogIGFuaW1hdGlvbjogbm9uZTsgfQogIEBtZWRpYSAobWF4LXdpZHRoOiAyOS45Mzc1ZW0pIHsKICAgIC5hd3cgLmZhZGVJbkxlZnQtLW1vYmlsZSB7CiAgICAgIGFuaW1hdGlvbjogZmFkZUluTGVmdCAuMzUwcyBlYXNlLWluLW91dDsgfSB9CgouYXd3IC5mYWRlT3V0UmlnaHQtLW1vYmlsZSB7CiAgYW5pbWF0aW9uOiBub25lOyB9CiAgQG1lZGlhIChtYXgtd2lkdGg6IDI5LjkzNzVlbSkgewogICAgLmF3dyAuZmFkZU91dFJpZ2h0LS1tb2JpbGUgewogICAgICBhbmltYXRpb246IGZhZGVPdXRSaWdodCAuMzUwcyBlYXNlLWluLW91dDsgfSB9CgouYXd3IC5ncmlkIHsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIC1tcy1mbGV4LXdyYXA6IHdyYXA7CiAgICAgIGZsZXgtd3JhcDogd3JhcDsKICBtYXJnaW46IDAgLTRweDsgfQogIEBtZWRpYSAobWluLXdpZHRoOiA2MGVtKSB7CiAgICAuYXd3IC5ncmlkIHsKICAgICAgbWFyZ2luOiAwIC02cHg7IH0gfQogIC5hd3cgLmdyaWRfX2NvbHVtbiB7CiAgICAtbXMtZmxleDogMTsKICAgICAgICBmbGV4OiAxOwogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogOHB4IDRweDsgfQogICAgQG1lZGlhIChtaW4td2lkdGg6IDYwZW0pIHsKICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uIHsKICAgICAgICBwYWRkaW5nOiAxMnB4IDZweDsgfSB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEgewogICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMyU7CiAgICAgICAgICBmbGV4LWJhc2lzOiA4LjMzMzMzJTsKICAgICAgbWF4LXdpZHRoOiA4LjMzMzMzJTsgfQogICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0yIHsKICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY3JTsKICAgICAgICAgIGZsZXgtYmFzaXM6IDE2LjY2NjY3JTsKICAgICAgbWF4LXdpZHRoOiAxNi42NjY2NyU7IH0KICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMyB7CiAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICBmbGV4LWJhc2lzOiAyNSU7CiAgICAgIG1heC13aWR0aDogMjUlOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTQgewogICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMlOwogICAgICAgICAgZmxleC1iYXNpczogMzMuMzMzMzMlOwogICAgICBtYXgtd2lkdGg6IDMzLjMzMzMzJTsgfQogICAgLmF3dyAuZ3JpZF9fY29sdW1uLS01IHsKICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY3JTsKICAgICAgICAgIGZsZXgtYmFzaXM6IDQxLjY2NjY3JTsKICAgICAgbWF4LXdpZHRoOiA0MS42NjY2NyU7IH0KICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tNiB7CiAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICBmbGV4LWJhc2lzOiA1MCU7CiAgICAgIG1heC13aWR0aDogNTAlOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTcgewogICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMlOwogICAgICAgICAgZmxleC1iYXNpczogNTguMzMzMzMlOwogICAgICBtYXgtd2lkdGg6IDU4LjMzMzMzJTsgfQogICAgLmF3dyAuZ3JpZF9fY29sdW1uLS04IHsKICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY3JTsKICAgICAgICAgIGZsZXgtYmFzaXM6IDY2LjY2NjY3JTsKICAgICAgbWF4LXdpZHRoOiA2Ni42NjY2NyU7IH0KICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tOSB7CiAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICBmbGV4LWJhc2lzOiA3NSU7CiAgICAgIG1heC13aWR0aDogNzUlOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwIHsKICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzJTsKICAgICAgICAgIGZsZXgtYmFzaXM6IDgzLjMzMzMzJTsKICAgICAgbWF4LXdpZHRoOiA4My4zMzMzMyU7IH0KICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMTEgewogICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjclOwogICAgICAgICAgZmxleC1iYXNpczogOTEuNjY2NjclOwogICAgICBtYXgtd2lkdGg6IDkxLjY2NjY3JTsgfQogICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0xMiB7CiAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgZmxleC1iYXNpczogMTAwJTsKICAgICAgbWF4LXdpZHRoOiAxMDAlOyB9CiAgICBAbWVkaWEgKG1pbi13aWR0aDogMzBlbSkgewogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTFcQHNtYWxsIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDguMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogOC4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0yXEBzbWFsbCB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogMTYuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogMTYuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tM1xAc21hbGwgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDI1JTsKICAgICAgICBtYXgtd2lkdGg6IDI1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTRcQHNtYWxsIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAzMy4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiAzMy4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS01XEBzbWFsbCB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogNDEuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogNDEuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tNlxAc21hbGwgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDUwJTsKICAgICAgICBtYXgtd2lkdGg6IDUwJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTdcQHNtYWxsIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA1OC4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiA1OC4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS04XEBzbWFsbCB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogNjYuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogNjYuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tOVxAc21hbGwgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDc1JTsKICAgICAgICBtYXgtd2lkdGg6IDc1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwXEBzbWFsbCB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogODMuMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogODMuMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMTFcQHNtYWxsIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA5MS42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA5MS42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0xMlxAc21hbGwgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgICBAbWVkaWEgKG1pbi13aWR0aDogNDhlbSkgewogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTFcQG1lZGl1bSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDguMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA4LjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDguMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMlxAbWVkaXVtIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMTYuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxNi42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiAxNi42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0zXEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDI1JTsKICAgICAgICBtYXgtd2lkdGg6IDI1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTRcQG1lZGl1bSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDMzLjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogMzMuMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogMzMuMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tNVxAbWVkaXVtIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNDEuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA0MS42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA0MS42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS02XEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDUwJTsKICAgICAgICBtYXgtd2lkdGg6IDUwJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTdcQG1lZGl1bSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDU4LjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogNTguMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogNTguMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tOFxAbWVkaXVtIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNjYuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA2Ni42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA2Ni42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS05XEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDc1JTsKICAgICAgICBtYXgtd2lkdGg6IDc1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwXEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA4My4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDgzLjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDgzLjMzMzMzJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTExXEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA5MS42NjY2NyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDkxLjY2NjY3JTsKICAgICAgICBtYXgtd2lkdGg6IDkxLjY2NjY3JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEyXEBtZWRpdW0gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgICBAbWVkaWEgKG1pbi13aWR0aDogNjBlbSkgewogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTFcQGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOC4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDguMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogOC4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0yXEBsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDE2LjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogMTYuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogMTYuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tM1xAbGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDI1JTsKICAgICAgICBtYXgtd2lkdGg6IDI1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTRcQGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMzMuMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAzMy4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiAzMy4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS01XEBsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDQxLjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogNDEuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogNDEuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tNlxAbGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDUwJTsKICAgICAgICBtYXgtd2lkdGg6IDUwJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTdcQGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNTguMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA1OC4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiA1OC4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS04XEBsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDY2LjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogNjYuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogNjYuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tOVxAbGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDc1JTsKICAgICAgICBtYXgtd2lkdGg6IDc1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwXEBsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDgzLjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogODMuMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogODMuMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMTFcQGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogOTEuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA5MS42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA5MS42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0xMlxAbGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgICBAbWVkaWEgKG1pbi13aWR0aDogNzBlbSkgewogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTFcQHhsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDguMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA4LjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDguMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMlxAeGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMTYuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxNi42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiAxNi42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0zXEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDI1JTsKICAgICAgICBtYXgtd2lkdGg6IDI1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTRcQHhsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDMzLjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogMzMuMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogMzMuMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tNVxAeGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNDEuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA0MS42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA0MS42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS02XEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDUwJTsKICAgICAgICBtYXgtd2lkdGg6IDUwJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTdcQHhsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDU4LjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogNTguMzMzMzMlOwogICAgICAgIG1heC13aWR0aDogNTguMzMzMzMlOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tOFxAeGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogNjYuNjY2NjclOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA2Ni42NjY2NyU7CiAgICAgICAgbWF4LXdpZHRoOiA2Ni42NjY2NyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS05XEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDc1JTsKICAgICAgICBtYXgtd2lkdGg6IDc1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwXEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA4My4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDgzLjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDgzLjMzMzMzJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTExXEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA5MS42NjY2NyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDkxLjY2NjY3JTsKICAgICAgICBtYXgtd2lkdGg6IDkxLjY2NjY3JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEyXEB4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgICBAbWVkaWEgKG1pbi13aWR0aDogOTBlbSkgewogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTFcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA4LjMzMzMzJTsKICAgICAgICAgICAgZmxleC1iYXNpczogOC4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiA4LjMzMzMzJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTJcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxNi42NjY2NyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDE2LjY2NjY3JTsKICAgICAgICBtYXgtd2lkdGg6IDE2LjY2NjY3JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTNcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAyNSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDI1JTsKICAgICAgICBtYXgtd2lkdGg6IDI1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTRcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAzMy4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDMzLjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDMzLjMzMzMzJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTVcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA0MS42NjY2NyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDQxLjY2NjY3JTsKICAgICAgICBtYXgtd2lkdGg6IDQxLjY2NjY3JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTZcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1MCU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDUwJTsKICAgICAgICBtYXgtd2lkdGg6IDUwJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTdcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA1OC4zMzMzMyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDU4LjMzMzMzJTsKICAgICAgICBtYXgtd2lkdGg6IDU4LjMzMzMzJTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLThcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA2Ni42NjY2NyU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDY2LjY2NjY3JTsKICAgICAgICBtYXgtd2lkdGg6IDY2LjY2NjY3JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTlcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiA3NSU7CiAgICAgICAgICAgIGZsZXgtYmFzaXM6IDc1JTsKICAgICAgICBtYXgtd2lkdGg6IDc1JTsgfQogICAgICAuYXd3IC5ncmlkX19jb2x1bW4tLTEwXEB4eGxhcmdlIHsKICAgICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogODMuMzMzMzMlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiA4My4zMzMzMyU7CiAgICAgICAgbWF4LXdpZHRoOiA4My4zMzMzMyU7IH0KICAgICAgLmF3dyAuZ3JpZF9fY29sdW1uLS0xMVxAeHhsYXJnZSB7CiAgICAgICAgLW1zLWZsZXgtcHJlZmVycmVkLXNpemU6IDkxLjY2NjY3JTsKICAgICAgICAgICAgZmxleC1iYXNpczogOTEuNjY2NjclOwogICAgICAgIG1heC13aWR0aDogOTEuNjY2NjclOyB9CiAgICAgIC5hd3cgLmdyaWRfX2NvbHVtbi0tMTJcQHh4bGFyZ2UgewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiAxMDAlOwogICAgICAgICAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLXNocmluayB7CiAgICAgIC1tcy1mbGV4OiAwIDEgYXV0bzsKICAgICAgICAgIGZsZXg6IDAgMSBhdXRvOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLW1pZGRsZSB7CiAgICAgIC1tcy1mbGV4LWl0ZW0tYWxpZ246IGNlbnRlcjsKICAgICAgICAgIC1tcy1ncmlkLXJvdy1hbGlnbjogY2VudGVyOwogICAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLWJvdHRvbSB7CiAgICAgIC1tcy1mbGV4LWl0ZW0tYWxpZ246IGVuZDsKICAgICAgICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kOyB9CiAgICAuYXd3IC5ncmlkX19jb2x1bW4tLWJhc2VsaW5lIHsKICAgICAgLW1zLWZsZXgtaXRlbS1hbGlnbjogYmFzZWxpbmU7CiAgICAgICAgICBhbGlnbi1zZWxmOiBiYXNlbGluZTsgfQogICAgLmF3dyAuZ3JpZF9fY29sdW1uLS1zdHJldGNoIHsKICAgICAgLW1zLWZsZXgtaXRlbS1hbGlnbjogc3RyZXRjaDsKICAgICAgICAgIC1tcy1ncmlkLXJvdy1hbGlnbjogc3RyZXRjaDsKICAgICAgICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7IH0KICAuYXd3IC5ncmlkLS1yaWdodCB7CiAgICAtbXMtZmxleC1wYWNrOiBlbmQ7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgfQogIC5hd3cgLmdyaWQtLWNlbnRlciB7CiAgICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAuYXd3IC5ncmlkLS1qdXN0aWZ5IHsKICAgIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyB9CiAgLmF3dyAuZ3JpZC0tc3BhY2UgewogICAgLW1zLWZsZXgtcGFjazogZGlzdHJpYnV0ZTsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsgfQogIC5hd3cgLmdyaWQtLW1pZGRsZSB7CiAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAuYXd3IC5ncmlkLS1ib3R0b20gewogICAgLW1zLWZsZXgtYWxpZ246IGVuZDsKICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7IH0KICAuYXd3IC5ncmlkLS1zdHJldGNoIHsKICAgIC1tcy1mbGV4LWFsaWduOiBzdHJldGNoOwogICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoOyB9CiAgLmF3dyAuZ3JpZC0tc3RhY2tlZCB7CiAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyB9CiAgLmF3dyAuZ3JpZC0tcmV2ZXJzZWQgewogICAgLW1zLWZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsKICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7IH0KICAgIC5hd3cgLmdyaWQtLXJldmVyc2VkLmF3dyAuZ3JpZC0tc3RhY2tlZCB7CiAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7CiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7IH0KICBAbWVkaWEgKG1heC13aWR0aDogNDcuOTM3NWVtKSB7CiAgICAuYXd3IC5ncmlkLS1zdGFja2FibGUgewogICAgICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgIC1tcy1mbGV4LWFsaWduOiBzdGFydCAhaW1wb3J0YW50OwogICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQgIWltcG9ydGFudDsgfQogICAgICAuYXd3IC5ncmlkLS1zdGFja2FibGUgPiAuYXd3IC5ncmlkX19jb2x1bW4gewogICAgICAgIC1tcy1mbGV4LXByZWZlcnJlZC1zaXplOiBhdXRvOwogICAgICAgICAgICBmbGV4LWJhc2lzOiBhdXRvOwogICAgICAgIG1heC13aWR0aDogMTAwJTsgfSB9CiAgLmF3dyAuZ3JpZC0tZ2FwbGVzcyB7CiAgICBtYXJnaW46IDA7IH0KICAgIC5hd3cgLmdyaWQtLWdhcGxlc3MgPiAuYXd3IC5ncmlkX19jb2x1bW4gewogICAgICBwYWRkaW5nOiAwOyB9CgouYXd3IC5oZWFkaW5nIHsKICBtYXJnaW46IDA7IH0KCi5hd3cgLnBhcmFncmFwaCB7CiAgbWFyZ2luOiAwOyB9CgouYXd3IC50ZXh0LS1tdXRlZCB7CiAgY29sb3I6ICNiM2IzYjM7IH0KCi5hd3cgLmgxIHsKICBmb250LXNpemU6IDIwcHg7IH0KCi5hd3cgLmgyIHsKICBmb250LXNpemU6IDE4cHg7IH0KCi5hd3cgLmgzIHsKICBmb250LXNpemU6IDE2cHg7IH0KCi5hd3cgLmg0IHsKICBmb250LXNpemU6IDE0cHg7IH0KCi5hd3cgLmg1IHsKICBmb250LXNpemU6IDEycHg7IH0KCi5hd3cgYiwgLmF3dyBzdHJvbmcgewogIGZvbnQtd2VpZ2h0OiA3MDA7IH0KCi5hd3cgaHIgewogIGJvcmRlcjogMDsKICBjb2xvcjogI2UxZTFlMTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTFlMWUxOwogIGhlaWdodDogMXB4OwogIG1hcmdpbjogMDsgfQoKLmF3dyBhIHsKICBjb2xvcjogIzU2QzM3NjsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0KICAuYXd3IGE6aG92ZXIgewogICAgY29sb3I6ICM0Q0FDNkE7CiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQoKLmF3dyB1bCB7CiAgbGlzdC1zdHlsZS10eXBlOiBub25lOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOyB9CgouYXd3IC5pbnB1dCB7CiAgZm9udC1zaXplOiAxNnB4OwogIGhlaWdodDogNDBweDsKICBwYWRkaW5nOiAwIDE2cHg7CiAgY29sb3I6ICNiM2IzYjM7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXItY29sb3I6ICM1NkMzNzY7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgYm9yZGVyLXdpZHRoOiAxcHg7CiAgYm9yZGVyLXN0eWxlOiBzb2xpZDsKICBib3JkZXItY29sb3I6ICNkZGRkZGQ7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGxpbmUtaGVpZ2h0OiAxOwogIHdpZHRoOiAxMDAlOyB9CiAgLmF3dyAuaW5wdXQ6aG92ZXIsIC5hd3cgLmlucHV0OmZvY3VzIHsKICAgIG91dGxpbmU6IDA7CiAgICBib3JkZXItY29sb3I6ICNFM0UzRTM7CiAgICBjb2xvcjogIzE5MTkxOTsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgICBib3JkZXItY29sb3I6ICM1NkMzNzY7IH0KICAuYXd3IC5pbnB1dC0tYmlnIHsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGhlaWdodDogNTBweDsKICAgIHBhZGRpbmc6IDAgMTZweDsgfQogIC5hd3cgLmlucHV0LS13aGl0ZSB7CiAgICBjb2xvcjogIzAwMDsKICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7IH0KICAgIC5hd3cgLmlucHV0LS13aGl0ZTpob3ZlciwgLmF3dyAuaW5wdXQtLXdoaXRlOmZvY3VzIHsKICAgICAgY29sb3I6ICMwMDA7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7IH0KICAuYXd3IC5pbnB1dC0tcmVhZG9ubHkgewogICAgY29sb3I6ICMwMDA7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4OyB9CiAgICAuYXd3IC5pbnB1dC0tcmVhZG9ubHk6aG92ZXIsIC5hd3cgLmlucHV0LS1yZWFkb25seTpmb2N1cyB7CiAgICAgIGNvbG9yOiAjMDAwOwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4OyB9CiAgLmF3dyAuaW5wdXQ6ZGlzYWJsZWQsIC5hd3cgLmlucHV0LS1kaXNhYmxlZCB7CiAgICBvdXRsaW5lOiAwOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsKICAgIGJvcmRlci1jb2xvcjogI0UzRTNFMzsKICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyB9CiAgLmF3dyAuaW5wdXQ6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgewogICAgY29sb3I6ICNiM2IzYjM7IH0KICAuYXd3IC5pbnB1dDotbW96LXBsYWNlaG9sZGVyIHsKICAgIGNvbG9yOiAjYjNiM2IzOyB9CiAgLmF3dyAuaW5wdXQ6Oi1tb3otcGxhY2Vob2xkZXIgewogICAgY29sb3I6ICNiM2IzYjM7IH0KICAuYXd3IC5pbnB1dDotbXMtaW5wdXQtcGxhY2Vob2xkZXIgewogICAgY29sb3I6ICNiM2IzYjM7IH0KICAuYXd3IC5pbnB1dF9fdGV4dGFyZWEgewogICAgbWluLWhlaWdodDogODBweDsKICAgIHJlc2l6ZTogbm9uZTsKICAgIHBhZGRpbmc6IDEwcHg7IH0KICAuYXd3IC5pbnB1dF9fZHJvcGdyb3VwIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogIC5hd3cgLmlucHV0X19ncm91cCB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7IH0KICAuYXd3IC5pbnB1dF9fdGFncyB7CiAgICBwYWRkaW5nOiA1cHggNXB4IDAgNXB4OwogICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICBtaW4taGVpZ2h0OiA0MHB4OyB9CiAgICAuYXd3IC5pbnB1dF9fdGFncyAudGFnIHsKICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgICBmbG9hdDogbGVmdDsKICAgICAgaGVpZ2h0OiAyOHB4OwogICAgICBsaW5lLWhlaWdodDogMjhweDsKICAgICAgYmFja2dyb3VuZDogIzU2QzM3NjsKICAgICAgY29sb3I6ICNmZmY7CiAgICAgIG1hcmdpbi1yaWdodDogNXB4OwogICAgICBwYWRkaW5nOiAwIDVweCAwIDEwcHg7IH0KICAgICAgLmF3dyAuaW5wdXRfX3RhZ3MgLnRhZyBpbWcgewogICAgICAgIGZsb2F0OiByaWdodDsKICAgICAgICBtYXJnaW4tbGVmdDogNXB4OwogICAgICAgIG1heC1oZWlnaHQ6IDI4cHg7CiAgICAgICAgaGVpZ2h0OiAyOHB4OwogICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOyB9CiAgICAuYXd3IC5pbnB1dF9fdGFncy0tY3VzdG9tIHsKICAgICAgbWFyZ2luLWJvdHRvTTogNXB4OwogICAgICBmbG9hdDogbGVmdDsKICAgICAgaGVpZ2h0OiAyOHB4OwogICAgICBsaW5lLWhlaWdodDogMjhweDsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBmb250LWZhbWlseTogIkxhdG8iLCBzYW5zLXNlcmlmOwogICAgICBmb250LXNpemU6IDE2cHg7IH0KICAgICAgLmF3dyAuaW5wdXRfX3RhZ3MtLWN1c3RvbTpmb2N1cyB7CiAgICAgICAgb3V0bGluZTogbm9uZTsgfQogIC5hd3cgLmlucHV0X19kcm9wZG93biB7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2lkdGg6IDEwMCU7CiAgICB0b3A6IDEwMCU7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgYm94LXNoYWRvdzogMCA0cHggMTRweCAwIHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICB6LWluZGV4OiAyOyB9CiAgICAuYXd3IC5pbnB1dF9fZHJvcGRvd24tLWxpc3QgLml0ZW0tLWVtYWlsIHsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBwYWRkaW5nOiAxMHB4IDE2cHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRUJFQkVCOyB9CiAgICAgIC5hd3cgLmlucHV0X19kcm9wZG93bi0tbGlzdCAuaXRlbS0tZW1haWw6bGFzdC1jaGlsZCB7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTsgfQogICAgICAuYXd3IC5pbnB1dF9fZHJvcGRvd24tLWxpc3QgLml0ZW0tLWVtYWlsOmhvdmVyIHsKICAgICAgICBiYWNrZ3JvdW5kOiAjRUJFQkVCOyB9CiAgICAuYXd3IC5pbnB1dF9fZHJvcGRvd24uaXMtLXZpc2libGUgewogICAgICBkaXNwbGF5OiBibG9jazsgfQoKLmF3dyAuY3Vyc29yIHsKICB3aWR0aDogMTVweDsKICBoZWlnaHQ6IDIwcHg7CiAgY3Vyc29yOiBpbml0aWFsOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBsaW5lYXI7CiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICB1c2VyLXNlbGVjdDogbm9uZTsKICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7CiAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IG5vbmU7CiAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiBub25lOwogIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KICAuYXd3IC5jdXJzb3I6YWZ0ZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgY3Vyc29yOiBkZWZhdWx0OwogICAgdG9wOiAyNHB4OwogICAgbGVmdDogMTJweDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIHBhZGRpbmc6IDNweCA4cHg7CiAgICBsaW5lLWhlaWdodDogMS4yNTsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICBjb250ZW50OiBhdHRyKGRhdGEtdXNlcm5hbWUpOwogICAgY29sb3I6ICNmZmY7CiAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7CiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOwogICAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IG5vbmU7CiAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IG5vbmU7CiAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50OyB9CiAgLmF3dyAuY3Vyc29yLS1ncmVlbiAuYXJyb3cgewogICAgZmlsbDogIzQ3YjA0YjsKICAgIGJhY2tncm91bmQtY29sb3I6ICM0N2IwNGI7IH0KICAuYXd3IC5jdXJzb3ItLWdyZWVuOmFmdGVyIHsKICAgIGZpbGw6ICM0N2IwNGI7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDdiMDRiOyB9CiAgLmF3dyAuY3Vyc29yLS1wdXJwbGUgLmFycm93IHsKICAgIGZpbGw6ICM5ZDFiYjI7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWQxYmIyOyB9CiAgLmF3dyAuY3Vyc29yLS1wdXJwbGU6YWZ0ZXIgewogICAgZmlsbDogIzlkMWJiMjsKICAgIGJhY2tncm91bmQtY29sb3I6ICM5ZDFiYjI7IH0KICAuYXd3IC5jdXJzb3ItLW9yYW5nZSAuYXJyb3cgewogICAgZmlsbDogI2M0NmYzYzsKICAgIGJhY2tncm91bmQtY29sb3I6ICNjNDZmM2M7IH0KICAuYXd3IC5jdXJzb3ItLW9yYW5nZTphZnRlciB7CiAgICBmaWxsOiAjYzQ2ZjNjOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2M0NmYzYzsgfQogIC5hd3cgLmN1cnNvci0tcmVkIC5hcnJvdyB7CiAgICBmaWxsOiAjZjc0MTJkOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3NDEyZDsgfQogIC5hd3cgLmN1cnNvci0tcmVkOmFmdGVyIHsKICAgIGZpbGw6ICNmNzQxMmQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjc0MTJkOyB9CiAgLmF3dyAuY3Vyc29yLS1ibHVlIC5hcnJvdyB7CiAgICBmaWxsOiAjMTE5NGY2OwogICAgYmFja2dyb3VuZC1jb2xvcjogIzExOTRmNjsgfQogIC5hd3cgLmN1cnNvci0tYmx1ZTphZnRlciB7CiAgICBmaWxsOiAjMTE5NGY2OwogICAgYmFja2dyb3VuZC1jb2xvcjogIzExOTRmNjsgfQogIC5hd3cgLmN1cnNvci0teWVsbG93IC5hcnJvdyB7CiAgICBmaWxsOiAjZmZjMjAwOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYzIwMDsgfQogIC5hd3cgLmN1cnNvci0teWVsbG93OmFmdGVyIHsKICAgIGZpbGw6ICNmZmMyMDA7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjMjAwOyB9CiAgLmF3dyAuY3Vyc29yLS1tYWdlbnRhIC5hcnJvdyB7CiAgICBmaWxsOiAjZWMxNTYxOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2VjMTU2MTsgfQogIC5hd3cgLmN1cnNvci0tbWFnZW50YTphZnRlciB7CiAgICBmaWxsOiAjZWMxNTYxOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2VjMTU2MTsgfQogIC5hd3cgLmN1cnNvci0tYnJvd24gLmFycm93IHsKICAgIGZpbGw6ICM3YTRjM2E7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2E0YzNhOyB9CiAgLmF3dyAuY3Vyc29yLS1icm93bjphZnRlciB7CiAgICBmaWxsOiAjN2E0YzNhOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzdhNGMzYTsgfQogIC5hd3cgLmN1cnNvci0tYmxhY2sgLmFycm93IHsKICAgIGZpbGw6ICMwMDA7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB9CiAgLmF3dyAuY3Vyc29yLS1ibGFjazphZnRlciB7CiAgICBmaWxsOiAjMDAwOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgfQoKLmF3dyAjYXd3LWNvbnRhaW5lciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICBvdmVyZmxvdzogaGlkZGVuOwogIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7CiAgcGVyc3BlY3RpdmU6IDEwMDBweDsKICAtbXMtdG91Y2gtYWN0aW9uOiBub25lOyB9CiAgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LWNhbnZhcy13cmFwcGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICByaWdodDogMDsKICAgIGJvdHRvbTogMDsKICAgIHotaW5kZXg6IDUwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIGN1cnNvcjogY3Jvc3NoYWlyOwogICAgaGVpZ2h0OiAxMDAlOyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctY2FudmFzLXdyYXBwZXIgY2FudmFzIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDA7CiAgICAgIGxlZnQ6IDA7CiAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsKICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAtby11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7IH0KICAgIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1jYW52YXMtd3JhcHBlci5wYW5uaW5nIHsKICAgICAgY3Vyc29yOiAtd2Via2l0LWdyYWI7CiAgICAgIGN1cnNvcjogZ3JhYjsgfQogICAgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LWNhbnZhcy13cmFwcGVyLnBhbm5pbmctZ3JhYmJlZCB7CiAgICAgIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZzsKICAgICAgY3Vyc29yOiBncmFiYmluZzsgfQogICAgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LWNhbnZhcy13cmFwcGVyIC5hd3ctdXNlci1wb2ludGVyIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBsaW5lYXI7CiAgICAgIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm07CiAgICAgIHRvcDogMDsKICAgICAgbGVmdDogMDsgfQogIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy10ZXh0YXJlYSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBkaXNwbGF5OiBub25lOwogICAgYmFja2dyb3VuZDogbm9uZTsKICAgIGNvbG9yOiAjMDAwOwogICAgZm9udC1mYW1pbHk6ICdMYXRvJywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICBmb250LXNpemU6IDIwcHg7CiAgICBib3JkZXI6IDA7CiAgICBwYWRkaW5nOiAwOwogICAgbWFyZ2luOiAwOwogICAgbGluZS1oZWlnaHQ6IDEuM2VtOwogICAgcmVzaXplOiBub25lOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIG9wYWNpdHk6IDA7CiAgICB3aWR0aDogMTAwMHB4OyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctdGV4dGFyZWE6Zm9jdXMgewogICAgICBvdXRsaW5lOiBub25lOyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctdGV4dGFyZWEuc2hvdyB7CiAgICAgIG9wYWNpdHk6IDE7IH0KICAgIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy10ZXh0YXJlYS5oaWRlIHsKICAgICAgb3BhY2l0eTogMDsgfQogIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1kcmF3aW5nLWhlbHBlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB6LWluZGV4OiAxMDsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7IH0KICAgIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1kcmF3aW5nLWhlbHBlciBsaW5lLCAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctZHJhd2luZy1oZWxwZXIgcmVjdCwgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LWRyYXdpbmctaGVscGVyIGVsbGlwc2UsIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1kcmF3aW5nLWhlbHBlciBwb2x5Z29uIHsKICAgICAgc3Ryb2tlOiAjM2RjNDc2OwogICAgICAvKiAzREM0NzYgKi8KICAgICAgc3Ryb2tlLXdpZHRoOiAxcHg7CiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDUsNTsKICAgICAgZmlsbDogcmdiYSg2MSwgMTk2LCAxMTgsIDAuMDUpOyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctZHJhd2luZy1oZWxwZXIgcG9seWdvbiB7CiAgICAgIHN0cm9rZTogI2RjMjkyOTsKICAgICAgLyogZGMyOTI5ICovCiAgICAgIGZpbGw6IHJnYmEoMjAwLCA0MSwgNDEsIDAuMDUpOyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctZHJhd2luZy1oZWxwZXIgZWxsaXBzZS5hd3ctbWFya2VyIHsKICAgICAgc3Ryb2tlOiB0cmFuc3BhcmVudDsKICAgICAgZmlsbDogcmdiYSg2MSwgMTk2LCAxMTgsIDAuMzUpOyB9CiAgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LXNlbGVjdC1vdXRsaW5lIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHotaW5kZXg6IDEwOwogICAgbGVmdDogMDsKICAgIHRvcDogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctc2VsZWN0LW91dGxpbmUgbGluZSwgLmF3dyAjYXd3LWNvbnRhaW5lciAuYXd3LXNlbGVjdC1vdXRsaW5lIHJlY3QsIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1zZWxlY3Qtb3V0bGluZSBlbGxpcHNlLCAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctc2VsZWN0LW91dGxpbmUgcG9seWdvbiB7CiAgICAgIHN0cm9rZTogIzNkYzQ3NjsKICAgICAgLyogM0RDNDc2ICovCiAgICAgIHN0cm9rZS13aWR0aDogMXB4OwogICAgICBzdHJva2UtZGFzaGFycmF5OiA1LDU7CiAgICAgIGZpbGw6IHRyYW5zcGFyZW50OyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctc2VsZWN0LW91dGxpbmUgcG9seWdvbiB7CiAgICAgIHN0cm9rZTogI2RjMjkyOTsKICAgICAgLyogZGMyOTI5ICovCiAgICAgIGZpbGw6IHRyYW5zcGFyZW50OyB9CiAgICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctc2VsZWN0LW91dGxpbmUgZWxsaXBzZS5hd3ctbWFya2VyIHsKICAgICAgc3Ryb2tlOiB0cmFuc3BhcmVudDsKICAgICAgZmlsbDogdHJhbnNwYXJlbnQ7IH0KICAuYXd3ICNhd3ctY29udGFpbmVyIC5hd3ctbWluaW1hcCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDE2cHg7CiAgICByaWdodDogMTZweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMzZGM0NzY7IH0KICAgIC5hd3cgI2F3dy1jb250YWluZXIgLmF3dy1taW5pbWFwIC5hd3ctc2NyZWVuLW1hcmtlciB7CiAgICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgICBtYXJnaW4tdG9wOiAwOwogICAgICBib3JkZXI6IDJweCBkb3R0ZWQgIzNkYzQ3NjsKICAgICAgLyogM0RDNDc2ICovIH0KCi5hd3cgLmF3dy1wb3N0LWl0IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRjdDRDsKICBib3gtc2hhZG93OiA0cHggNHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogIGN1cnNvcjogbW92ZTsgfQogIC5hd3cgLmF3dy1wb3N0LWl0LXdyYXBwZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgYm90dG9tOiAwOwogICAgbGVmdDogMDsKICAgIHJpZ2h0OiAwOyB9CiAgLmF3dyAuYXd3LXBvc3QtaXQgLmNsb3NlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMTFweDsKICAgIHJpZ2h0OiAxMXB4OwogICAgY3Vyc29yOiBwb2ludGVyOyB9CiAgLmF3dyAuYXd3LXBvc3QtaXQgLm5vdGUgewogICAgY29sb3I6ICMwMDAwMDA7CiAgICB3aWR0aDogMjMwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgIG1hcmdpbjogMHB4OwogICAgcGFkZGluZzogMHB4IDEwcHggMTBweCAxMHB4OwogICAgYm9yZGVyOiAwOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgZm9udC1mYW1pbHk6ICdMYXRvJywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgd29yZC13cmFwOiBub3JtYWw7CiAgICBjdXJzb3I6IHRleHQ7CiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9CiAgLmF3dyAuYXd3LXBvc3QtaXQgLnJlbmRlci1oZWxwZXItd2lkdGggewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2lkdGg6IDBweDsKICAgIGhlaWdodDogMHB4OwogICAgbWFyZ2luOiAwcHg7CiAgICBtaW4td2lkdGg6IDBweDsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsgfQogIC5hd3cgLmF3dy1wb3N0LWl0IC5yZW5kZXItaGVscGVyLWhlaWdodCB7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDBweDsKICAgIHBhZGRpbmctYm90dG9tOiAwcHg7CiAgICB2aXNpYmlsaXR5OiBoaWRkZW47IH0KICAuYXd3IC5hd3ctcG9zdC1pdCB0ZXh0YXJlYTpmb2N1cyB7CiAgICBvdXRsaW5lOiBub25lOyB9CgouYXd3ICNrZXlib2FyZC1zaG9ydGN1dHMtd2lkZ2V0IC5zaG9ydGN1dHMgewogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLW1zLWZsZXgtcGFjazogZGlzdHJpYnV0ZTsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7IH0KICAuYXd3ICNrZXlib2FyZC1zaG9ydGN1dHMtd2lkZ2V0IC5zaG9ydGN1dHMgdWwgewogICAgLW1zLWZsZXg6IDE7CiAgICAgICAgZmxleDogMTsgfQogICAgLmF3dyAja2V5Ym9hcmQtc2hvcnRjdXRzLXdpZGdldCAuc2hvcnRjdXRzIHVsIHN0cm9uZyB7CiAgICAgIGZvbnQtc2l6ZTogMS4yZW07IH0KICAuYXd3ICNrZXlib2FyZC1zaG9ydGN1dHMtd2lkZ2V0IC5zaG9ydGN1dHMgbGkuY3RybCB7CiAgICBkaXNwbGF5OiBub25lOyB9CiAgLmF3dyAja2V5Ym9hcmQtc2hvcnRjdXRzLXdpZGdldCAuc2hvcnRjdXRzIGxpLmNtZCB7CiAgICBkaXNwbGF5OiBub25lOyB9Cg==","base64"),y=t("./utils/utils"),C=[],b=[]
;(window.AwwBoard=function(t,e){if(e=e||{},a("AwwBoard initiating ..."),"string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("No element for AWW widget found");"static"===window.getComputedStyle(t).position&&(t.style.position="relative"),"awwapp-api-key"!==e.apiKey&&(n(v.toString()),i(t));var r=s("#aww-container.aww-container");t.appendChild(r),e=o.defaults({},e,{apiKey:"",toolbar:!0,orientation:"auto",shrinkCanvas:!0,autoJoin:!0,boardLink:void 0,singleBoardId:void 0,inactiveTtl:7200,inviteViaQr:!1,sendUserPointer:!1,connectAllAsReadOnly:!1,defaultZoomLevel:0,zoomLevelLimits:[],enableZoom:!0,enablePan:!0,showUserPointers:!1,multiPage:!1,enableClassroom:!1,translation:{},toolbarEl:"",chatEl:"",customOps:{},prettyLinks:null,menuItems:{},menuOrder:l.TOP_MENU.concat(Object.keys(e.menuItems||{})),colors:l.COLORS,tools:l.TOOLS,sizes:l.SIZES,fontSizes:l.FONT_SIZES,defaultSizes:l.DEFAULT_SIZES,defaultColor:l.DEFAULT_COLOR,defaultTool:l.DEFAULT_TOOL,defaultFontFamily:l.FONT_FAMILY,backgroundColor:l.BACKGROUND_COLOR,minBoardSize:l.MIN_BOARD_SIZE,maxBoardSize:l.MAX_BOARD_SIZE,boardResize:l.BOARD_RESIZE}),a("setting apiKey cookie");var C=new c,b=f(C,e),w={el:t,canvasContainer:r,options:e,dispatcher:C,socketEmitter:b};w.utils=y(w),w.board=u(w),w.canvas=p(w),"awwapp-api-key"===e.apiKey?(w.widgets=h(w),w.toolbarUi=g(w)):t.className+=" aww",w.p2p=m(w),w.api=d(w);var I=e.boardLink||e.boardLinkGetter&&e.boardLinkGetter()||w.utils.getBoardLink();return e.apiKey&&I&&e.autoJoin&&(a("got board link:",I),a("starting socket connection ..."),C.emit("socket-init",{autojoin:e.autoJoin,boardLink:I})),w.api}).defaultOps={lineOp:t("./op/line-op.js"),imageOp:t("./op/image-op.js"),textOp:t("./op/text-op.js")}}).call(this,t("buffer").Buffer)},{"../../common/config":5,"./board":9,"./canvas":10,"./lodash.custom":12,"./op/image-op.js":16,"./op/line-op.js":18,"./op/text-op.js":27,"./p2p-rtc":29,"./socket":30,"./ui/toolbar":32,"./user-api":33,"./utils/dispatcher":34,"./utils/utils":36,"./widgets":37,buffer:51,debug:61,hyperscript:72,"polyfill-function-prototype-bind":82}],12:[function(t,e,n){(function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function i(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||void 0===t&&r)return 1;if(t<e||!r||void 0===e&&n)return-1}return 0}function o(t,e,n){if(e!==e)return g(t,n);n-=1;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function a(t){return"function"==typeof t||!1}function s(t){return"string"==typeof t?t:null==t?"":t+""}function c(t){return t.charCodeAt(0)}function u(t,e){for(var n=-1,r=t.length;++n<r&&-1<e.indexOf(t.charAt(n)););return n}function l(t,e){for(var n=t.length;n--&&-1<e.indexOf(t.charAt(n)););return n}function f(t,e){return i(t.a,e.a)||t.b-e.b}function d(t){return Pt[t]}function h(t){return jt[t]}function p(t){return"\\"+zt[t]}function g(t,e,n){var r=t.length;for(e+=n?0:-1;n?e--:++e<r;){var i=t[e];if(i!==i)return e}return-1}function m(t){return t&&"object"==(void 0===t?"undefined":r(t))||!1}function v(t){return 160>=t&&9<=t&&13>=t||32==t||160==t||5760==t||6158==t||8192<=t&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function y(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=X,o[++i]=n);return o}function C(t){for(var e=-1,n=t.length;++e<n&&v(t.charCodeAt(e)););return e}function b(t){for(var e=t.length;e--&&v(t.charCodeAt(e)););return e}function w(t){return Wt[t]}function I(t){function e(t){if(m(t)&&!(Pi(t)||t instanceof Pt)){if(t instanceof v)return t;if(zr.call(t,"__chain__")&&zr.call(t,"__wrapped__"))return yn(t)}return new v(t)}function n(){}function v(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Pt(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=mi,this.__views__=null}function jt(){this.__data__={}}function Wt(t){var e=t?t.length:0;for(this.data={hash:ai(null),set:new $r};e--;)this.push(t[e])}function Rt(t,e){var n=t.data;return("string"==typeof e||er(e)?n.set.has(e):n.hash[e])?0:-1}function zt(t,e){var n=-1,r=t.length;for(e||(e=_r(r));++n<r;)e[n]=t[n];return e}function Dt(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function Xt(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Gt(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function Ht(t,e){for(var n=-1,r=t.length,i=_r(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ut(t){for(var e=-1,n=t.length,r=gi;++e<n;){var i=t[e];i>r&&(r=i)}return r}function Vt(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Jt(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Kt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function qt(t,e){return void 0===t?e:t}function Qt(t,e,n,r){return void 0!==t&&zr.call(r,n)?t:e}function $t(t,e,n){var r=Di(e);if(!n)return ee(e,t,r);for(var i=-1,o=r.length;++i<o;){var a=r[i],s=t[a],c=n(s,e[a],a,t,e);(c===c?c===s:s!==s)&&(void 0!==s||a in t)||(t[a]=c)}return t}function te(t,e){for(var n=-1,r=t.length,i=ln(r),o=e.length,a=_r(o);++n<o;){var s=e[n];i?(s=parseFloat(s),a[n]=cn(s,r)?t[s]:A):a[n]=t[s]}return a}function ee(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}function ne(t,n,i){var o=void 0===t?"undefined":r(t);if("function"==o){if(o=void 0!==n){var o=e.support,a=!(o.funcNames?t.name:o.funcDecomp);if(!a){var s=Wr.call(t);o.funcNames||(a=!wt.test(s)),a||(a=Lt.test(s)||nr(t),xi(t,a))}o=a}t=o?je(t,n,i):t}else t=null==t?br:"object"==o?Ie(t):void 0===n?xe(t+""):Ae(t+"",n);return t}function re(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),void 0!==s)return s;if(!er(t))return t;if(r=Pi(t)){if(s=on(t),!e)return zt(t,s)}else{var c=Xr.call(t),u=c==V;if(c!=K&&c!=G&&(!u||i))return Nt[c]?sn(t,c,e):i?t:{};if(s=an(u?{}:t),!e)return ee(t,s,Di(t))}for(o||(o=[]),a||(a=[]),i=o.length;i--;)if(o[i]==t)return a[i];return o.push(t),a.push(s),(r?Dt:ge)(t,function(r,i){s[i]=re(r,e,n,i,t,o,a)}),s}function ie(t,e,n,r){if("function"!=typeof t)throw new Br(D);return ti(function(){t.apply(A,Le(n,r))},e)}function oe(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,a=rn(),s=a==o,c=s&&200<=e.length?Oi(e):null,u=e.length;c&&(a=Rt,s=!1,e=c);t:for(;++i<n;)if(c=t[i],s&&c===c){for(var l=u;l--;)if(e[l]===c)continue t;r.push(c)}else 0>a(e,c,0)&&r.push(c);return r}function ae(t,e){var n=t?t.length:0;if(!ln(n))return ge(t,e);for(var r=-1,i=vn(t);++r<n&&!1!==e(i[r],r,i););return t}function se(t,e){var n=t?t.length:0;if(!ln(n))return me(t,e);for(var r=vn(t);n--&&!1!==e(r[n],n,r););return t}function ce(t,e){var n=!0;return ae(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ue(t,e){var n=[];return ae(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function le(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function fe(t,e,n,r){r-=1;for(var i=t.length,o=-1,a=[];++r<i;){var s=t[r];if(m(s)&&ln(s.length)&&(Pi(s)||Qn(s))){e&&(s=fe(s,e,n,0));var c=-1,u=s.length;for(a.length+=u;++c<u;)a[++o]=s[c]}else n||(a[++o]=s)}return a}function de(t,e,n){var r=-1,i=vn(t);n=n(t);for(var o=n.length;++r<o;){var a=n[r];if(!1===e(i[a],a,i))break}return t}function he(t,e,n){var r=vn(t);n=n(t);for(var i=n.length;i--;){var o=n[i];if(!1===e(r[o],o,r))break}return t}function pe(t,e){de(t,e,ur)}function ge(t,e){return de(t,e,Di)}function me(t,e){return he(t,e,Di)}function ve(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Wi(t[a])&&(o[++i]=a)}return o}function ye(t,e,n){var r=-1,i="function"==typeof e,o=t?t.length:0,a=ln(o)?_r(o):[];return ae(t,function(t){var o=i?e:null!=t&&t[e];a[++r]=o?o.apply(t,n):A}),a}function Ce(t,e,n,i,o,a){if(t===e)return 0!==t||1/t==1/e;var s=void 0===t?"undefined":r(t),c=void 0===e?"undefined":r(e);if("function"!=s&&"object"!=s&&"function"!=c&&"object"!=c||null==t||null==e)t=t!==t&&e!==e;else t:{var s=Ce,c=Pi(t),u=Pi(e),l=F,f=F;c||(l=Xr.call(t),l==G?l=K:l!=K&&(c=ar(t))),u||(f=Xr.call(e),f==G?f=K:f!=K&&ar(e));var d=l==K,u=f==K,f=l==f;if(!f||c||d)if(l=d&&zr.call(t,"__wrapped__"),u=u&&zr.call(e,"__wrapped__"),l||u)t=s(l?t.value():t,u?e.value():e,n,i,o,a);else if(f){for(o||(o=[]),a||(a=[]),l=o.length;l--;)if(o[l]==t){t=a[l]==e;break t}o.push(t),a.push(e),t=(c?Qe:tn)(t,e,s,n,i,o,a),o.pop(),a.pop()}else t=!1;else t=$e(t,e,l)}return t}function be(t,e,n,r,i){var o=e.length;if(null==t)return!o;for(var a=-1,s=!i;++a<o;)if(s&&r[a]?n[a]!==t[e[a]]:!zr.call(t,e[a]))return!1;for(a=-1;++a<o;){var c=e[a];if(s&&r[a])c=zr.call(t,c);else{var u=t[c],l=n[a],c=i?i(u,l,c):A;void 0===c&&(c=Ce(l,u,i,!0))}if(!c)return!1}return!0}function we(t,e){var n=[];return ae(t,function(t,r,i){n.push(e(t,r,i))}),n}function Ie(t){var e=Di(t),n=e.length;if(1==n){var r=e[0],i=t[r];if(fn(i))return function(t){return null!=t&&t[r]===i&&zr.call(t,r)}}for(var o=_r(n),a=_r(n);n--;)i=t[e[n]],o[n]=i,a[n]=fn(i);return function(t){return be(t,e,o,a)}}function Ae(t,e){return fn(e)?function(n){return null!=n&&n[t]===e}:function(n){return null!=n&&Ce(e,n[t],null,!0)}}function _e(t,e,n,r,i){if(!er(t))return t;var o=ln(e.length)&&(Pi(e)||ar(e));return(o?Dt:ge)(e,function(e,a,s){if(m(e)){r||(r=[]),i||(i=[]);t:{e=r;for(var c=i,u=e.length,l=s[a];u--;)if(e[u]==l){t[a]=c[u],a=void 0;break t}u=t[a],s=n?n(u,l,a,t,s):A;var f=void 0===s;f&&(s=l,ln(l.length)&&(Pi(l)||ar(l))?s=Pi(u)?u:u?zt(u):[]:Ri(l)||Qn(l)?s=Qn(u)?sr(u):Ri(u)?u:{}:f=!1),e.push(l),c.push(s),f?t[a]=_e(s,l,n,e,c):(s===s?s!==u:u===u)&&(t[a]=s),a=void 0}return a}c=t[a],s=n?n(c,e,a,t,s):A,(l=void 0===s)&&(s=e),!o&&void 0===s||!l&&(s===s?s===c:c!==c)||(t[a]=s)}),t}function xe(t){return function(e){return null==e?A:e[t]}}function Oe(t,e){return t+Jr(pi()*(e-t+1))}function Se(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Le(t,e,n){var r=-1,i=t.length;for(e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=void 0===n||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,n=_r(i);++r<i;)n[r]=t[r+e];return n}function Te(t,e){var n;return ae(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ke(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function Me(t,e,n){var r=-1,o=t.length,a=ln(o)?_r(o):[];return ae(t,function(t){for(var n=e.length,i=_r(n);n--;)i[n]=null==t?A:t[e[n]];a[++r]={a:i,b:r,c:t}}),ke(a,function(t,e){var r;t:{r=-1;for(var o=t.a,a=e.a,s=o.length,c=n.length;++r<s;){var u=i(o[r],a[r]);if(u){r=r<c?u*(n[r]?1:-1):u;break t}}r=t.b-e.b}return r})}function Ee(t,e){var n=-1,r=rn(),i=t.length,a=r==o,s=a&&200<=i,c=s?Oi():null,u=[];c?(r=Rt,a=!1):(s=!1,c=e?[]:u);t:for(;++n<i;){var l=t[n],f=e?e(l,n,t):l;if(a&&l===l){for(var d=c.length;d--;)if(c[d]===f)continue t;e&&c.push(f),u.push(l)}else 0>r(c,f,0)&&((e||s)&&c.push(f),u.push(l))}return u}function Be(t,e){for(var n=-1,r=e.length,i=_r(r);++n<r;)i[n]=t[e[n]];return i}function Ne(t,e){var n=t;n instanceof Pt&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var n=[n],o=e[r];qr.apply(n,o.args),n=o.func.apply(o.thisArg,n)}return n}function Ze(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Ci){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)?r=o+1:i=o}return i}return Pe(t,e,br,n)}function Pe(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=void 0===e;i<o;){var c=Jr((i+o)/2),u=n(t[c]),l=u===u;(a?l||r:s?l&&(r||void 0!==u):r?u<=e:u<e)?i=c+1:o=c}return li(o,yi)}function je(t,e,n){if("function"!=typeof t)return br;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function We(t){return Hr.call(t,0)}function Re(t,e,n){for(var r=n.length,i=-1,o=ui(t.length-r,0),a=-1,s=e.length,c=_r(o+s);++a<s;)c[a]=e[a];for(;++i<r;)c[n[i]]=t[i];for(;o--;)c[a++]=t[i++];return c}function ze(t,e,n){for(var r=-1,i=n.length,o=-1,a=ui(t.length-i,0),s=-1,c=e.length,u=_r(a+c);++o<a;)u[o]=t[o];for(a=o;++s<c;)u[a+s]=e[s];for(;++r<i;)u[a+n[r]]=t[o++];return u}function De(t,e){return function(n,r,i){var o=e?e():{};if(r=nn(r,i,3),Pi(n)){i=-1;for(var a=n.length;++i<a;){var s=n[i];t(o,s,r(s,i,n),n)}}else ae(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function Xe(t){return function(){var e=arguments,n=e.length,r=e[0];if(2>n||null==r)return r;var i=e[n-2],o=e[n-1],a=e[3];for(3<n&&"function"==typeof i?(i=je(i,o,5),n-=2):(i=2<n&&"function"==typeof o?o:null,n-=i?1:0),a&&un(e[1],e[2],a)&&(i=3==n?null:i,n=2),o=0;++o<n;)(a=e[o])&&t(r,a,i);return r}}function Ge(t,e){function n(){return(this&&this!==Ft&&this instanceof n?r:t).apply(e,arguments)}var r=He(t);return n}function Fe(t){return function(){var e=arguments.length,n=e,r=t?e-1:0;if(!e)return function(t){return t};for(var i=_r(e);n--;)if(i[n]=arguments[n],"function"!=typeof i[n])throw new Br(D);return function(){for(var n=r,o=i[n].apply(this,arguments);t?n--:++n<e;)o=i[n].call(this,o);return o}}}function Ye(t){return function(e){var n=-1;e=mr(fr(e));for(var r=e.length,i="";++n<r;)i=t(i,e[n],n);return i}}function He(t){return function(){var e=_i(t.prototype),n=t.apply(e,arguments);return er(n)?n:e}}function Ue(t,e){return function(n,r,i){i&&un(n,r,i)&&(r=null);var o=nn(),a=null==r;if(o===ne&&a||(a=!1,r=o(r,i,3)),a){if((r=Pi(n))||!or(n))return t(r?n:mn(n));r=c}return en(n,r,e)}}function Ve(t,e,n,r,i,o,a,s,c,u){function l(){for(var b=arguments.length,w=b,I=_r(b);w--;)I[w]=arguments[w];if(r&&(I=Re(I,r,i)),o&&(I=ze(I,o,a)),p||m){var w=l.placeholder,_=y(I,w),b=b-_.length;if(b<u){var S=s?zt(s):null,b=ui(u-b,0),L=p?_:null,_=p?null:_,T=p?I:null,I=p?null:I;return e|=p?k:M,e&=~(p?M:k),g||(e&=~(x|O)),I=Ve(t,e,n,T,L,I,_,S,c,b),I.placeholder=w,I}}if(w=d?n:this,h&&(t=w[C]),s)for(S=I.length,b=li(s.length,S),L=zt(I);b--;)_=s[b],I[b]=cn(_,S)?L[_]:A;return f&&c<I.length&&(I.length=c),(this&&this!==Ft&&this instanceof l?v||He(t):t).apply(w,I)}var f=e&B,d=e&x,h=e&O,p=e&L,g=e&S,m=e&T,v=!h&&He(t),C=t;return l}function Je(t,e,n){return t=t.length,e=+e,t<e&&si(e)?(e-=t,n=null==n?" ":n+"",pr(n,Ur(e/n.length)).slice(0,e)):""}function Ke(t,e,n,r){function i(){for(var e=-1,s=arguments.length,c=-1,u=r.length,l=_r(s+u);++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++e];return(this&&this!==Ft&&this instanceof i?a:t).apply(o?n:this,l)}var o=e&x,a=He(t);return i}function qe(t,e,n,r,i,o,a,s){var c=e&O;if(!c&&"function"!=typeof t)throw new Br(D);var u=r?r.length:0;if(u||(e&=~(k|M),r=i=null),u-=i?i.length:0,e&M){var l=r,f=i;r=i=null}var d=!c&&Si(t);if(n=[t,e,n,r,i,l,f,o,a,s],d&&!0!==d){r=n[1],e=d[1],s=r|e,o=B|E,i=x|O,a=o|i|S|T;var l=r&B&&!(e&B),f=r&E&&!(e&E),h=(f?n:d)[7],p=(l?n:d)[8];o=s>=o&&s<=a&&(r<E||(f||l)&&h.length<=p),(!(r>=E&&e>i||r>i&&e>=E)||o)&&(e&x&&(n[2]=d[2],s|=r&x?0:S),(r=d[3])&&(i=n[3],n[3]=i?Re(i,r,d[4]):zt(r),n[4]=i?y(n[3],X):zt(d[4])),(r=d[5])&&(i=n[5],n[5]=i?ze(i,r,d[6]):zt(r),n[6]=i?y(n[5],X):zt(d[6])),(r=d[7])&&(n[7]=zt(r)),e&B&&(n[8]=null==n[8]?d[8]:li(n[8],d[8])),null==n[9]&&(n[9]=d[9]),n[0]=d[0],n[1]=s),e=n[1],s=n[9]}return n[9]=null==s?c?0:t.length:ui(s-u,0)||0,(d?xi:Li)(e==x?Ge(n[0],n[2]):e!=k&&e!=(x|k)||n[4].length?Ve.apply(A,n):Ke.apply(A,n),n)}function Qe(t,e,n,r,i,o,a){var s=-1,c=t.length,u=e.length,l=!0;if(c!=u&&(!i||u<=c))return!1;for(;l&&++s<c;){var f=t[s],d=e[s],l=A;if(r&&(l=i?r(d,f,s):r(f,d,s)),void 0===l)if(i)for(var h=u;h--&&(d=e[h],!(l=f&&f===d||n(f,d,r,i,o,a))););else l=f&&f===d||n(f,d,r,i,o,a)}return!!l}function $e(t,e,n){switch(n){case Y:case H:return+t==+e;case U:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case q:case Q:return t==e+""}return!1}function tn(t,e,n,r,i,o,a){var s=Di(t),c=s.length,u=Di(e).length;if(c!=u&&!i)return!1;for(var l,u=-1;++u<c;){var f=s[u],d=zr.call(e,f);if(d){var h=t[f],p=e[f],d=A;r&&(d=i?r(p,h,f):r(h,p,f)),void 0===d&&(d=h&&h===p||n(h,p,r,i,o,a))}if(!d)return!1;l||(l="constructor"==f)}return!(!l&&(n=t.constructor,r=e.constructor,n!=r&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)))}function en(t,e,n){var r=n?mi:gi,i=r,o=i;return ae(t,function(t,a,s){a=e(t,a,s),((n?a<i:a>i)||a===r&&a===o)&&(i=a,o=t)}),o}function nn(t,n,r){var i=e.callback||yr,i=i===yr?ne:i;return r?i(t,n,r):i}function rn(t,n,r){var i=e.indexOf||An,i=i===An?o:i;return t?i(t,n,r):i}function on(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&zr.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function an(t){return t=t.constructor,"function"==typeof t&&t instanceof t||(t=kr),new t}function sn(t,e,n){var r=t.constructor;switch(e){case $:return We(t);case Y:case H:return new r(+t);case tt:case et:case nt:case rt:case it:case ot:case at:case st:case ct:return e=t.buffer,new r(n?We(e):e,t.byteOffset,t.length);case J:case Q:return new r(t);case q:var i=new r(t.source,bt.exec(t));i.lastIndex=t.lastIndex}return i}function cn(t,e){return t=+t,e=null==e?wi:e,-1<t&&0==t%1&&t<e}function un(t,e,n){if(!er(n))return!1;var i=void 0===e?"undefined":r(e);return"number"==i?(i=n.length,i=ln(i)&&cn(e,i)):i="string"==i&&e in n,!!i&&(e=n[e],t===t?t===e:e!==e)}function ln(t){return"number"==typeof t&&-1<t&&0==t%1&&t<=wi}function fn(t){return t===t&&(0===t?0<1/t:!er(t))}function dn(t,e){t=vn(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function hn(t,e){var n={};return pe(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function pn(t){var e;if(!m(t)||Xr.call(t)!=K||!(zr.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))return!1;var n;return pe(t,function(t,e){n=e}),void 0===n||zr.call(t,n)}function gn(t){for(var n=ur(t),r=n.length,i=r&&t.length,o=e.support,o=i&&ln(i)&&(Pi(t)||o.nonEnumArgs&&Qn(t)),a=-1,s=[];++a<r;){var c=n[a];(o&&cn(c,i)||zr.call(t,c))&&s.push(c)}return s}function mn(t){return null==t?[]:ln(t.length)?er(t)?t:kr(t):lr(t)}function vn(t){return er(t)?t:kr(t)}function yn(t){return t instanceof Pt?t.clone():new v(t.__wrapped__,t.__chain__,zt(t.__actions__))}function Cn(t,e,n){return t&&t.length?((n?un(t,e,n):null==e)&&(e=1),Le(t,0>e?0:e)):[]}function bn(t,e,n){var r=t?t.length:0;return r?((n?un(t,e,n):null==e)&&(e=1),e=r-(+e||0),Le(t,0,0>e?0:e)):[]}function wn(t,e,n){var r=-1,i=t?t.length:0;for(e=nn(e,n,3);++r<i;)if(e(t[r],r,t))return r;return-1}function In(t){return t?t[0]:A}function An(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?ui(r+n,0):n;else if(n)return n=Ze(t,e),t=t[n],(e===e?e===t:t!==t)?n:-1;return o(t,e,n||0)}function _n(t){var e=t?t.length:0;return e?t[e-1]:A}function xn(t){return Cn(t,1)}function On(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=un(t,e,r)?null:e,e=!1);var i=nn();if((i!==ne||null!=n)&&(n=i(n,r,3)),e&&rn()==o){e=n;var a;n=-1,r=t.length;for(var i=-1,s=[];++n<r;){var c=t[n],u=e?e(c,n,t):c;n&&a===u||(a=u,s[++i]=c)}t=s}else t=Ee(t,n);return t}function Sn(t){for(var e=-1,n=(t&&t.length&&Ut(Ht(t,Rr)))>>>0,r=_r(n);++e<n;)r[e]=Ht(t,xe(e));return r}function Ln(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Pi(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Tn(t){return t=e(t),t.__chain__=!0,t}function kn(t,e,n){return e.call(n,t)}function Mn(t,e,n){var r=Pi(t)?Xt:ce;return("function"!=typeof e||void 0!==n)&&(e=nn(e,n,3)),r(t,e)}function En(t,e,n){var r=Pi(t)?Gt:ue;return e=nn(e,n,3),r(t,e)}function Bn(t,e,n){return Pi(t)?(e=wn(t,e,n),-1<e?t[e]:A):(e=nn(e,n,3),le(t,e,ae))}function Nn(t,e,n){return"function"==typeof e&&void 0===n&&Pi(t)?Dt(t,e):ae(t,je(e,n,3))}function Zn(t,e,n){if("function"==typeof e&&void 0===n&&Pi(t))for(n=t.length;n--&&!1!==e(t[n],n,t););else t=se(t,je(e,n,3));return t}function Pn(t,e,n){var r=t?t.length:0;return ln(r)||(t=lr(t),r=t.length),!!r&&(n="number"==typeof n?0>n?ui(r+n,0):n||0:0,"string"==typeof t||!Pi(t)&&or(t)?n<r&&-1<t.indexOf(e,n):-1<rn(t,e,n))}function jn(t,e,n){var r=Pi(t)?Ht:we;return e=nn(e,n,3),r(t,e)}function Wn(t,e,n,r){return(Pi(t)?Vt:Se)(t,nn(e,r,4),n,3>arguments.length,ae)}function Rn(t,e,n,r){return(Pi(t)?Jt:Se)(t,nn(e,r,4),n,3>arguments.length,se)}function zn(t,e,n){return(n?un(t,e,n):null==e)?(t=mn(t),e=t.length,0<e?t[Oe(0,e-1)]:A):(t=Dn(t),t.length=li(0>e?0:+e||0,t.length),t)}function Dn(t){t=mn(t);for(var e=-1,n=t.length,r=_r(n);++e<n;){var i=Oe(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function Xn(t,e,n){var r=Pi(t)?Kt:Te;return("function"!=typeof e||void 0!==n)&&(e=nn(e,n,3)),r(t,e)}function Gn(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Br(D);var r=t;t=e,e=r}return function(){return 0<--t?n=e.apply(this,arguments):e=null,n}}function Fn(t,e){var n=x;if(2<arguments.length)var r=Le(arguments,2),i=y(r,Fn.placeholder),n=n|k;return qe(t,n,e,r,i)}function Yn(t,e){var n=x|O;if(2<arguments.length)var r=Le(arguments,2),i=y(r,Yn.placeholder),n=n|k;return qe(e,n,t,r,i)}function Hn(t,e,n){return n&&un(t,e,n)&&(e=null),t=qe(t,L,null,null,null,null,null,e),t.placeholder=Hn.placeholder,t}function Un(t,e,n){return n&&un(t,e,n)&&(e=null),t=qe(t,T,null,null,null,null,null,e),t.placeholder=Un.placeholder,t}function Vn(t,e,n){function r(){var n=e-(Bi()-u);0>=n||n>e?(s&&Vr(s),n=d,s=f=d=A,n&&(h=Bi(),c=t.apply(l,a),f||s||(a=l=null))):f=ti(r,n)}function i(){f&&Vr(f),s=f=d=A,(g||p!==e)&&(h=Bi(),c=t.apply(l,a),f||s||(a=l=null))}function o(){if(a=arguments,u=Bi(),l=this,d=g&&(f||!m),!1===p)var n=m&&!f;else{s||m||(h=u);var o=p-(u-h),v=0>=o||o>p;v?(s&&(s=Vr(s)),h=u,c=t.apply(l,a)):s||(s=ti(i,o))}return v&&f?f=Vr(f):f||e===p||(f=ti(r,e)),n&&(v=!0,c=t.apply(l,a)),!v||f||s||(a=l=null),c}var a,s,c,u,l,f,d,h=0,p=!1,g=!0;if("function"!=typeof t)throw new Br(D);if(e=0>e?0:+e||0,!0===n)var m=!0,g=!1;else er(n)&&(m=n.leading,p="maxWait"in n&&ui(+n.maxWait||0,e),g="trailing"in n?n.trailing:g);return o.cancel=function(){f&&Vr(f),s&&Vr(s),s=f=d=A},o}function Jn(t,e){function n(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];return i.has(o)?i.get(o):(r=t.apply(this,r),i.set(o,r),r)}if("function"!=typeof t||e&&"function"!=typeof e)throw new Br(D);return n.cache=new Jn.Cache,n}function Kn(t){var e=Le(arguments,1),n=y(e,Kn.placeholder);return qe(t,k,null,e,n)}function qn(t){var e=Le(arguments,1),n=y(e,qn.placeholder);return qe(t,M,null,e,n)}function Qn(t){return ln(m(t)?t.length:A)&&Xr.call(t)==G||!1}function $n(t){return t&&1===t.nodeType&&m(t)&&-1<Xr.call(t).indexOf("Element")||!1}function tr(t){return m(t)&&"string"==typeof t.message&&Xr.call(t)==U||!1}function er(t){var e=void 0===t?"undefined":r(t);return"function"==e||t&&"object"==e||!1}function nr(t){return null!=t&&(Xr.call(t)==V?Fr.test(Wr.call(t)):m(t)&&At.test(t)||!1)}function rr(t){return"number"==typeof t||m(t)&&Xr.call(t)==J||!1}function ir(t){return m(t)&&Xr.call(t)==q||!1}function or(t){return"string"==typeof t||m(t)&&Xr.call(t)==Q||!1}function ar(t){return m(t)&&ln(t.length)&&Bt[Xr.call(t)]||!1}function sr(t){return ee(t,ur(t))}function cr(t){return ve(t,ur(t))}function ur(t){if(null==t)return[];er(t)||(t=kr(t));for(var e=t.length,e=e&&ln(e)&&(Pi(t)||Ai.nonEnumArgs&&Qn(t))&&e||0,n=t.constructor,r=-1,n="function"==typeof n&&n.prototype===t,i=_r(e),o=0<e;++r<e;)i[r]=r+"";for(var a in t)o&&cn(a,e)||"constructor"==a&&(n||!zr.call(t,a))||i.push(a);return i}function lr(t){return Be(t,Di(t))}function fr(t){return(t=s(t))&&t.replace(_t,d)}function dr(t){return(t=s(t))&&St.test(t)?t.replace(Ot,"\\$&"):t}function hr(t,e,n){return n&&un(t,e,n)&&(e=0),hi(t,e)}function pr(t,e){var n="";if(t=s(t),1>(e=+e)||!t||!si(e))return n;do{e%2&&(n+=t),e=Jr(e/2),t+=t}while(e);return n}function gr(t,e,n){var r=t;return(t=s(t))?(n?un(r,e,n):null==e)?t.slice(C(t),b(t)+1):(e+="",t.slice(u(t,e),l(t,e)+1)):t}function mr(t,e,n){return n&&un(t,e,n)&&(e=null),t=s(t),t.match(e||kt)||[]}function vr(){for(var t=arguments[0],e=arguments.length,n=_r(e?e-1:0);0<--e;)n[e-1]=arguments[e];try{return t.apply(A,n)}catch(t){return tr(t)?t:new Or(t)}}function yr(t,e,n){return n&&un(t,e,n)&&(e=null),m(t)?wr(t):ne(t,e)}function Cr(t){return function(){return t}}function br(t){return t}function wr(t){return Ie(re(t,!0))}function Ir(t,e,n){if(null==n){var r=er(e),i=r&&Di(e);((i=i&&i.length&&ve(e,i))?i.length:r)||(i=!1,n=e,e=t,t=this)}i||(i=ve(e,Di(e)));var o=!0,r=-1,a=Wi(t),s=i.length;!1===n?o=!1:er(n)&&"chain"in n&&(o=n.chain);for(;++r<s;){n=i[r];var c=e[n];t[n]=c,a&&(t.prototype[n]=function(e){return function(){var n=this.__chain__;if(o||n){var r=t(this.__wrapped__);return(r.__actions__=zt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return n=[this.value()],qr.apply(n,arguments),e.apply(t,n)}}(c))}return t}function Ar(){}t=t?Yt.defaults(Ft.Object(),t,Yt.pick(Ft,Et)):Ft;var _r=t.Array,xr=t.Date,Or=t.Error,Sr=t.Function,Lr=t.Math,Tr=t.Number,kr=t.Object,Mr=t.RegExp,Er=t.String,Br=t.TypeError,Nr=_r.prototype,Zr=kr.prototype,Pr=Er.prototype,jr=(jr=t.window)&&jr.document,Wr=Sr.prototype.toString,Rr=xe("length"),zr=Zr.hasOwnProperty,Dr=0,Xr=Zr.toString,Gr=t._,Fr=Mr("^"+dr(Xr).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yr=nr(Yr=t.ArrayBuffer)&&Yr,Hr=nr(Hr=Yr&&new Yr(0).slice)&&Hr,Ur=Lr.ceil,Vr=t.clearTimeout,Jr=Lr.floor,Kr=nr(Kr=kr.getPrototypeOf)&&Kr,qr=Nr.push,Qr=Zr.propertyIsEnumerable,$r=nr($r=t.Set)&&$r,ti=t.setTimeout,ei=Nr.splice,ni=nr(ni=t.Uint8Array)&&ni,ri=nr(ri=t.WeakMap)&&ri,ii=function(){try{var e=nr(e=t.Float64Array)&&e,n=new e(new Yr(10),0,1)&&e}catch(t){}return n}(),oi=nr(oi=_r.isArray)&&oi,ai=nr(ai=kr.create)&&ai,si=t.isFinite,ci=nr(ci=kr.keys)&&ci,ui=Lr.max,li=Lr.min,fi=nr(fi=xr.now)&&fi,di=nr(di=Tr.isFinite)&&di,hi=t.parseInt,pi=Lr.random,gi=Tr.NEGATIVE_INFINITY,mi=Tr.POSITIVE_INFINITY,vi=Lr.pow(2,32)-1,yi=vi-1,Ci=vi>>>1,bi=ii?ii.BYTES_PER_ELEMENT:0,wi=Lr.pow(2,53)-1,Ii=ri&&new ri,Ai=e.support={};!function(e){Ai.funcDecomp=!nr(t.WinRTError)&&Lt.test(I),Ai.funcNames="string"==typeof Sr.name;try{Ai.dom=11===jr.createDocumentFragment().nodeType}catch(t){Ai.dom=!1}try{Ai.nonEnumArgs=!Qr.call(arguments,1)}catch(t){Ai.nonEnumArgs=!0}}(0,0),e.templateSettings={escape:mt,evaluate:vt,interpolate:yt,variable:"",imports:{_:e}};var _i=function(){function e(){}return function(n){if(er(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}(),xi=Ii?function(t,e){return Ii.set(t,e),t}:br;Hr||(We=Yr&&ni?function(t){var e=t.byteLength,n=ii?Jr(e/bi):0,r=n*bi,i=new Yr(e);if(n){var o=new ii(i,0,n);o.set(new ii(t,0,n))}return e!=r&&(o=new ni(i,r),o.set(new ni(t,r))),i}:Cr(null));var Oi=ai&&$r?function(t){return new Wt(t)}:Cr(null),Si=Ii?function(t){return Ii.get(t)}:Ar,Li=function(){var t=0,e=0;return function(n,r){var i=Bi(),o=j-(i-e);if(e=i,0<o){if(++t>=P)return n}else t=0;return xi(n,r)}}(),Ti=De(function(t,e,n){zr.call(t,n)?++t[n]:t[n]=1}),ki=De(function(t,e,n){zr.call(t,n)?t[n].push(e):t[n]=[e]}),Mi=De(function(t,e,n){t[n]=e}),Ei=De(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Bi=fi||function(){return(new xr).getTime()},Ni=Fe(),Zi=Fe(!0),Pi=oi||function(t){return m(t)&&ln(t.length)&&Xr.call(t)==F||!1};Ai.dom||($n=function(t){return t&&1===t.nodeType&&m(t)&&!Ri(t)||!1});var ji=di||function(t){return"number"==typeof t&&si(t)},Wi=a(/x/)||ni&&!a(ni)?function(t){return Xr.call(t)==V}:a,Ri=Kr?function(t){if(!t||Xr.call(t)!=K)return!1;var e=t.valueOf,n=nr(e)&&(n=Kr(e))&&Kr(n);return n?t==n||Kr(t)==n:pn(t)}:pn,zi=Xe($t),Di=ci?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&n&&ln(n)?gn(t):er(t)?ci(t):[]}:gn,Xi=Xe(_e),Gi=Ye(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Fi=Ye(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});8!=hi(Mt+"08")&&(hr=function(t,e,n){return(n?un(t,e,n):null==e)?e=0:e&&(e=+e),t=gr(t),hi(t,e||(It.test(t)?16:10))});var Yi=Ye(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Hi=Ye(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ui=Ue(Ut),Vi=Ue(function(t){for(var e=-1,n=t.length,r=mi;++e<n;){var i=t[e];i<r&&(r=i)}return r},!0);return e.prototype=n.prototype,v.prototype=_i(n.prototype),v.prototype.constructor=v,Pt.prototype=_i(n.prototype),Pt.prototype.constructor=Pt,jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){return"__proto__"==t?A:this.__data__[t]},jt.prototype.has=function(t){return"__proto__"!=t&&zr.call(this.__data__,t)},jt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},Wt.prototype.push=function(t){var e=this.data;"string"==typeof t||er(t)?e.set.add(t):e.hash[t]=!0},Jn.Cache=jt,e.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Br(D);var n=t;t=e,e=n}return t=si(t=+t)?t:0,function(){return 1>--t?e.apply(this,arguments):void 0}},e.ary=function(t,e,n){return n&&un(t,e,n)&&(e=null),e=t&&null==e?t.length:ui(+e||0,0),qe(t,B,null,null,null,null,e)},e.assign=zi,e.at=function(t){return ln(t?t.length:0)&&(t=mn(t)),te(t,fe(arguments,!1,!1,1))},e.before=Gn,e.bind=Fn,e.bindAll=function(t){for(var e=t,n=1<arguments.length?fe(arguments,!1,!1,1):cr(t),r=-1,i=n.length;++r<i;){var o=n[r];e[o]=qe(e[o],x,e)}return e},e.bindKey=Yn,e.callback=yr,e.chain=Tn,e.chunk=function(t,e,n){e=(n?un(t,e,n):null==e)?1:ui(+e||1,1),n=0;for(var r=t?t.length:0,i=-1,o=_r(Ur(r/e));n<r;)o[++i]=Le(t,n,n+=e);return o},e.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},e.constant=Cr,e.countBy=Ti,e.create=function(t,e,n){var r=_i(t);return n&&un(t,e,n)&&(e=null),e?ee(e,r,Di(e)):r},e.curry=Hn,e.curryRight=Un,e.debounce=Vn,e.defaults=function(t){if(null==t)return t;var e=zt(arguments);return e.push(qt),zi.apply(A,e)},e.defer=function(t){return ie(t,1,arguments,1)},e.delay=function(t,e){return ie(t,e,arguments,2)},e.difference=function(){for(var t=arguments,e=-1,n=t.length;++e<n;){var r=t[e];if(Pi(r)||Qn(r))break}return oe(r,fe(t,!1,!0,++e))},e.drop=Cn,e.dropRight=bn,e.dropRightWhile=function(t,e,n){var r=t?t.length:0;if(!r)return[];for(e=nn(e,n,3);r--&&e(t[r],r,t););return Le(t,0,r+1)},e.dropWhile=function(t,e,n){var r=t?t.length:0;if(!r)return[];var i=-1;for(e=nn(e,n,3);++i<r&&e(t[i],i,t););return Le(t,i)},e.fill=function(t,e,n,r){var i=t?t.length:0;if(!i)return[];for(n&&"number"!=typeof n&&un(t,e,n)&&(n=0,r=i),i=t.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=void 0===r||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t},e.filter=En,e.flatten=function(t,e,n){var r=t?t.length:0;return n&&un(t,e,n)&&(e=!1),r?fe(t,e,!1,0):[]},e.flattenDeep=function(t){return t&&t.length?fe(t,!0,!1,0):[]},e.flow=Ni,e.flowRight=Zi,e.forEach=Nn,e.forEachRight=Zn,e.forIn=function(t,e,n){return("function"!=typeof e||void 0!==n)&&(e=je(e,n,3)),de(t,e,ur)},e.forInRight=function(t,e,n){return e=je(e,n,3),he(t,e,ur)},e.forOwn=function(t,e,n){return("function"!=typeof e||void 0!==n)&&(e=je(e,n,3)),ge(t,e)},e.forOwnRight=function(t,e,n){return e=je(e,n,3),he(t,e,Di)},e.functions=cr,e.groupBy=ki,e.indexBy=Mi,e.initial=function(t){return bn(t,1)},e.intersection=function(){for(var t=[],e=-1,n=arguments.length,r=[],i=rn(),a=i==o;++e<n;){var s=arguments[e];(Pi(s)||Qn(s))&&(t.push(s),r.push(a&&120<=s.length?Oi(e&&s):null))}var n=t.length,a=t[0],c=-1,u=a?a.length:0,l=[],f=r[0];t:for(;++c<u;)if(s=a[c],0>(f?Rt(f,s):i(l,s,0))){for(e=n;--e;){var d=r[e];if(0>(d?Rt(d,s):i(t[e],s,0)))continue t}f&&f.push(s),l.push(s)}return l},e.invert=function(t,e,n){n&&un(t,e,n)&&(e=null),n=-1;for(var r=Di(t),i=r.length,o={};++n<i;){var a=r[n],s=t[a];e?zr.call(o,s)?o[s].push(a):o[s]=[a]:o[s]=a}return o},e.invoke=function(t,e){return ye(t,e,Le(arguments,2))},e.keys=Di,e.keysIn=ur,e.map=jn,e.mapValues=function(t,e,n){var r={};return e=nn(e,n,3),ge(t,function(t,n,i){r[n]=e(t,n,i)}),r},e.matches=wr,e.matchesProperty=function(t,e){return Ae(t+"",re(e,!0))},e.memoize=Jn,e.merge=Xi,e.mixin=Ir,e.negate=function(t){if("function"!=typeof t)throw new Br(D)
;return function(){return!t.apply(this,arguments)}},e.omit=function(t,e,n){if(null==t)return{};if("function"!=typeof e){var r=Ht(fe(arguments,!1,!1,1),Er);return dn(t,oe(ur(t),r))}return e=je(e,n,3),hn(t,function(t,n,r){return!e(t,n,r)})},e.once=function(t){return Gn(t,2)},e.pairs=function(t){for(var e=-1,n=Di(t),r=n.length,i=_r(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i},e.partial=Kn,e.partialRight=qn,e.partition=Ei,e.pick=function(t,e,n){return null==t?{}:"function"==typeof e?hn(t,je(e,n,3)):dn(t,fe(arguments,!1,!1,1))},e.pluck=function(t,e){return jn(t,xe(e))},e.property=function(t){return xe(t+"")},e.propertyOf=function(t){return function(e){return null==t?A:t[e]}},e.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=rn(),i=t.length;++n<i;)for(var o=0,a=t[n];-1<(o=r(e,a,o));)ei.call(e,o,1);return e},e.pullAt=function(t){var e=t||[],n=fe(arguments,!1,!1,1),r=n.length,o=te(e,n);for(n.sort(i);r--;){var a=parseFloat(n[r]);if(a!=s&&cn(a)){var s=a;ei.call(e,a,1)}}return o},e.range=function(t,e,n){n&&un(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;var r=-1;e=ui(Ur((e-t)/(n||1)),0);for(var i=_r(e);++r<e;)i[r]=t,t+=n;return i},e.rearg=function(t){var e=fe(arguments,!1,!1,1);return qe(t,E,null,null,null,e)},e.reject=function(t,e,n){var r=Pi(t)?Gt:ue;return e=nn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})},e.remove=function(t,e,n){var r=-1,i=t?t.length:0,o=[];for(e=nn(e,n,3);++r<i;)n=t[r],e(n,r,t)&&(o.push(n),ei.call(t,r--,1),i--);return o},e.rest=xn,e.shuffle=Dn,e.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&un(t,e,n)&&(e=0,n=r),Le(t,e,n)):[]},e.sortBy=function(t,e,n){if(null==t)return[];var r=-1,i=t.length,o=ln(i)?_r(i):[];return n&&un(t,e,n)&&(e=null),e=nn(e,n,3),ae(t,function(t,n,i){o[++r]={a:e(t,n,i),b:r,c:t}}),ke(o,f)},e.sortByAll=function(t){if(null==t)return[];var e=arguments,n=e[3];return n&&un(e[1],e[2],n)&&(e=[t,e[1]]),Me(t,fe(e,!1,!1,1),[])},e.sortByOrder=function(t,e,n,r){return null==t?[]:(r&&un(e,n,r)&&(n=null),Pi(e)||(e=null==e?[]:[e]),Pi(n)||(n=null==n?[]:[n]),Me(t,e,n))},e.spread=function(t){if("function"!=typeof t)throw new Br(D);return function(e){return t.apply(this,e)}},e.take=function(t,e,n){return t&&t.length?((n?un(t,e,n):null==e)&&(e=1),Le(t,0,0>e?0:e)):[]},e.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?un(t,e,n):null==e)&&(e=1),e=r-(+e||0),Le(t,0>e?0:e)):[]},e.takeRightWhile=function(t,e,n){var r=t?t.length:0;if(!r)return[];for(e=nn(e,n,3);r--&&e(t[r],r,t););return Le(t,r+1)},e.takeWhile=function(t,e,n){var r=t?t.length:0;if(!r)return[];var i=-1;for(e=nn(e,n,3);++i<r&&e(t[i],i,t););return Le(t,0,i)},e.tap=function(t,e,n){return e.call(n,t),t},e.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Br(D);return!1===n?r=!1:er(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Zt.leading=r,Zt.maxWait=+e,Zt.trailing=i,Vn(t,e,Zt)},e.thru=kn,e.times=function(t,e,n){if(1>(t=+t)||!si(t))return[];var r=-1,i=_r(li(t,vi));for(e=je(e,n,1);++r<t;)r<vi?i[r]=e(r):e(r);return i},e.toArray=function(t){var e=t?t.length:0;return ln(e)?e?zt(t):[]:lr(t)},e.toPlainObject=sr,e.transform=function(t,e,n,r){var i=Pi(t)||ar(t);return e=nn(e,r,4),null==n&&(i||er(t)?(r=t.constructor,n=i?Pi(t)?new r:[]:_i(Wi(r)&&r.prototype)):n={}),(i?Dt:ge)(t,function(t,r,i){return e(n,t,r,i)}),n},e.union=function(){return Ee(fe(arguments,!1,!0,0))},e.uniq=On,e.unzip=Sn,e.values=lr,e.valuesIn=function(t){return Be(t,ur(t))},e.where=function(t,e){return En(t,Ie(e))},e.without=function(t){return oe(t,Le(arguments,1))},e.wrap=function(t,e){return e=null==e?br:e,qe(e,k,null,[t],[])},e.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Pi(n)||Qn(n))var r=r?oe(r,n).concat(oe(n,r)):n}return r?Ee(r):[]},e.zip=function(){for(var t=arguments.length,e=_r(t);t--;)e[t]=arguments[t];return Sn(e)},e.zipObject=Ln,e.backflow=Zi,e.collect=jn,e.compose=Zi,e.each=Nn,e.eachRight=Zn,e.extend=zi,e.iteratee=yr,e.methods=cr,e.object=Ln,e.select=En,e.tail=xn,e.unique=On,Ir(e,e),e.add=function(t,e){return t+e},e.attempt=vr,e.camelCase=Gi,e.capitalize=function(t){return(t=s(t))&&t.charAt(0).toUpperCase()+t.slice(1)},e.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&un(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&je(n,r,1),re(t,e,n)},e.cloneDeep=function(t,e,n){return e="function"==typeof e&&je(e,n,1),re(t,!0,e)},e.deburr=fr,e.endsWith=function(t,e,n){t=s(t),e+="";var r=t.length;return n=void 0===n?r:li(0>n?0:+n||0,r),0<=(n-=e.length)&&t.indexOf(e,n)==n},e.escape=function(t){return(t=s(t))&&gt.test(t)?t.replace(ht,h):t},e.escapeRegExp=dr,e.every=Mn,e.find=Bn,e.findIndex=wn,e.findKey=function(t,e,n){return e=nn(e,n,3),le(t,e,ge,!0)},e.findLast=function(t,e,n){return e=nn(e,n,3),le(t,e,se)},e.findLastIndex=function(t,e,n){var r=t?t.length:0;for(e=nn(e,n,3);r--;)if(e(t[r],r,t))return r;return-1},e.findLastKey=function(t,e,n){return e=nn(e,n,3),le(t,e,me,!0)},e.findWhere=function(t,e){return Bn(t,Ie(e))},e.first=In,e.has=function(t,e){return!!t&&zr.call(t,e)},e.identity=br,e.includes=Pn,e.indexOf=An,e.inRange=function(t,e,n){return e=+e||0,void 0===n?(n=e,e=0):n=+n||0,t>=e&&t<n},e.isArguments=Qn,e.isArray=Pi,e.isBoolean=function(t){return!0===t||!1===t||m(t)&&Xr.call(t)==Y||!1},e.isDate=function(t){return m(t)&&Xr.call(t)==H||!1},e.isElement=$n,e.isEmpty=function(t){if(null==t)return!0;var e=t.length;return ln(e)&&(Pi(t)||or(t)||Qn(t)||m(t)&&Wi(t.splice))?!e:!Di(t).length},e.isEqual=function(t,e,n,r){return n="function"==typeof n&&je(n,r,3),!n&&fn(t)&&fn(e)?t===e:(r=n?n(t,e):A,void 0===r?Ce(t,e,n):!!r)},e.isError=tr,e.isFinite=ji,e.isFunction=Wi,e.isMatch=function(t,e,n,r){var i=Di(e),o=i.length;if(!(n="function"==typeof n&&je(n,r,3))&&1==o){var a=i[0];if(r=e[a],fn(r))return null!=t&&r===t[a]&&zr.call(t,a)}for(var a=_r(o),s=_r(o);o--;)r=a[o]=e[i[o]],s[o]=fn(r);return be(t,i,a,s,n)},e.isNaN=function(t){return rr(t)&&t!=+t},e.isNative=nr,e.isNull=function(t){return null===t},e.isNumber=rr,e.isObject=er,e.isPlainObject=Ri,e.isRegExp=ir,e.isString=or,e.isTypedArray=ar,e.isUndefined=function(t){return void 0===t},e.kebabCase=Fi,e.last=_n,e.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?ui(r+n,0):li(n||0,r-1))+1;else if(n)return i=Ze(t,e,!0)-1,t=t[i],(e===e?e===t:t!==t)?i:-1;if(e!==e)return g(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},e.max=Ui,e.min=Vi,e.noConflict=function(){return t._=Gr,this},e.noop=Ar,e.now=Bi,e.pad=function(t,e,n){t=s(t),e=+e;var r=t.length;return r<e&&si(e)?(r=(e-r)/2,e=Jr(r),r=Ur(r),n=Je("",r,n),n.slice(0,e)+t+n):t},e.padLeft=function(t,e,n){return(t=s(t))&&Je(t,e,n)+t},e.padRight=function(t,e,n){return(t=s(t))&&t+Je(t,e,n)},e.parseInt=hr,e.random=function(t,e,n){n&&un(t,e,n)&&(e=n=null);var r=null==t,i=null==e;return null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1?(n=pi(),li(t+n*(e-t+parseFloat("1e-"+((n+"").length-1))),e)):Oe(t,e)},e.reduce=Wn,e.reduceRight=Rn,e.repeat=pr,e.result=function(t,e,n){return e=null==t?A:t[e],void 0===e&&(e=n),Wi(e)?e.call(t):e},e.runInContext=I,e.size=function(t){var e=t?t.length:0;return ln(e)?e:Di(t).length},e.snakeCase=Yi,e.some=Xn,e.sortedIndex=function(t,e,n,r){var i=nn(n);return i===ne&&null==n?Ze(t,e):Pe(t,e,i(n,r,1))},e.sortedLastIndex=function(t,e,n,r){var i=nn(n);return i===ne&&null==n?Ze(t,e,!0):Pe(t,e,i(n,r,1),!0)},e.startCase=Hi,e.startsWith=function(t,e,n){return t=s(t),n=null==n?0:li(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n},e.sum=function(t){Pi(t)||(t=mn(t));for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n},e.template=function(t,n,r){var i=e.templateSettings;r&&un(t,n,r)&&(n=r=null),t=s(t),n=$t($t({},r||n),i,Qt),r=$t($t({},n.imports),i.imports,Qt);var o,a,c=Di(r),u=Be(r,c),l=0;r=n.interpolate||xt;var f="__p+='";r=Mr((n.escape||xt).source+"|"+r.source+"|"+(r===yt?Ct:xt).source+"|"+(n.evaluate||xt).source+"|$","g");var d="sourceURL"in n?"//# sourceURL="+n.sourceURL+"\n":"";if(t.replace(r,function(e,n,r,i,s,c){return r||(r=i),f+=t.slice(l,c).replace(Tt,p),n&&(o=!0,f+="'+__e("+n+")+'"),s&&(a=!0,f+="';"+s+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),l=c+e.length,e}),f+="';",(n=n.variable)||(f="with(obj){"+f+"}"),f=(a?f.replace(ut,""):f).replace(lt,"$1").replace(ft,"$1;"),f="function("+(n||"obj")+"){"+(n?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}",n=vr(function(){return Sr(c,d+"return "+f).apply(A,u)}),n.source=f,tr(n))throw n;return n},e.trim=gr,e.trimLeft=function(t,e,n){var r=t;return(t=s(t))?t.slice((n?un(r,e,n):null==e)?C(t):u(t,e+"")):t},e.trimRight=function(t,e,n){var r=t;return(t=s(t))?(n?un(r,e,n):null==e)?t.slice(0,b(t)+1):t.slice(0,l(t,e+"")+1):t},e.trunc=function(t,e,n){n&&un(t,e,n)&&(e=null);var r=N;if(n=Z,null!=e)if(er(e)){var i="separator"in e?e.separator:i,r="length"in e?+e.length||0:r;n="omission"in e?s(e.omission):n}else r=+e||0;if(t=s(t),r>=t.length)return t;if(1>(r-=n.length))return n;if(e=t.slice(0,r),null==i)return e+n;if(ir(i)){if(t.slice(r).search(i)){var o,a=t.slice(0,r);for(i.global||(i=Mr(i.source,(bt.exec(i)||"")+"g")),i.lastIndex=0;t=i.exec(a);)o=t.index;e=e.slice(0,null==o?r:o)}}else t.indexOf(i,r)!=r&&-1<(i=e.lastIndexOf(i))&&(e=e.slice(0,i));return e+n},e.unescape=function(t){return(t=s(t))&&pt.test(t)?t.replace(dt,w):t},e.uniqueId=function(t){var e=++Dr;return s(t)+e},e.words=mr,e.all=Mn,e.any=Xn,e.contains=Pn,e.detect=Bn,e.foldl=Wn,e.foldr=Rn,e.head=In,e.include=Pn,e.inject=Wn,Ir(e,function(){var t={};return ge(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=zn,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return zn(e,t)}):zn(this.value())},e.VERSION=_,Dt("bind bindKey curry curryRight partial partialRight".split(" "),function(t){e[t].placeholder=e}),Dt(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=z,r=e==W;Pt.prototype[t]=function(t,i){var o=this.__filtered__,a=o&&r?new Pt(this):this.clone();return(a.__iteratees__||(a.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:nn(t,i,1),limit:-1,type:e}),a.__filtered__=o||n,a}}),Dt(["drop","take"],function(t,e){var n=t+"While";Pt.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();return n=null==n?1:ui(Jr(n)||0,0),r?e?i.__takeCount__=li(i.__takeCount__,n):_n(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:t+(0>i.__dir__?"Right":"")}),i},Pt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},Pt.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),Dt(["first","last"],function(t,e){var n="take"+(e?"Right":"");Pt.prototype[t]=function(){return this[n](1).value()[0]}}),Dt(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Pt.prototype[t]=function(){return this[n](1)}}),Dt(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Ie:xe;Pt.prototype[t]=function(t){return this[n](r(t))}}),Pt.prototype.compact=function(){return this.filter(br)},Pt.prototype.reject=function(t,e){return t=nn(t,e,1),this.filter(function(e){return!t(e)})},Pt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=0>t?this.takeRight(-t):this.drop(t);return void 0!==e&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},Pt.prototype.toArray=function(){return this.drop(0)},ge(Pt.prototype,function(t,n){var r=e[n],i=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n);e.prototype[n]=function(){function n(t){return t=[t],qr.apply(t,a),r.apply(e,t)}var a=arguments,s=this.__chain__,c=this.__wrapped__,u=!!this.__actions__.length,l=c instanceof Pt,f=a[0],d=l||Pi(c);return d&&i&&"function"==typeof f&&1!=f.length&&(l=d=!1),l=l&&!u,o&&!s?l?t.call(c):r.call(e,this.value()):d?(c=t.apply(l?c:new Pt(this),a),o||!u&&!c.__actions__||(c.__actions__||(c.__actions__=[])).push({func:kn,args:[n],thisArg:e}),new v(c,s)):this.thru(n)}}),Dt("concat join pop push replace shift sort splice split unshift".split(" "),function(t){var n=(/^(?:replace|split)$/.test(t)?Pr:Nr)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Pt.prototype.clone=function(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new Pt(this.__wrapped__);return r.__actions__=t?zt(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?zt(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?zt(n):null,r},Pt.prototype.reverse=function(){if(this.__filtered__){var t=new Pt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Pt.prototype.value=function(){var t=this.__wrapped__.value();if(!Pi(t))return Ne(t,this.__actions__);var e,n=this.__dir__,r=0>n;e=t.length;for(var i=this.__views__,o=0,a=-1,s=i?i.length:0;++a<s;){var c=i[a],u=c.size;switch(c.type){case"drop":o+=u;break;case"dropRight":e-=u;break;case"take":e=li(e,o+u);break;case"takeRight":o=ui(o,e-u)}}e={start:o,end:e},i=e.start,o=e.end,e=o-i,i=r?o:i-1,o=li(e,this.__takeCount__),s=(a=this.__iteratees__)?a.length:0,c=0,u=[];t:for(;e--&&c<o;){for(var i=i+n,l=-1,f=t[i];++l<s;){var d=a[l],h=d.iteratee,p=d.type;if(p==W){if(d.done&&(r?i>d.index:i<d.index)&&(d.count=0,d.done=!1),d.index=i,!(d.done||(p=d.limit,d.done=-1<p?d.count++>=p:!h(f))))continue t}else if(d=h(f),p==z)f=d;else if(!d){if(p==R)continue t;break t}}u[c++]=f}return u},e.prototype.chain=function(){return Tn(this)},e.prototype.commit=function(){return new v(this.value(),this.__chain__)},e.prototype.plant=function(t){for(var e,r=this;r instanceof n;){var i=yn(r);e?o.__wrapped__=i:e=i;var o=i,r=r.__wrapped__}return o.__wrapped__=t,e},e.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Pt?(this.__actions__.length&&(t=new Pt(this)),new v(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})},e.prototype.toString=function(){return this.value()+""},e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=function(){return Ne(this.__wrapped__,this.__actions__)},e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,_="3.5.0",x=1,O=2,S=4,L=8,T=16,k=32,M=64,E=128,B=256,N=30,Z="...",P=150,j=16,W=0,R=1,z=2,D="Expected a function",X="__lodash_placeholder__",G="[object Arguments]",F="[object Array]",Y="[object Boolean]",H="[object Date]",U="[object Error]",V="[object Function]",J="[object Number]",K="[object Object]",q="[object RegExp]",Q="[object String]",$="[object ArrayBuffer]",tt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",rt="[object Int16Array]",it="[object Int32Array]",ot="[object Uint8Array]",at="[object Uint8ClampedArray]",st="[object Uint16Array]",ct="[object Uint32Array]",ut=/\b__p\+='';/g,lt=/\b(__p\+=)''\+/g,ft=/(__e\(.*?\)|\b__t\))\+'';/g,dt=/&(?:amp|lt|gt|quot|#39|#96);/g,ht=/[&<>"'`]/g,pt=RegExp(dt.source),gt=RegExp(ht.source),mt=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,wt=/^\s*function[ \n\r\t]+\w/,It=/^0[xX]/,At=/^\[object .+?Constructor\]$/,_t=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xt=/($^)/,Ot=/[.*+?^${}()|[\]\/\\]/g,St=RegExp(Ot.source),Lt=/\bthis\b/,Tt=/['\n\r\u2028\u2029\\]/g,kt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Mt=" \t\v\f\ufeff\n\r\u2028\u2029",Et="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Bt={};Bt[tt]=Bt[et]=Bt[nt]=Bt[rt]=Bt[it]=Bt[ot]=Bt[at]=Bt[st]=Bt[ct]=!0,Bt[G]=Bt[F]=Bt[$]=Bt[Y]=Bt[H]=Bt[U]=Bt[V]=Bt["[object Map]"]=Bt[J]=Bt[K]=Bt[q]=Bt["[object Set]"]=Bt[Q]=Bt["[object WeakMap]"]=!1;var Nt={};Nt[G]=Nt[F]=Nt[$]=Nt[Y]=Nt[H]=Nt[tt]=Nt[et]=Nt[nt]=Nt[rt]=Nt[it]=Nt[J]=Nt[K]=Nt[q]=Nt[Q]=Nt[ot]=Nt[at]=Nt[st]=Nt[ct]=!0,Nt[U]=Nt[V]=Nt["[object Map]"]=Nt["[object Set]"]=Nt["[object WeakMap]"]=!1;var Zt={leading:!1,maxWait:0,trailing:!1},Pt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Wt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Rt={function:!0,object:!0},zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dt=Rt[void 0===n?"undefined":r(n)]&&n&&!n.nodeType&&n,Xt=Rt[void 0===e?"undefined":r(e)]&&e&&!e.nodeType&&e,Rt=Rt["undefined"==typeof window?"undefined":r(window)]&&window,Gt=Xt&&Xt.exports===Dt&&Dt,Ft=Dt&&Xt&&"object"==(void 0===t?"undefined":r(t))&&t||Rt!==(this&&this.window)&&Rt||this,Yt=I();"function"==typeof define&&"object"==r(define.amd)&&define.amd?(Ft._=Yt,define(function(){return Yt})):Dt&&Xt?Gt?(Xt.exports=Yt)._=Yt:Dt._=Yt:Ft._=Yt}).call(void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,n){"use strict";var r,i,o,a=t("svg.js"),s=t("../../../common/config");e.exports={op:"ellipse",init:function(){this.parentId=s.GET_TOOL_PARENT(this.op),this.points=[],void 0===i&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),o=this,r=!1,i=!0},onPenDown:function(t){this.points=[t.normalizedPoint],this.pg=this.board.currentPage()},onPenUp:function(t){if(!r&&"mouseout"!==t.type&&0!==this.points.length){var e,n,i,o,a,s,c,u;t.preventDefault(),e=this.points[0],n=t.normalizedPoint,this.points.length<2&&e[0]!==n[0]&&e[1]!==n[1]&&this.points.push(n),2===this.points.length&&(n=this.points[1],i=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]),a=this.wrapperToCanvasCoords([Math.min(e[0],n[0])+i/2,Math.min(e[1],n[1])+o/2]),s=this.draw.roundToDecPoints(Math.max(i,o)/2/this.zoomLevel(),4),c=i>o?[1,o/i]:[i/o,1],u={op:"ellipse",pg:this.pg,x:a[0],y:a[1],r:s,scale:c,color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]/this.zoomLevel(),4),filled:this.filled},this.drawingOperations.doOp(u),this.save(u),this.points=[],this.hideHelper())}},onPenMove:function(t){if(!r&&t.isPenDown)return t.preventDefault(),1===this.points.length?this.showHelper(this.points[0],t.normalizedPoint):void 0},startedPanning:function(){i&&(r=!0,o.hideHelper(),this.points=[])},stoppedPanning:function(){i&&(r=!1)},showHelper:function(t,e){var n,r,i,o,s;this.container.querySelector("canvas");this.helper||(n=a(this.container),n.addClass("aww-drawing-helper"),n.addClass("aww-ellipse-helper"),this.helper=n.ellipse(0,0)),r=t[0]<e[0]?t[0]:e[0],i=t[1]<e[1]?t[1]:e[1],o=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]),r=this.canvasToWrapperCoords([r,i])[0],i=this.canvasToWrapperCoords([r,i])[1],this.helper.x(r).y(i).width(o).height(s)},hideHelper:function(){var t=this.container.querySelector(".aww-ellipse-helper");t&&(this.container.removeChild(t),this.helper=null)},cancel:function(){this.hideHelper()},disableDispatchers:function(){i=!1}}},{"../../../common/config":5,"svg.js":91}],14:[function(t,e,n){"use strict";var r,i,o,a=t("svg.js");e.exports={op:"eraseArea",init:function(){void 0===i&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),o=this,r=!1,i=!0},onPenDown:function(t){this.points=[],this.lastPoint=t.normalizedPoint,this.points=[t.normalizedPoint],this.pg=this.board.currentPage()},onPenUp:function(t){if(!r&&"mouseout"!==t.type&&0!==this.points.length){var e;this.points.push(t.normalizedPoint);for(var n=0;n<this.points.length;n++)this.points[n]=this.wrapperToCanvasCoords(this.points[n]);this.points.length>2&&(e={op:"eraseArea",points:this.points,pg:this.pg,eraser:!0},this.save(e),this.drawingOperations.doOp(e),this.hideHelper())}},onPenMove:function(t){if(t.isPenDown&&!r){var e;t.preventDefault(),e=t.normalizedPoint,this.points.push(e),this.points.length>2&&this.showHelper()}},startedPanning:function(){i&&(r=!0,this.points=[],o.hideHelper())},stoppedPanning:function(){i&&(r=!1)},showHelper:function(){var t,e=[];this.helper||(t=a(this.container),t.addClass("aww-drawing-helper"),t.addClass("aww-erase-area-helper"),this.helper=t.polygon("0,0"));for(var n=0;n<this.points.length;n++)e.push(this.canvasToWrapperCoords(this.points[n]));this.helper.plot(e)},hideHelper:function(){var t=this.container.querySelector(".aww-erase-area-helper");t&&(t&&t.remove(),this.helper=null)},cancel:function(){this.hideHelper()},disableDispatchers:function(){i=!1}}},{"svg.js":91}],15:[function(t,e,n){"use strict";e.exports={op:"gotoPage",oneTime:!0,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.save({op:"gotoPage",pg:t.pg}),this.dispatcher.emit("goto-page",t.pg)},stateless:!0,onReceive:function(t,e,n){n.emit("goto-page",t.pg)}}},{}],16:[function(t,e,n){"use strict";var r=t("./spinnable"),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=t("hyperscript"),a=t("image-loaded"),s=t("debug")("awwapp:image-op");e.exports={op:"image",stateless:!0,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.src?this.showImageEditor(t):(s("Opening image dialog"),this.openImageSelector()),this.disableCanvasUpload=t.disableCanvasUpload},openImageSelector:function(){var t=this,e=this.container.querySelector("input")||o("input",{type:"file",accept:"image/*",onclick:function(){e.style.display="none"},onchange:function(n){t.container.removeChild(e),t.onImageSelected(n),n.preventDefault(),n.stopPropagation()}});this.container.appendChild(e),e.setAttribute("accept","image/*"),e.click(),this.input=e},onClick:function(){this.pg=this.board.currentPage();var t=this.container.querySelector("input");t&&t.click()},onImageSelected:function(t){var e=this;if(!t.target.files[0].name.match(/\.(gif|jpe?g|png)$/gi))throw new Error("File type not supported");var n=new FileReader;n.addEventListener("load",function(t){e.showImageEditor({src:t.target.result})}),n.readAsDataURL(t.target.files[0])},showImageEditor:function(t){function e(t){var e=document.createElement("a");return e.href=t,e.host}var n=this;if(this.dispatcher.emit("image-uploaded-from-computer",t.src),!this.disableCanvasUpload){s("Opening image editor with url",t.src.substr(0,1024));var r=this.container,i=t.src,c=window.location.host,u=o("img");(function(t){return"data:"===t.substr(0,5)})(i)||e(i)===c||(s("Making a cross-origin image request to: "+e(i)),u.crossOrigin="anonymous"),u.src=t.src,s("Waiting for image to read/load"),a(u,function(){return n.onImageRead(r,u)})}},onImageRead:function(t,e){var n=this;s("image in editor loaded"),this.penState={},this.spinnable=(0,i.default)(t,e,function(t,e,r,i,o,a){s("image editor is done, drawing image");var c=n.wrapperToCanvasCoords([e-n.canvasOffset.x,r-n.canvasOffset.y]),u=n.wrapperToCanvasCoords([i,o]),l={op:"image",pg:n.pg,src:t,left:c[0],top:c[1],w:u[0],h:u[1],r:a};n.uploadImage(l)})},cancel:function(){this.spinnable&&this.spinnable.cancel(),this.input&&(this.container.removeChild(this.input),delete this.input)},uploadImage:function(t){var e=this;if(s("uploading image"),!t.src)return this.save({});this.imageUpload(t.src,"png",function(n,r){if(n)throw n;s("image upload complete, adding it to push queue"),e.dispatcher.emit("image-drawn-on-canvas",t),t.src=r,e.drawingOperations.doOp(t),e.save(t),e.isActive=!1})}}},{"./spinnable":26,debug:61,hyperscript:72,"image-loaded":74}],17:[function(t,e,n){"use strict";var r=t("../lodash.custom"),i=t("debug")("awwapp:op"),o=t("./text-op"),a=t("./image-op"),s=t("./presentation-op"),c=t("./line-op"),u=t("./line-straight-op"),l=t("./rectangle-op"),f=t("./ellipse-op"),d=t("./marker-op"),h=t("./select-op"),p=t("./window-size"),g=t("./mouse-pointer-op"),m=t("./erase-area-op"),v=t("./goto-page-op"),y=t("./pan-op"),C=t("../../../common/config"),b=function(){},w={init:b,onPenMove:b,onPenDown:b,onPenUp:b,onClick:b,reset:b,onReceive:function(t,e){return e.drawingOperations.doOp(t)},cancel:b},I={line:c,lineStraight:u,rectangle:l,rectangleFilled:r.defaults({filled:!0},l),ellipse:f,ellipseFilled:r.defaults({filled:!0},f),pencil:r.defaults({toolOpacity:1,toolMultiple:1},d),marker:r.defaults({toolOpacity:C.MARKER_OPACITY,toolMultiple:C.MARKER_SIZE_MULTIPLE},d),eraser:r.defaults({eraser:!0,toolOpacity:1,toolMultiple:C.ERASER_SIZE_MULTIPLE},c),eraserArea:m,select:h,text:o,postit:r.defaults({isPostit:!0},o),image:a,presentation:s,pp:g,window:p,gotoPage:v,pan:y};e.exports=function(t,e){var n,o=e.board,a=e.dispatcher,s=e.options,c=e.utils,u=r.extend({},s.customOps,I);return{initOp:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i("debug","Init new operation",e);var l=u[e];if(!l)throw new Error("No operation registered with name: "+e);var f=r.extend({},l,{board:o,draw:t.draw,drawingOperations:t.drawingOperations,dispatcher:a,imageUpload:c.s3upload,isLoading:c.isLoading,container:t.container,opState:t.operationState,contextMenu:t.contextMenu,clipboard:t.clipboard,canvasToWrapperCoords:t.canvasToWrapperCoords,wrapperToCanvasCoords:t.wrapperToCanvasCoords,pageOps:t.pageOps,allOps:t.allOps,canvasBoundaries:t.boundaries,canvasOffset:t.canvasOffset,canvas:t.canvas,zoomLevel:t.zoomLevel,allUserPointers:t.allUserPointers,wrapperRect:t.wrapperRect,getOpPosition:t.getOpPosition,save:function(t){t.op&&(void 0===t.pg&&(t.pg=this.pg),a.emit("queue-op",t)),n!==e&&e&&!this.stateless&&(n=e)}});return r.defaults(f,w),f.init(s),n||(n=e),f},handleRemoteOp:function(e){var n=u[e.op];n&&"function"==typeof n.onReceive?n.onReceive(e,t,a,t.zoomLevel()):t.drawingOperations.doOp(e)}}}},{"../../../common/config":5,"../lodash.custom":12,"./ellipse-op":13,"./erase-area-op":14,"./goto-page-op":15,"./image-op":16,"./line-op":18,"./line-straight-op":19,"./marker-op":20,"./mouse-pointer-op":21,"./pan-op":22,"./presentation-op":23,"./rectangle-op":24,"./select-op":25,"./text-op":27,"./window-size":28,debug:61}],18:[function(t,e,n){"use strict";var r,i,o,a=t("../../../common/config");e.exports={op:"line",init:function(){this.parentId=a.GET_TOOL_PARENT("eraser"),r=this.toolMultiple,void 0===o&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),i=!1,o=!0},onPenDown:function(t){this.pg=this.board.currentPage(),this.lastPoint=this.wrapperToCanvasCoords(t.normalizedPoint),this.points=[this.lastPoint]},onPenUp:function(t){i||"mouseout"===t.type||0===this.points.length||(t.preventDefault(),1===this.points.length?this.drawingOperations.drawCircle(this.lastPoint,{color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]*r/this.zoomLevel()),eraser:this.eraser}):this.points.push(this.wrapperToCanvasCoords(t.normalizedPoint)),this.save({op:"line",pg:this.pg,points:this.points,color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]*r/this.zoomLevel()),eraser:this.eraser}),this.points=[])},onPenMove:function(t){if(t.isPenDown&&!i){t.preventDefault();var e=this.wrapperToCanvasCoords(t.normalizedPoint);this.lastPoint=this.drawingOperations.drawLine(this.lastPoint,e,{color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]*r/this.zoomLevel()),eraser:this.eraser}),this.points.push(e)}},startedPanning:function(){o&&(i=!0,this.points=[])},stoppedPanning:function(){o&&(i=!1)},disableDispatchers:function(){o=!1}}},{"../../../common/config":5}],19:[function(t,e,n){"use strict";var r,i,o,a=t("svg.js"),s=t("../../../common/config");e.exports={op:"lineStraight",init:function(){this.parentId=s.GET_TOOL_PARENT(this.op),this.points=[],void 0===i&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),o=this,r=!1,i=!0},onPenDown:function(t){this.points=[t.normalizedPoint]},onPenUp:function(t){if(!r&&"mouseout"!==t.type&&0!==this.points.length){var e,n,i;t.preventDefault(),e=this.points[0],n=t.normalizedPoint,this.points.length<2&&(e[0]!==n[0]||e[1]!==n[1])&&this.points.push(n),2===this.points.length&&(n=this.points[1],e=this.wrapperToCanvasCoords(e),n=this.wrapperToCanvasCoords(n),i={op:"lineStraight",points:[e,n],color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]/this.zoomLevel())},this.drawingOperations.doOp(i),this.save(i),this.points=[],this.hideHelper())}},onPenMove:function(t){if(t.isPenDown&&!r)return t.preventDefault(),1===this.points.length?this.showHelper(this.points[0],t.normalizedPoint):void 0},startedPanning:function(){i&&(r=!0,this.points=[],o.hideHelper())},stoppedPanning:function(){i&&(r=!1)},showHelper:function(t,e){var n;this.helper||(n=a(this.container),n.addClass("aww-drawing-helper"),n.addClass("aww-line-helper"),this.helper=n.line(0,0,0,0)),t=this.canvasToWrapperCoords(t),e=this.canvasToWrapperCoords(e),this.helper.plot(t[0],t[1],e[0],e[1])},hideHelper:function(){var t=this.container.querySelector(".aww-line-helper");t&&(this.container.removeChild(t),this.helper=null)},cancel:function(){this.hideHelper()},disableDispatchers:function(){i=!1}}},{"../../../common/config":5,"svg.js":91}],20:[function(t,e,n){"use strict";function r(t,e){var n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return e?"rgba("+n+", "+r+", "+i+", "+e+")":"rgb("+n+", "+r+", "+i+")"}var i,o,a,s,c,u,l=t("../../../common/drawing"),f=t("hyperscript"),d=t("../../../common/config");e.exports={op:"marker",hasSeparateCanvas:!0,init:function(){this.parentId=d.GET_TOOL_PARENT(this.op);var t=this;if(a=this.toolMultiple,s=this.toolOpacity,o=f("canvas.aww-canvas-marker",{style:"opacity: "+s+";",width:t.canvasBoundaries.minW,height:t.canvasBoundaries.minH}),1!==s){var e=o.getContext("2d");i=l(e,Image,void 0,!1)}else i=void 0;void 0===u&&(this.dispatcher.on("window-resize",this.windowResize),this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),c=!1,u=!0,this.container.appendChild(o)},windowResize:function(t,e){u&&(o.width=t,o.height=e)},startedPanning:function(){u&&(i&&i.doClear(),c=!0,this.points=[])},stoppedPanning:function(){u&&(c=!1)},onPenDown:function(t){this.pg=this.board.currentPage(),this.points=[],this.points.push(this.wrapperToCanvasCoords(t.normalizedPoint)),this.lastPoint=i?[t.normalizedPoint[0]+this.canvasOffset.x,t.normalizedPoint[1]+this.canvasOffset.y]:this.points[this.points.length-1]},onPenUp:function(t){if(!c&&"mouseout"!==t.type&&0!==this.points.length){t.preventDefault(),this.points.length>1&&this.points.push(this.wrapperToCanvasCoords(t.normalizedPoint));var e={op:"line",pg:this.pg,points:this.points,color:r(this.opState.color(),s),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]*a/this.zoomLevel(),4),eraser:this.eraser};this.drawingOperations.doOp(e),this.save(e),this.points=[],i?i.doClear():this.drawingOperations.doRedraw()}},onPenMove:function(t){if(t.isPenDown&&!c){t.preventDefault(),this.points.push(this.wrapperToCanvasCoords(t.normalizedPoint))
;var e=i?[t.normalizedPoint[0]+this.canvasOffset.x,t.normalizedPoint[1]+this.canvasOffset.y]:this.points[this.points.length-1],n=i?i:this.draw;this.lastPoint=n.drawLine(this.lastPoint,e,{color:this.opState.color(),size:this.opState.size()[this.parentId]*a/(i?1:this.zoomLevel()),eraser:this.eraser})}},removeCanvas:function(t){this.container.removeChild(o)},disableDispatchers:function(){u=!1}}},{"../../../common/config":5,"../../../common/drawing":6,hyperscript:72}],21:[function(t,e,n){"use strict";var r=t("../ui/icon-definitions"),i=t("../../../common/config");e.exports={op:"pp",onReceive:function(t,e,n,o){this.container=e.container,this.allUserPointers=e.allUserPointers,this.canvasToWrapperCoords=e.canvasToWrapperCoords;var a=e.wrapperToCanvasCoords([10-e.canvasOffset.x,10-e.canvasOffset.y]),s=e.wrapperToCanvasCoords([e.wrapperRect().width-e.canvasOffset.x-10-28,e.wrapperRect().height-e.canvasOffset.y-10-28]),c=0,u=this.container.querySelector('div[data-uid="'+t.uid+'"]');if(a=[a[0]+i.TOP_LEFT_TOOLBAR_MARGIN/o,a[1]+i.TOP_LEFT_TOOLBAR_MARGIN/o],u){var l;t.x<s[0]&&t.x>a[0]&&t.y<s[1]&&t.y>a[1]?l=r.elHW("userPointer"):(l=r.elHW("edgeUserPointer"),t.x>s[0]&&t.y<a[1]||(t.x>s[0]&&t.y<s[1]&&t.y>a[1]?c=45:t.x>s[0]&&t.y>s[1]?c=90:t.x<s[0]&&t.x>a[0]&&t.y>s[1]?c=135:t.x<a[0]&&t.y>s[1]?c=180:t.x<a[0]&&t.y<s[1]&&t.y>a[1]?c=225:t.x<a[0]&&t.y<a[1]?c=270:t.x>a[0]&&t.x<s[0]&&t.y<a[1]&&(c=315)),t.x=Math.max(Math.min(t.x,s[0]),a[0]),t.y=Math.max(Math.min(t.y,s[1]),a[1]),l.style["-ms-transform"]="rotate("+c+"deg)",l.style["-webkit-transform"]="rotate("+c+"deg)",l.style.transform="rotate("+c+"deg)"),u.replaceChild(l,u.querySelector("svg"));var f=e.canvasToWrapperCoords([t.x*o,t.y*o]);u.style.transform="translate("+f[0]+"px, "+f[1]+"px)",this.allUserPointers[t.uid].top=f[1]+"px",this.allUserPointers[t.uid].left=f[0]+"px"}}}},{"../../../common/config":5,"../ui/icon-definitions":31}],22:[function(t,e,n){"use strict";e.exports={op:"pan",init:function(){this.dispatcher.emit("enable-panning")},cancel:function(){this.dispatcher.emit("disable-panning")}}},{}],23:[function(t,e,n){"use strict";var r=t("hyperscript"),i=(t("./spinnable"),t("debug")("awwapp:presentation-op")),o=(t("../utils/utils"),t("observable"),t("xhr")),a=t("../../../common/config");e.exports={op:"presentation",stateless:!0,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.src?this.uploadPresFromUrl(this,t.src):t.file?this.onPresentationDragged(t.e,t.file):(i("Opening image dialog"),this.openPresentationSelector()),this.disableCanvasUpload=t.disableCanvasUpload},openPresentationSelector:function(){var t=this,e=this.container.querySelector("input")||r("input",{type:"file",accept:"application/pdf,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.slideshow,application/vnd.openxmlformats-officedocument.presentationml.presentation",onchange:function(n){t.container.removeChild(e),t.onPresentationSelected(n),n.preventDefault(),n.stopPropagation()}});this.container.appendChild(e),e.setAttribute("accept","application/pdf,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.slideshow,application/vnd.openxmlformats-officedocument.presentationml.presentation"),e.click()},onClick:function(){this.pg=this.board.currentPage();var t=this.container.querySelector("input");t&&t.click()},onPresentationSelected:function(t){var e=this,n=this,r=t.target.files[0].name;if(!r.match(/\.(pdf|pptx?)$/gi))throw new Error("File type not supported");var i=r.lastIndexOf("."),o=new FileReader;o.addEventListener("load",function(t){e.imageUpload(t.target.result,r.substring(i+1),function(t,e){if(t)throw t;n.uploadPresFromUrl(n,e)})}),o.readAsDataURL(t.target.files[0])},onPresentationDragged:function(t,e){var n=this;this.imageUpload(t.target.result,e.name,function(t,e){if(t)throw t;n.uploadPresFromUrl(n,e)})},uploadPresFromUrl:function(t,e){if(this.dispatcher.emit("presentation-uploaded-from-computer",e),!this.disableCanvasUpload){t.isLoading(1);var n=this.container.getBoundingClientRect(),r=n.width,s=n.height,c={source:e,apikey:t.board.options.apiKey,referer:"https://awwapp.com",width:r,height:s};i("Calling Converter V2 API for",e),o({method:"POST",url:"https://converter.awwapp.com/api/v2/convert/",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1},function(e,n,r){if(t.isLoading(-1),e)throw e;var o=JSON.parse(r).images;if(!o)throw"Converter API returns error";i("Converted into pages",o);for(var s=[(t.canvasOffset.x-a.TOP_LEFT_TOOLBAR_MARGIN)/t.zoomLevel(),(t.canvasOffset.y-a.TOP_LEFT_TOOLBAR_MARGIN)/t.zoomLevel()],c=t.board.currentPage(),u=[],l=0;l<o.length;l++){var f=t.wrapperToCanvasCoords([o[l].w,o[l].h]),d={op:"image",pg:l+c,src:o[l].url,left:-s[0]||0,top:-s[1]||0,w:f[0],h:f[1]};u.push(d),d.pg===c?t.drawingOperations.doOp(d):t.dispatcher.emit("queue-op",d,{forcePage:!0}),t.save(d),t.isActive=!1}t.dispatcher.emit("presentation-drawn-on-canvas",u)})}}}},{"../../../common/config":5,"../utils/utils":36,"./spinnable":26,debug:61,hyperscript:72,observable:80,xhr:113}],24:[function(t,e,n){"use strict";var r,i,o,a=t("svg.js"),s=t("../../../common/config");e.exports={op:"rectangle",init:function(){this.parentId=s.GET_TOOL_PARENT(this.op),this.points=[],void 0===i&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning)),o=this,r=!1,i=!0},onPenDown:function(t){this.pg=this.board.currentPage(),this.points=[t.normalizedPoint]},onPenUp:function(t){if(!r&&"mouseout"!==t.type&&0!==this.points.length){var e,n,i,o,a,s,c;if(t.preventDefault(),e=this.points[0],n=t.normalizedPoint,this.points.length<2&&e[0]!==n[0]&&e[1]!==n[1]&&this.points.push(n),2===this.points.length){n=this.points[1],i=e[0]<n[0]?e[0]:n[0],o=e[1]<n[1]?e[1]:n[1],a=Math.abs(e[0]-n[0]),s=Math.abs(e[1]-n[1]);var u=this.wrapperToCanvasCoords([i,o]),l=this.wrapperToCanvasCoords([a,s]);c={op:"rectangle",pg:this.pg,x:u[0],y:u[1],w:l[0],h:l[1],color:this.opState.color(),size:this.draw.roundToDecPoints(this.opState.size()[this.parentId]/this.zoomLevel(),4),filled:this.filled},this.drawingOperations.doOp(c),this.save(c),this.points=[],this.hideHelper()}}},startedPanning:function(){i&&(r=!0,o.hideHelper(),this.points=[])},stoppedPanning:function(){i&&(r=!1)},onPenMove:function(t){if(!r&&t.isPenDown)return t.preventDefault(),1===this.points.length?this.showHelper(this.points[0],t.normalizedPoint):void 0},showHelper:function(t,e){var n,r,i,o,s;this.container.querySelector("canvas");this.helper||(n=a(this.container),n.addClass("aww-drawing-helper"),n.addClass("aww-rectangle-helper"),this.helper=n.rect(0,0)),r=t[0]<e[0]?t[0]:e[0],i=t[1]<e[1]?t[1]:e[1],o=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]),r=this.canvasToWrapperCoords([r,i])[0],i=this.canvasToWrapperCoords([r,i])[1],this.helper.x(r).y(i).width(o).height(s)},hideHelper:function(){var t=this.container.querySelector(".aww-rectangle-helper");t&&(this.container.removeChild(t),this.helper=null)},cancel:function(){this.hideHelper()},disableDispatchers:function(){i=!1}}},{"../../../common/config":5,"svg.js":91}],25:[function(t,e,n){"use strict";var r,i,o,a,s,c,u,l,f,d,h,p,g,m=t("../../../common/math"),v=t("../../../common/drawing"),y=t("hyperscript"),C=t("svg.js"),b=t("../lodash.custom"),w=[],I=!1;e.exports={op:"select",hasSeparateCanvas:!0,init:function(){d=this,h=!1,o=this.toolMultiple,a=this.toolOpacity,this.helpers=[],i=y("canvas.aww-canvas-marker",{style:"opacity: 0; pointer-events: none;",width:d.canvasBoundaries.minW,height:d.canvasBoundaries.minH});var t=i.getContext("2d");r=v(t,Image,void 0,!1),r.setPanningZooming(!0),l=!1,void 0===f&&(this.dispatcher.on("window-resize",this.windowResize),this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning),this.dispatcher.on("backspace-press",this.backspacePress),this.dispatcher.on("shift-down",this.shiftPressed),this.dispatcher.on("canvas-pan-after",this.canvasPan),this.dispatcher.on("goto-page",this.gotoPage),this.dispatcher.on("do-undo",this.doUndo),this.dispatcher.on("copy",this.copyOps),this.dispatcher.on("select-ops",this.selectOps),this.dispatcher.on("get-selected-ops",this.getSelectedOps),this.dispatcher.on("board-joined",this.boardJoined),this.dispatcher.on("cancel-select",this.cancel)),f=!0},copyOps:function(){f&&w.length>0&&(d.dispatcher.emit("flash-message","Object"+(1===w.length?"":"s")+" copied to clipboard","success",1),d.clipboard.pushOps(b.map(w,function(t){return t.op})))},getSelectedOps:function(t){if(f){if(!t)return w;t(w)}},selectOps:function(t){f&&t&&t.length>0&&(w=t,d.hideHelper(),d.showAllHelpers(w))},doUndo:function(){f&&d.resetFields()},boardJoined:function(){f&&d.resetFields()},gotoPage:function(){f&&d.resetFields()},shiftPressed:function(t){f&&(h=t)},canvasPan:function(){f&&w.length>0&&(d.hideHelper(),d.showAllHelpers(w))},startedPanning:function(){f&&(l=!0,d.points=[],d.resetFields())},stoppedPanning:function(){f&&(l=!1)},windowResize:function(t,e){f&&(i.width=t,i.height=e)},backspacePress:function(){if(f&&w.length>0){d.board.setDeleteFlags(b.map(w,function(t){return t.op}),!0);var t=b.map(w,function(t){return{opid:t.op.opid}}),e={op:"delete",ops:t};d.drawingOperations.doOp(e),d.save(e),d.resetFields()}},onPenDown:function(t){if(this.contextMenu.initMenu("select",this),this.pg=this.board.currentPage(),this.points=[],u=void 0,s=this.wrapperToCanvasCoords(t.normalizedPoint),this.lastPoint=s,this.points.push(s),c=this.allOps(),this.getClickedOp(c,this.board.currentPage(),s,w.length>0),u){I=!0;var e=-1;b.each(w,function(t,n){if(t.op.opid===u.opid)return e=n}),h||e!==-1?h?e>-1?(w.splice(e,1),this.hideHelper(u.opid)):(w.push({op:u,initPos:this.getOpPosition(u)}),this.showHelper(u)):(this.hideHelper(),this.showAllHelpers(w)):(w=[{op:u,initPos:this.getOpPosition(u)}],this.hideHelper(),this.showHelper(u))}else h||(this.hideHelper(),w=[])},onPenUp:function(t){if(!("mouseout"===t.type||this.points.length<1||h)){t.preventDefault();var e=this.points[0],n=this.wrapperToCanvasCoords(t.normalizedPoint);if(e[0]!==n[0]&&e[1]!==n[1]&&1===this.points.length&&this.points.push(this.wrapperToCanvasCoords(t.normalizedPoint)),w.length>0&&this.points.length>1){var r=[];b.each(w,function(t){r.push({opid:t.op.opid,pos:t.initPos}),t.initPos=d.getOpPosition(t.op)});var i={op:"move",ops:r,points:this.points};this.drawingOperations.doOp(i),this.save(i),this.hideHelper(),this.showAllHelpers(w)}else 2===this.points.length&&(this.hideHelper(),this.selectObjectsInArea(c,this.board.currentPage(),this.points));this.points=[],I=!1}},onPenMove:function(t){if(t.isPenDown&&!l){t.preventDefault();var e=this.wrapperToCanvasCoords(t.normalizedPoint);if(w.length>0)this.points.push([this.draw.roundToDecPoints(e[0]),this.draw.roundToDecPoints(e[1])]),this.board.replaceOpsOnCanvas(b.map(w,function(t){return t.op}),this.points.slice(this.points.length-2)),this.hideHelper(),this.showAllHelpers(w,!0),this.lastPoint=e;else if(1===this.points.length)return this.showSelection(this.points[0],e)}},showMainCanvas:function(){this.canvas.style.visibility="inherit"},removeCanvas:function(){this.resetFields()},returnedClickedOpOnCanvas:function(t){u=t},selectObjectsInArea:function(t,e,n){if(w=[],r.doClear(),r.beginPath(),n[1][0]<n[0][0]){var i=[n[0][0],n[1][0]];n[1][0]=i[0],n[0][0]=i[1]}if(n[1][1]<n[0][1]){var o=[n[0][1],n[1][1]];n[1][1]=o[0],n[0][1]=o[1]}for(var a=t.length-1;a>=0;a--){var s=t[a],c=void 0,u=void 0;if(s.pg===e&&!s.delete&&!s.editedOpid&&"move"!==s.op)if(s.eraser)r.drawEraserWithoutBeginningPath(s);else{if(s.points){var l=v.getMaxDimensions(s);c=(l[0][0]+l[1][0])/2,u=(l[0][1]+l[1][1])/2}else if("rectangle"===s.op)c=s.x+s.w/2,u=s.y+s.h/2;else if("ellipse"===s.op)c=s.x,u=s.y;else if("text"===s.op)c=s.textPoint[0]+s.maxWidth/2,u=s.textPoint[1]+s.maxHeight/2;else{if("image"!==s.op)continue;c=s.left+s.w/2,u=s.top+s.h/2}c>n[0][0]&&c<n[1][0]&&u>n[0][1]&&u<n[1][1]&&!r.isPointInDrawnAreas(c,u)&&w.unshift({op:s,initPos:this.getOpPosition(s)})}}r.closePath(),w.length>0?(I=!0,this.showAllHelpers(w)):this.hideHelper()},getClickedOp:function(t,e,n,i){for(var o=b.map(w,function(t){return t.op.opid}),a=t.length-1;a>=0;a--){var s=t[a];if(s.pg===e&&!s.delete&&"move"!==s.op&&!s.editedOpid)if(!i||h){if(s.points){r.doClear();try{r.doOp(s,a,n,this.returnedClickedOpOnCanvas)}catch(t){this.dispatcher.emit("flash-message","Selecting strokes is not available in Internet Explorer or Edge, for the best experience use Chrome or Firefox","error",10)}if(void 0!==u){u.eraser&&(u=void 0);break}}else if("rectangle"===s.op){if(s.filled){if(n[0]>=s.x&&n[0]<=s.x+s.w&&n[1]>=s.y&&n[1]<=s.y+s.h){u=s;break}}else if(n[0]>=s.x-s.size&&n[0]<=s.x+s.size&&n[1]>=s.y&&n[1]<=s.y+s.h||n[0]>=s.x&&n[0]<=s.x+s.w&&n[1]>=s.y-s.size&&n[1]<=s.y+s.size||n[0]>=s.x+s.w-s.size&&n[0]<=s.x+s.w+s.size&&n[1]>=s.y&&n[1]<=s.y+s.h||n[0]>=s.x&&n[0]<=s.x+s.w&&n[1]>=s.y+s.h-s.size&&n[1]<=s.y+s.h+s.size){u=s;break}}else if("ellipse"===s.op)if(s.filled){var c=Math.pow(n[0]-s.x,2)/Math.pow(s.r*s.scale[0],2)+Math.pow(n[1]-s.y,2)/Math.pow(s.r*s.scale[1],2);if(c<=1){u=s;break}}else{var l=Math.pow(n[0]-s.x,2)/Math.pow((s.r+s.size/2)*s.scale[0],2)+Math.pow(n[1]-s.y,2)/Math.pow((s.r+s.size/2)*s.scale[1],2),f=Math.pow(n[0]-s.x,2)/Math.pow((s.r-s.size/2)*s.scale[0],2)+Math.pow(n[1]-s.y,2)/Math.pow((s.r-s.size/2)*s.scale[1],2);if(l<=1&&f>1){u=s;break}}else if("text"===s.op){if(n[0]>=s.textPoint[0]&&n[0]<=s.textPoint[0]+s.maxWidth&&n[1]>=s.textPoint[1]&&n[1]<=s.textPoint[1]+s.maxHeight){u=s;break}}else if("image"===s.op){var d=function(t,e){if(!s.w||!s.h||!s.r)return{x:t,y:e};var n=s.left+s.w/2,r=s.top+s.h/2;return(0,m.rotateCoordinates)(t,e,n,r,s.r)}(n[0],n[1]);if(d.x>=s.left&&d.x<=s.left+s.w&&d.y>=s.top&&d.y<=s.top+s.h){u=s;break}}}else{var p=v.getOpOutline(s);if(n[0]>=p.x&&n[0]<=p.x+p.width&&n[1]>=p.y&&n[1]<=p.y+p.height&&o.indexOf(s.opid)!==-1){u=s;break}}}},getOpsToDuplicate:function(){return{ops:b.map(w,function(t){return t.op}),offset:[.2*(g[0]-p[0])/d.zoomLevel(),.2*(g[1]-p[1])/d.zoomLevel()]}},showAllHelpers:function(t,e){e?d.showHelper(null,v.getOpsBoundingBox(b.map(t,function(t){return t.op}))):b.each(t,function(t){d.showHelper(t.op)})},showHelper:function(t,e){if(e||t){var n,r,i,o,a;this.container.querySelector("canvas");if(e)r=e[0][0],i=e[0][1],o=e[1][0]-e[0][0],a=e[1][1]-e[0][1];else{var s=v.getOpOutline(t);r=s.x,i=s.y,o=s.width,a=s.height}n=C(this.container),n.addClass("aww-select-outline"),n.attr("data-op-id",t?t.opid:"many-ops");var c=n.rect(0,0);r=r*this.zoomLevel()+this.canvasOffset.x-2,i=i*this.zoomLevel()+this.canvasOffset.y-2,o=o*this.zoomLevel()+4,a=a*this.zoomLevel()+4,this.contextMenu.showMenu(),p||(p=[r,i]),p[0]>=r&&(p[0]=r,this.contextMenu.positionChange(r)),p[1]>=i&&(p[1]=i,this.contextMenu.positionChange(null,i)),g||(g=[r+o,i+a]),g[0]>r+o&&(g[0]=r+o),g[1]>i+a&&(g[1]=i+a),c.x(r).y(i).width(o).height(a),this.helpers.push({helper:c,opid:t?t.opid:null})}},showSelection:function(t,e){var n,r,i,o,a;this.container.querySelector("canvas");this.selectorHelper||(n=C(this.container),n.addClass("aww-drawing-helper"),this.selectorHelper=n.rect(0,0)),r=(t[0]<e[0]?t[0]:e[0])*this.zoomLevel(),i=(t[1]<e[1]?t[1]:e[1])*this.zoomLevel(),o=Math.abs(t[0]-e[0])*this.zoomLevel(),a=Math.abs(t[1]-e[1])*this.zoomLevel(),r=this.canvasToWrapperCoords([r,i])[0],i=this.canvasToWrapperCoords([r,i])[1],this.selectorHelper.x(r).y(i).width(o).height(a)},hideHelper:function(t){if(t){var e=this.container.querySelector('svg[data-op-id="'+t+'"]');e&&this.container.removeChild(e);var n=-1;b.each(this.helpers,function(e,r){if(e.opid===t)return n=r}),n>-1&&this.helpers.splice(n,1),this.helpers.length<=0&&(this.selectorHelper=void 0)}else{var r=this.container.querySelectorAll("svg[data-op-id]");r.length>0&&(b.each(r,function(t){d.container.removeChild(t)}),this.helpers=[],p=void 0,g=void 0,this.contextMenu.hideMenu());var i=d.container.querySelector(".aww-drawing-helper");i&&(d.container.removeChild(i),this.selectorHelper=void 0)}},resetFields:function(){w=[],u=void 0,delete this.selectorHelper,I=!1,this.hideHelper()},cancel:function(){d.resetFields()},disableDispatchers:function(){f=!1}}},{"../../../common/drawing":6,"../../../common/math":7,"../lodash.custom":12,hyperscript:72,"svg.js":91}],26:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){function r(t){N.src=e.src,Z=void 0,P=S/O,j=t,R=0,z=0,p("Showing image "+O+" x "+S+" (aspect = "+P.toFixed(4)+"), initial rotation = "+j.toFixed(4)+"rad");var n=.8*Math.min(T.height,T.width);if(Math.max(S,O)>n){var i=n/Math.max(S,O);O*=i,S*=i}R=T.height/2-S/2,z=T.width/2-O/2,k.style.top=R+"px",k.style.left=z+"px",N.style.width=O+"px",N.style.height=S+"px",k.style.transform="rotate("+j+"rad)",setTimeout(function(){0!=j&&N.naturalWidth==e.naturalHeight&&N.naturalHeight==e.naturalWidth&&(p("Browser automatically rotated the image, compensating"),W=j,O=N.naturalWidth,S=N.naturalHeight,r(0))},200),L.style.display="block"}function i(){s.default.off(M,"click",a),s.default.off(E,"click",c),s.default.off(g(B,"img"),"dragstart",d),s.default.off(B,"dragstart",d),s.default.off(k,"touchstart",C),s.default.off(L,"touchmove",b),s.default.off(k,"touchend",_),s.default.off(L,"mousedown",w),s.default.off(L,"mousemove",A),s.default.off(L,"mouseup",_)}function a(t){t.preventDefault(),t.stopPropagation(),L.style.display="none",i();var e=O,r=S,o=z,a=R;W&&(j+=W,e=S,r=O,o=z+(O-e)/2,a=R+(S-r)/2),p("Result: "+e+" x "+r+" (aspect = "+P.toFixed(4)+"), rotation = "+j.toFixed(4)+"rad"),n(N.src,o,a,e,r,j)}function c(t){t.preventDefault(),t.stopPropagation(),i(),L.style.display="none"}function l(t,e){var n=z+O/2,r=R+S/2;return Math.atan2(e-r,t-n)}function d(t){return t.preventDefault(),t.stopPropagation(),!1}function h(t){return{x:Array.from(t.touches).reduce(function(t,e){return t+e.pageX},0)/t.touches.length,y:Array.from(t.touches).reduce(function(t,e){return t+e.pageY},0)/t.touches.length}}function v(t){if(void 0!==t.scale)return t.scale;if(t.touches.length<2)return 1;var e=t.touches[0],n=t.touches[1];return Math.sqrt(Math.pow(e.pageX-n.pageX,2)+Math.pow(e.pageY-n.pageY,2))}function y(t){if(void 0===t.rotation){if(t.touches.length<2)return 0;var e=t.touches[0],n=t.touches[1],r=e.pageX-n.pageX,i=e.pageY-n.pageY;return Math.atan2(i,r)}return t.rotation*Math.PI/180}function C(t){if(!t.target||"A"!==t.target.tagName){t.stopPropagation(),t.preventDefault(),Z&&_();var e=h(t),n=y(t);Z={touch:!0,x:e.x,y:e.y,angle:n,scale:v(t)}}}function b(t){if(t.stopPropagation(),t.preventDefault(),Z&&Z.touch){var e=v(t)/Z.scale,n=h(t),r=O*(e-1),i=S*(e-1),o=n.x-Z.x-r/2,a=n.y-Z.y-i/2,s=y(t)-Z.angle;k.style.transform="rotate("+(j+s)+"rad)",N.style.width=O*e+"px",N.style.height=S*e+"px",k.style.left=z+o+"px",k.style.top=R+a+"px"}}function w(t){var e=t.target,n=(0,u.default)(e),r=n.contains("grip"),i=e===B||e===g(B,"img");Z={touch:!1,x:t.clientX,y:t.clientY,angle:l(t.clientX,t.clientY),scale:I(t.clientX,t.clientY),isResize:r,isRotate:i}}function I(t,e){var n=z+O/2,r=R+S/2;return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function A(t){t.stopPropagation(),t.preventDefault();var e=t.clientX,n=t.clientY;if(Z&&!Z.touch)if(Z.isRotate){var r=l(e,n),i=r-Z.angle;k.style.transform="rotate("+(j+i)+"rad)"}else if(Z.isResize){var o=I(e,n),a=O*(o/Z.scale-1),s=S*(o/Z.scale-1),c=-1*a/2,u=-1*s/2;k.style.left=z+c+"px",k.style.top=R+u+"px",N.style.width=O+a+"px",N.style.height=S+s+"px"}else{var f=e-Z.x,d=n-Z.y;k.style.left=z+f+"px",k.style.top=R+d+"px"}}function _(t){var e=function(t,e){return t&&t.indexOf(e)!==-1};if(e(k.style.top,"px")&&(R=parseInt(k.style.top)),e(k.style.left,"px")&&(z=parseInt(k.style.left)),e(N.style.width,"px")&&(O=parseInt(N.style.width)),e(N.style.height,"px")&&(S=parseInt(N.style.height)),e(k.style.transform,"rad")){var n=k.style.transform.match(/rotate\((.*)rad\)/);n.length>=2&&(j=parseFloat(n[1]))}Z=void 0}function x(t){var e=0;return 6===t?e=Math.PI/2:3===t?e=Math.PI:8===t&&(e=3*Math.PI/2),e}var O=e.naturalWidth,S=e.naturalHeight;if(O&&S){var L=g(document,"#spinnable"),T=(0,f.default)(L,".aww").getBoundingClientRect(),k=g(L,".drop"),M=(g(k,".drop__buttons"),g(k,".js-ok")),E=g(k,".js-cancel"),B=(m(k,".grip"),g(k,".rotate--me")),N=g(k,".uploaded--img"),Z=void 0,P=S/O,j=0,W=0,R=0,z=0;!function(){s.default.on(M,"click",a),s.default.on(E,"click",c),s.default.on(g(B,"img"),"dragstart",d),s.default.on(B,"dragstart",d),s.default.on(k,"touchstart",C),s.default.on(L,"touchmove",b),s.default.on(k,"touchend",_),s.default.on(L,"mousedown",w),s.default.on(L,"mousemove",A),s.default.on(L,"mouseup",_)}();if(!o.default.getData(e,function(){r(x(o.default.getTag(this,"Orientation")))})){if("data:"===e.src.substr(0,5)){var D=function(t){for(var e=t.substr(t.indexOf(",")+1),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return window.dataUri=t,window.EXIF=o.default,o.default.readFromBinaryFile(r.buffer)}(e.src);D&&D.Orientation&&(j=x(D.Orientation))}r(j)}}};var i=t("exif-js"),o=r(i),a=t("dom-events"),s=r(a),c=t("class-list"),u=r(c),l=t("component-closest"),f=r(l),d=t("debug"),h=r(d),p=(t("../../../common/math"),(0,h.default)("awwapp:spinnable")),g=function(t,e){return t.querySelector(e)},m=function(t,e){return t.querySelectorAll(e)}},{"../../../common/math":7,"class-list":52,"component-closest":55,debug:61,"dom-events":65,"exif-js":66}],27:[function(t,e,n){"use strict";function r(t,e,n,r){for(var o=t.length-1;o>=0;o--){var a=t[o];if(a.eraser){i.doClear();try{i.doOp(a,o,n,r.returnedClickedOpOnCanvas)}catch(t){continue}if(void 0!==s){s.eraser&&(s=void 0);break}}else if("text"===a.op&&!a.delete&&!a.editedOpid&&a.pg===e){var c=n[0]>=a.textPoint[0]&&n[0]<=a.textPoint[0]+a.maxWidth&&n[1]>=a.textPoint[1]&&n[1]<=a.textPoint[1]+a.maxHeight;if(!s&&c)return s=a,r.dispatcher.emit("change-cursor","text"),r.showHelper(a),a;s&&!c&&(s=void 0)}}s||(r.dispatcher.emit("change-cursor","inherit"),r.hideHelper())}var i,o,a,s,c,u,l,f,d,h,p,g,m,v,y,C,b,w,I=t("../lodash.custom"),A=t("../../../common/drawing"),_=t("hyperscript"),x=t("observable"),O=t("debug")("draggable"),S=t("../../../common/config"),L=t("amp-add-class"),T=t("svg.js"),k=S.CSS_CLASSES.NOT_VISIBLE;e.exports={op:"text",lineHeight:S.FONT_LINE_HEIGHT,fontWeight:"normal",fontStyle:"normal",isPostit:!1,init:function(){a=this.pageTextAndEraserOps(),o=_("canvas.aww-canvas-marker",{style:"opacity: 0; pointer-events: none;",width:this.canvasBoundaries.minW,height:this.canvasBoundaries.minH});var t=o.getContext("2d");i=A(t,Image,void 0,!1),this.pg=this.board.currentPage(),void 0===d&&(this.dispatcher.on("started-panning",this.startedPanning),this.dispatcher.on("stopped-panning",this.stoppedPanning),this.dispatcher.on("goto-page",this.gotoPage),this.dispatcher.on("do-undo",this.doUndo),this.dispatcher.on("canvas-pan-before",this.canvasPan),this.dispatcher.on("change-color",this.changeColor),this.dispatcher.on("window-resize",this.windowResize),this.dispatcher.on("select-ops",this.selectOps)),h=this,u=!1,d=!0},startedPanning:function(){d&&(u=!0,h.hideHelper(),h.textRemove())},stoppedPanning:function(){d&&(u=!1)},windowResize:function(t,e){d&&(o.width=t,o.height=e)},canvasPan:function(){d&&(h.cancel(),h.resetFields())},doUndo:function(){d&&(h.el?h.textRemove():h.resetFields())},selectOps:function(t){d&&t&&t.length>0&&(c=t[0].op,h.showTextArea(null,null,!0))},gotoPage:function(){d&&(setTimeout(function(){h.pg=h.board.currentPage()},1e3),a=h.pageTextAndEraserOps(),h.resetFields())},changeColor:function(t){d&&(p?p.style.backgroundColor="#000000"===t.color?S.POSTIT.DEFAULT_COLOR:t.color:h.el&&(h.el.style.color=t.color))},showTextArea:function(t,e,n){var r,i,o,a;if(!this.point){var s=this.container.querySelector("textarea")||this.container.querySelector(".aww-post-it-wrapper");if(s)return void(this.el=s);n&&h.board.setDeleteFlags([c],!0),this.contextMenu.showMenu(),c&&(r=c.text,i=c.textPoint,o=c.fontSize*this.zoomLevel(),a=c.fontWeight,this.opState.textColor(c.isPostit&&c.color===S.POSTIT.DEFAULT_COLOR?"#000000":c.color),this.opState.fontSize(o));var u=i?[this.draw.roundToDecPoints(i[0]*this.zoomLevel(),6),this.draw.roundToDecPoints(i[1]*this.zoomLevel(),6)]:t.normalizedPoint;this.point=x(u);var l=this.container;this.isPostitInTheGame()?(b=c?[c.maxWidth*this.zoomLevel(),c.maxHeight/(1+S.POSTIT.PADDING_TOP)*this.zoomLevel()]:[S.DEFAULT_POSTIT_SIZE[0],S.DEFAULT_POSTIT_SIZE[1]],C=o?o:64,m=_.context()("textarea.note.render-helper-width",{value:r?r:"",wrap:"on",style:{"font-size":C+"px","font-family":this.opState.fontFamily(),"line-height":"normal"}}),v=_.context()("textarea.note.render-helper-height",{value:r?r:"",wrap:"on",style:{width:b[0]+"px",color:this.opState.textColor,"font-size":C+"px","font-family":this.opState.fontFamily(),"line-height":"normal"}}),y=_.context()("textarea.note",{value:r?r:"",wrap:"on",style:{height:b[1]+"px",width:b[0]+"px",color:S.POSTIT.DEFAULT_TEXT_COLOR,"font-size":C+"px","font-family":this.opState.fontFamily(),"line-height":"normal"},onkeydown:function(t){if(t)return w&&13===t.which?(t.preventDefault(),void t.stopPropagation()):void setTimeout(function(){h.calculateTextField(t.target.value)},0)},onkeyup:function(t){t&&t.which&&27===t.which&&h.textRemove(t)}}),p=_(".aww-post-it#postit",{style:{left:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[0];return h.contextMenu.positionChange(e),e+"px"}),top:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[1];return h.contextMenu.positionChange(null,e),e+"px"}),"background-color":x.transform(this.opState.textColor,function(t){return"#000000"===t||"rgb(0, 0, 0)"===t?S.POSTIT.DEFAULT_COLOR:t}),"padding-top":b[1]*S.POSTIT.PADDING_TOP+"px","box-shadow":S.POSTIT.SHADOW_SIZE+"px "+S.POSTIT.SHADOW_SIZE+"px 10px rgba(0,0,0,.3)"}},[y,m,v]),s=_(".aww-post-it-wrapper",[p])):s=_.context()("textarea.aww-textarea",{placeholder:"Type here",value:r||e?r||e:"",wrap:"off",style:{left:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[0];return h.contextMenu.positionChange(e),e+"px"}),top:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[1];return h.contextMenu.positionChange(null,e),e+"px"}),cursor:"text",width:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[0];return l.getBoundingClientRect().width-e+"px"}),height:x.transform(this.point,function(t){var e=h.canvasToWrapperCoords(t)[1];return l.getBoundingClientRect().height-e+"px"}),color:x.transform(this.opState.textColor,function(t){return t}),"font-size":x.transform(this.opState.fontSize,function(t){return t+"px"}),"font-family":this.opState.fontFamily(),"line-height":this.lineHeight.toString(),"font-weight":a?a:this.fontWeight,"font-style":this.fontStyle,overflow:"hidden",display:"block"},onkeydown:function(t){t&&t.which&&27===t.which&&h.textRemove()}}),this.container.appendChild(s),setTimeout(function(){return L(s,"show")},50),this.el=s,s.focus(),O("debug","textarea appended",s)}},onPenDown:function(t){if(t){var e={opStateColor:this.opState.textColor,opStateSize:this.opState.fontSize,sizes:S.FONT_SIZES},n=this.isPostitInTheGame()?"postit":"text";if(this.contextMenu.initMenu(n,this,e),!this.point||!this.el){c=void 0,this.pg=this.board.currentPage(),a=this.pageTextAndEraserOps();for(var r=a.length-1;r>=0;r--){var i=a[r];if("text"===i.op&&!i.delete&&!i.editedOpid&&i.pg===this.pg){var o=this.wrapperToCanvasCoords(t.normalizedPoint);if(o[0]>=i.textPoint[0]&&o[0]<=i.textPoint[0]+i.maxWidth&&o[1]>=i.textPoint[1]&&o[1]<=i.textPoint[1]+i.maxHeight)return c=i,this.showTextArea(t,void 0,!0)}}return this.showTextArea(t)}if(y){var s=this.wrapperToCanvasCoords([p.offsetWidth,p.offsetHeight]);s=[s[0]*this.zoomLevel(),s[1]*this.zoomLevel()],t.normalizedPoint[0]<this.point()[0]+s[0]&&t.normalizedPoint[0]>this.point()[0]+.95*s[0]&&t.normalizedPoint[1]<this.point()[1]+s[1]&&t.normalizedPoint[1]>this.point()[1]+.95*s[1]?f=[s[0]-t.normalizedPoint[0]+this.point()[0],s[1]-t.normalizedPoint[1]+this.point()[1]-s[1]*S.POSTIT.PADDING_TOP]:t.target===p?(l=!0,g=t.normalizedPoint):t.target!==y&&t.target!==v&&this.textSave()}else{var u=[this.el.style.width,this.el.style.height],d=this.getTextDim(),h=this.wrapperToCanvasCoords(t.normalizedPoint),m=this.wrapperToCanvasCoords(this.point());h[0]>=m[0]&&h[0]<=m[0]+d[0]&&h[1]>=m[1]&&h[1]<=m[1]+d[1]?(this.el.style.width=u[0],this.el.style.height=u[1]):this.textSave(d)}}},onPenUp:function(t){if(!u){t.preventDefault(),t.stopPropagation(),f=void 0,l=!1,this.resetFields();var e=y?y:this.el;e&&e!==document.activeElement&&this.focusElAfterLastChar(e)}},onPenMove:function(t){if(!u)if(y&&(y.style.cursor="default"),f){var e=t.normalizedPoint[0]-this.point()[0]+f[0],n=t.normalizedPoint[1]-this.point()[1]+f[1];b=[e,n],y.style.width=e+"px",y.style.height=n+"px";var i=n*S.POSTIT.PADDING_TOP;p.style.paddingTop=i+"px",v.style.width=e+"px",h.calculateTextField(y.value)}else if(l){var o=t.normalizedPoint[0]-g[0],c=t.normalizedPoint[1]-g[1];this.point([this.point()[0]+o,this.point()[1]+c]),g=t.normalizedPoint}else{var d=this.wrapperToCanvasCoords(t.normalizedPoint);s?r([s],this.pg,d,this):r(a,this.pg,d,this)}},getTextDim:function(){return h.el.style.width="0px",h.el.style.height="0px",""===h.el.value?[0,0]:h.wrapperToCanvasCoords([h.el.scrollWidth,h.el.scrollHeight])},returnedClickedOpOnCanvas:function(t){s=t},textSave:function(t){if(!this.point||""===this.el.value&&!c)return void this.textRemove();var e,n=this.el,r=this.wrapperToCanvasCoords(this.point()),i=0,o=this.lineHeight;this.isPostitInTheGame()&&(i=c?c.postitShadowSize:2*S.POSTIT.SHADOW_SIZE/this.zoomLevel(),t=this.wrapperToCanvasCoords([p.offsetWidth,p.offsetHeight]),y.value.length&&(e=this.applyLineBreaks(y)+1,this.calculateTextField(y.value),o=v.scrollHeight/e/this.zoomLevel(),1===e&&(o/=2)));var s={op:"text",pg:this.pg,text:y?y.value.trim():n.value.trim(),textPoint:r,maxWidth:t[0],maxHeight:t[1],color:h.isPostitInTheGame()?p.style.backgroundColor:n.style.color,fontFamily:this.opState.fontFamily(),fontSize:h.isPostitInTheGame()?C/this.zoomLevel():this.draw.roundToDecPoints(this.opState.fontSize()/this.zoomLevel(),6),lineHeight:o,fontWeight:h.isPostitInTheGame()?S.POSTIT.WEIGHT:this.fontWeight,fontStyle:this.fontStyle,editText:!0,isPostit:h.isPostitInTheGame(),postitShadowSize:i},u=JSON.parse(JSON.stringify(s));return c?(s.editedOpid=c.opid,s.initData={textPoint:c.textPoint,fontSize:c.fontSize,lineHeight:c.lineHeight,color:c.color,maxWidth:c.maxWidth,maxHeight:c.maxHeight,text:c.text},this.board.setDeleteFlags([c],!1),this.board.alterText(s,this.pageOps()),this.dispatcher.emit("do-redraw")):this.drawingOperations.doOp(s),this.save(s),O("debug","text save"),a=this.allOps(),n.parentNode.removeChild(n),this.point=void 0,this.el=void 0,v=void 0,m=void 0,y=void 0,p=void 0,c=void 0,this.contextMenu.hideMenu(),u},textRemove:function(){this.point&&(c&&this.board.setDeleteFlags([c],!1),this.removeDOMElements())},removeDOMElements:function(){var t=this.el;O("debug","textarea cancel"),this.contextMenu.hideMenu(),L(t,k),setTimeout(function(){return t.parentNode.removeChild(t)},400),this.point=void 0,this.el=void 0,v=void 0,m=void 0,y=void 0,p=void 0},getSelectedOps:function(){return c?[{op:c}]:[]},getOpsToDuplicate:function(){var t;if(h.isPostitInTheGame())t=h.textSave();else{var e=h.getTextDim();t=h.textSave(e)}if(t)return{ops:[t],offset:[t.maxWidth,t.maxHeight]}},isPostitInTheGame:function(){return!c&&this.isPostit||c&&c.isPostit},applyLineBreaks:function(t){if(t.setAttribute("wrap","off"),!t.wrap){var e=t.cloneNode(!0);e.value=t.value,t.parentNode.replaceChild(e,t),t=e}var n=t.value;t.value="";for(var r=t.scrollWidth,i=-1,o=0;o<n.length;o++){var a=n.charAt(o);if(" "!=a&&"-"!=a&&"+"!=a||(i=o),t.value+=a,t.scrollWidth>r){var s="";if(i>=0){for(var c=i+1;c<o;c++)s+=n.charAt(c);i=-1}s+=a,t.value=t.value.substr(0,t.value.length-s.length).trim(),t.value+="\n"+s}}t.setAttribute("wrap","")
;for(var u=0,l=0;l<t.value.length;u+=+("\n"===t.value[l++]));return u},focusElAfterLastChar:function(t){t.focus();var e=t.value;t.value="",t.value=e},calculateTextField:function(t){for(var e=S.POSTIT.MAX_COLUMNS,n=S.POSTIT.MAX_ROWS,r=t.split(/(\r\n|\n|\r| )/gm),i=0;i<r.length;i++)if(r[i].length>e)return r[i]=r[i].substring(0,e),void(y.value=r.join(""));m.value=t,v.value=t;var o=m.scrollWidth,a=v.scrollHeight;if(o>b[0]-2*S.POSTIT.TEXTAREA_PADDING||a>b[1]-S.POSTIT.TEXTAREA_PADDING)for(;(o>b[0]-2*S.POSTIT.TEXTAREA_PADDING||a>b[1]-S.POSTIT.TEXTAREA_PADDING)&&C>S.POSTIT.MIN_FONT_SIZE;)C-=1,this.setHelperTextareaSize(C),o=m.scrollWidth,a=v.scrollHeight;else if(o>20&&C<=S.POSTIT.MAX_FONT_SIZE){do{this.setHelperTextareaSize(C),o=m.scrollWidth,a=v.scrollHeight,C+=1}while(o<b[0]-2*S.POSTIT.TEXTAREA_PADDING&&a<b[1]-S.POSTIT.TEXTAREA_PADDING&&C<=66);C-=2,this.setHelperTextareaSize(C)}y.style.fontSize=C+"px",w=this.applyLineBreaks(v)+1>=n},setHelperTextareaSize:function(t){m.style.fontSize=t+"px",v.style.fontSize=t+"px"},pageTextAndEraserOps:function(){var t=this;return I.filter(this.allOps(),function(e){return(e.pg||0)===t.board.currentPage()&&!e.delete&&!e.editedOpid&&("text"===e.op||e.eraser)})},showHelper:function(t){if(t){var e,n=(this.container.querySelector("canvas"),A.getOpOutline(t)),r=n.x,i=n.y,o=n.width,a=n.height;this.helper||(e=T(this.container),e.addClass("aww-select-outline"),e.addClass("aww-text-outline"),this.helper=e.rect(0,0)),r=r*this.zoomLevel()+this.canvasOffset.x-2,i=i*this.zoomLevel()+this.canvasOffset.y-2,o=o*this.zoomLevel()+4,a=a*this.zoomLevel()+4,this.helper.x(r).y(i).width(o).height(a)}},hideHelper:function(){var t=this.container.querySelector(".aww-text-outline");t&&t.parentNode===this.container&&(this.container.removeChild(t),this.helper=null)},resetFields:function(){s=void 0,h.dispatcher.emit("change-cursor","inherit"),h.pg=h.board.currentPage(),h.hideHelper()},cancel:function(){if(this.point)if(y)this.textSave();else{this.el.style.width="0px",this.el.style.height="0px",v=void 0,m=void 0,y=void 0,p=void 0;var t=this.wrapperToCanvasCoords([this.el.scrollWidth,this.el.scrollHeight]);this.textSave(t)}this.hideHelper()},disableDispatchers:function(){d=!1}}},{"../../../common/config":5,"../../../common/drawing":6,"../lodash.custom":12,"amp-add-class":41,debug:61,hyperscript:72,observable:80,"svg.js":91}],28:[function(t,e,n){"use strict";var r=t("hyperscript");e.exports={op:"window",oneTime:!0,init:function(){var t=this.container.getBoundingClientRect();console.log(this.container),this.save({op:"window",width:t.width,height:t.height})},stateless:!0,onReceive:function(t,e){console.log(t);var n="window-size-helper-"+t.uid,i=e.container.querySelector("."+n);i?(i.style.width=t.width+"px",i.style.height=t.height+"px"):e.container.appendChild(r(".window-size-helper."+n,{style:{width:t.width+"px",height:t.height+"px"}}))}}},{hyperscript:72}],29:[function(t,e,n){"use strict";function r(t){var e,n,r=t.dispatcher,a=t.board,s=t.socketEmitter,c=a.isAudioActive,u={peerConnectionConstraints:{},receiveMedia:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},enableDataChannels:!1,logger:{log:g.bind(g,"debug"),warn:g.bind(g,"warn"),error:g.bind(g,"error")}},l={on:function(){if(!a.isConnected())throw new Error("Not connected to board");y("webrtc.bundle.js",function(){n=new window.WebRTC(u),e=i(n,r,s,a.currentUser())})},off:function(){o(n,r,s,e)}};r.sub("webrtc-on",function(){c()||(l.on(),c(!0))}),r.sub("webrtc-off",function(){c()&&(l.off(),c(!1))}),r.sub("webrtc-toggle",function(){c()?l.off():l.on(),c(!c())})}function i(t,e,n,r){t.on("message",function(t){return a(n,t)}),t.on("localStream",function(i){u(t,n,r,i,function(t){t&&(p("debug",t),e.emit("error",t),i.stop())})}),t.on("peerStreamAdded",f),t.on("peerStreamRemoved",d),p("Starting local audio","user id:",r),t.startLocalMedia({video:!1,audio:!0},function(t){t&&(p("WebRTC error while getting local media",t),e.emit("show-chat-message",[{op:"chat",text:"There has been an error while connecting audio. Check if you allowed awwapp.com to use your microphone or contact us at dorotea@awwapp.com.",link:{text:"Check how to enable microphone",url:"https://awwapp.com//info/audio-call-help"},type:"error"}]),e.emit("audio-connection-changed",!1))});var i=function(n){return s(t,r.uid,n,e)},o=function(e){return c(t,e)};return e.subMany({"webrtc-message":i,"update-user":o}),[i,o]}function o(t,e,n,r){t&&(t.off("message"),t.off("localStream"),t.off("peerStreamAdded"),t.off("peerStreamRemoved"),n("webrtc:message",{inChannel:!1,type:"join"}),e.off("webrtc-message",r[0]),e.off("update-user",r[1]),t.removePeers())}function a(t,e){t("webrtc:message",e)}function s(t,e,n,r){if(p("Got rtc message",e,n.type),n.to===e||!n.inChannel){var i=t.getPeers().filter(function(t){return t.id===n.from})[0];if(i||n.inChannel===!1){if(i&&n.inChannel===!1)return i.end(),void p("User left audio call")}else{if("offer"!==n.type)return void p("No existing peer found for message",n.type);p("Got offer from user",n.from,"creating peer"),i=t.createPeer({id:n.from,type:"audio",enableDataChannels:!1}),r.emit("user-joined-call",n.from)}p("Handling message from user",i.id,n.type),i.handleMessage(n)}}function c(t,e){"0"===e.user.status&&t.removePeers(e.user.uid)}function u(t,e,n,r,i){return p("Got local stream, tell server that we're ready",r),e("webrtc:message",{inChannel:!0,type:"join"},function(o,a){if(p("debug","Webrtc initial data",a),o||a.error)return i(o||a.error);h(a.peers,function(e){e!==n&&(p("Initiating peer connection with",e),t.createPeer({id:e,type:"audio",enableDataChannels:!1}).start())}),l(e,r),i()})}function l(t,e){var n=m(e);n.on("speaking",function(){t("webrtc:hark",{speaking:!0})}),n.on("stopped_speaking",function(){t("webrtc:hark",{speaking:!1})})}function f(t){p("Got remote stream",t.id),v(t.stream)}function d(){}var h=t("./lodash.custom").each,p=t("debug")("awwapp:p2p"),g=t("debug")("awwapp:webrtc-lib"),m=t("hark"),v=t("attachmediastream"),y=t("./utils/utils").loadjs;p=p.bind(p,"debug"),e.exports=r},{"./lodash.custom":12,"./utils/utils":36,attachmediastream:46,debug:61,hark:71}],30:[function(t,e,n){"use strict";var r=t("debug")("awwapp:socket"),i=t("./utils/utils").loadjs,o=e.exports=function(t,e){function n(n){r("debug","Loading socket.io module"),i("socket.io.js",function(){r("debug","got socket module"),a=o.socketInit(t,e.apiKey,n),s=0,c=0})}var a,s=0,c=0;return t.subMany({"socket-init":function(t){r("debug","Got socket init",t),a||n(t)},"socket-close":function(){r("debug","Got socket close"),a&&setTimeout(function(){return a.disconnect()})},"socket-toggle":function(t){r("debug","Got socket toggle"),a&&a.connected?setTimeout(function(){return a.disconnect()}):n(t)}}),function(t,e,n){var i=new Date;a?a.emit(t,e,function(e){var o=new Date,a=o-i;if(o-i>2e3&&(r("Slow socket reply: "+t+" in "+a+"ms",e),s++,c+=a,s>20&&(r("Average slow rtt",c/s),Raven.captureMessage("Multiple slow socket replies",{level:"warning",extra:{averageSlowRtt:c/s}}),s=0,c=0)),e.error){var u=new Error(e.error);if(!n)throw u;return n(u,e)}n&&n(null,e)}):r("Error emitting "+t+": not connected to socket")}};o.socketInit=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="https://awwapp.com/";r("Connecting to socket url:",i,"query: ",{apiKey:e}),r("socket data:",n);var o=window.io(i,{path:"/api/v2/socket.io",forceNew:!0,timeout:5e3,transports:["websocket"],query:{apiKey:e}});return o.on("connect",function(){t.emit("socket-connect",{autojoin:n.autojoin,boardLink:n.boardLink}),r("Connected to socket")}),o.on("disconnect",function(){t.emit("socket-disconnect"),r("Disconnected from server"),o=void 0}),o.on("connect_timeout",function(e){r("debug","Socket timeout:",e),t.emit("socket-error",{err:e})}),o.on("ready",function(t){r("debug","Socket ready",t)}),o.on("error",function(e){r("debug","Socket error:",e),t.emit("socket-error",{err:e})}),o.on("board:ops",function(e){t.emit("receive-ops",{source:"socket",ops:e})}),o.on("board:changeBoardName",function(e){t.emit("board-info-changed",e)}),o.on("board:pdfExported",function(e){if(t.emit("pdf-exported",e.pdfLink,e.err),e.err)return void t.emit("flash-message","Sorry but something happened while exporting the PDF. You can always try again or contact us if that doesn'n work. "+JSON.stringify(err),"error",10);var e={message:"Hey, here's the PDF you requested. Enjoy :)",link:{src:e.pdfLink,newTab:!0,text:"Download",target:"_blank"}};t.emit("show-message",e)}),o.on("user:data",function(e){t.emit("update-user",{user:e})}),o.on("webrtc:message",function(e){t.emit("webrtc-message",e)}),o.on("webrtc:hark",function(e){t.emit("webrtc-hark",e)}),o.on("notification",function(e){e&&e.type&&("pdf-ready"===e.type?(r("debug","Got pdf-ready notification, url = "+e.url),t.emit("show-message",'Your PDF document is ready, <a target="_blank" href="'+e.url+'">click here</a> to download',"success",7)):t.emit("notification",e))}),o}},{"./utils/utils":36,debug:61}],31:[function(t,e,n){"use strict";function r(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}var i={admin:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M18.5 17h-17c-0.827 0-1.5-0.673-1.5-1.5v-11c0-0.827 0.673-1.5 1.5-1.5h17c0.827 0 1.5 0.673 1.5 1.5v11c0 0.827-0.673 1.5-1.5 1.5zM1.5 4c-0.276 0-0.5 0.224-0.5 0.5v11c0 0.276 0.224 0.5 0.5 0.5h17c0.276 0 0.5-0.224 0.5-0.5v-11c0-0.276-0.224-0.5-0.5-0.5h-17z" />\n    <path d="M8.501 14c-0-0-0-0-0.001 0h-5c-0.276 0-0.5-0.224-0.5-0.5 0-0.066 0.011-0.661 0.388-1.265 0.352-0.563 1.091-1.235 2.612-1.235s2.259 0.672 2.612 1.235c0.338 0.541 0.382 1.074 0.388 1.227 0.001 0.012 0.001 0.025 0.001 0.038 0 0.276-0.224 0.5-0.5 0.5zM4.117 13h3.766c-0.035-0.086-0.081-0.177-0.14-0.267-0.322-0.487-0.908-0.733-1.743-0.733s-1.421 0.247-1.743 0.733c-0.059 0.090-0.105 0.18-0.14 0.267z" />\n    <path d="M16.5 8h-5c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h5c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z" />\n    <path d="M15.5 10h-4c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h4c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z" />\n    <path d="M15.5 12h-4c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h4c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z" />\n    <path d="M6 10c-1.103 0-2-0.897-2-2s0.897-2 2-2 2 0.897 2 2c0 1.103-0.897 2-2 2zM6 7c-0.551 0-1 0.449-1 1s0.449 1 1 1 1-0.449 1-1-0.449-1-1-1z" />\n    <path d="M16.5 14h-5c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h5c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z" />\n</svg>\n',close:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10.707 10.5l5.646-5.646c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-5.646 5.646-5.646-5.646c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l5.646 5.646-5.646 5.646c-0.195 0.195-0.195 0.512 0 0.707 0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l5.646-5.646 5.646 5.646c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146c0.195-0.195 0.195-0.512 0-0.707l-5.646-5.646z" />\n</svg>\n',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n<path d="M19.715 6.913c-0.026-0.155-0.077-0.305-0.155-0.446-0.114-0.209-0.276-0.38-0.472-0.506-0.002-0.001-0.003-0.002-0.005-0.003-0.010-0.007-0.021-0.013-0.032-0.020-0.096-0.059-0.205-0.108-0.327-0.145-0.024-0.007-0.049-0.014-0.074-0.021l-6.060-1.515c-0.162-0.040-0.34-0.061-0.53-0.061-0.599 0-1.25 0.205-1.658 0.523l-7.421 5.772c-0.51 0.396-1.069 1.187-1.273 1.799l-1.368 4.103c-0.129 0.386-0.094 0.791 0.098 1.14s0.515 0.596 0.909 0.694l6.060 1.515c0.162 0.040 0.34 0.061 0.53 0.061 0.474 0 0.981-0.129 1.374-0.341 0.091-0.046 0.186-0.106 0.284-0.182l7.421-5.772c0.51-0.396 1.069-1.187 1.273-1.799l1.368-4.103c0.092-0.275 0.111-0.504 0.057-0.694zM12.062 5.197c0.107 0 0.206 0.011 0.287 0.031l6.033 1.508-7.4 5.755c-0.236 0.184-0.666 0.312-1.044 0.312-0.107 0-0.206-0.011-0.287-0.031l-6.033-1.508 7.4-5.755c0.236-0.184 0.666-0.312 1.044-0.312zM1.316 17.052c-0.056-0.102-0.065-0.224-0.026-0.343l1.368-4.103c0.092-0.276 0.408-0.45 0.691-0.379 0 0 0 0 0 0l6.060 1.515c0.121 0.030 0.219 0.103 0.275 0.205s0.065 0.224 0.026 0.343l-1.368 4.103c-0.092 0.276-0.409 0.45-0.691 0.379l-1.030-0.257c-0 0-0-0-0-0l-5.030-1.257c-0.121-0.030-0.219-0.103-0.275-0.206zM16.404 12.719l-6.907 5.372 1.162-3.485c0.143-0.429 0.581-1.049 0.938-1.326l6.907-5.372-1.162 3.485c-0.143 0.429-0.581 1.048-0.938 1.326z"/>\n</svg>\n',eraserArea:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n  <g transform="matrix(0,-1.2651885,1.2651885,0,-2.6518851,22.651883)">\n    <path\n       d="m 8.8502543,11.533526 c -0.1012384,0 -0.1994083,-0.04065 -0.2707351,-0.11274 -0.071327,-0.0721 -0.1127428,-0.170264 -0.1127428,-0.270735 0,-0.100474 0.040649,-0.200175 0.1127428,-0.270734 0.071327,-0.07133 0.170264,-0.112741 0.2707351,-0.112741 0.1004714,0 0.2001751,0.04065 0.2707349,0.112741 0.071327,0.07133 0.1127429,0.170264 0.1127429,0.270734 0,0.100474 -0.040649,0.200175 -0.1127429,0.270735 -0.071327,0.07133 -0.1702639,0.11274 -0.2707349,0.11274" />\n    <path\n       d="m 16.894614,15.696329 c -0.04294,0.460939 -0.245425,0.826777 -0.56908,1.032321 -0.182534,0.115045 -0.393448,0.173331 -0.625835,0.173331 -0.592856,0 -1.230962,-0.381943 -1.661223,-0.984003 l -0.134218,-0.20631 c -0.272268,-0.462474 -0.397282,-0.970197 -0.352798,-1.441109 0.04294,-0.460939 0.245425,-0.827543 0.56908,-1.03232 0.182534,-0.115045 0.393448,-0.174099 0.625835,-0.174099 0.635038,0 1.321463,0.437931 1.749423,1.114386 0.304481,0.481647 0.446368,1.020816 0.399583,1.517803 l -7.97e-4,0 z M 8.8500272,12.300254 c -0.2753367,0 -0.6342713,-0.226252 -0.7531492,-0.473978 L 4.7100062,4.7725936 C 4.5849927,4.511829 4.6126031,4.0516562 4.7690617,3.8085316 l 0.2477265,-0.3873121 5.7582958,8.8767335 -1.9258238,0.0023 7.977e-4,0 z m 8.2930808,1.468718 c -0.573683,-0.906541 -1.492493,-1.471786 -2.3975,-1.471786 -0.374275,0 -0.732442,0.101242 -1.036156,0.292976 -0.484715,0.306782 -0.799933,0.811438 -0.900404,1.433438 L 11.80587,12.478187 c -0.0023,-0.0039 -0.0046,-0.0077 -0.0061,-0.01068 L 5.3366082,2.5047087 C 5.2660484,2.395801 5.1448696,2.3298431 5.0152542,2.3298431 l -7.669e-4,0 C 4.884105,2.3306099 4.7629261,2.3965679 4.6923663,2.5070096 L 4.1232859,3.394376 C 3.8218727,3.8652862 3.7766225,4.6000288 4.0189801,5.104685 l 3.3868717,7.054448 c 0.2446586,0.510025 0.8789301,0.908075 1.4449424,0.908075 l 2.4228098,-0.0023 1.977209,3.048644 c 0.01688,0.02837 0.03375,0.05675 0.05138,0.08437 0.573682,0.907307 1.492493,1.471786 2.397499,1.471786 0.374274,0 0.732442,-0.101243 1.035389,-0.292978 0.529199,-0.334391 0.856689,-0.905005 0.922647,-1.607537 0.06213,-0.664948 -0.12041,-1.375916 -0.514627,-2.000217" />\n    <path\n       d="m 12.685028,11.469868 c -0.05599,0 -0.111972,-0.01224 -0.165662,-0.03758 -0.190972,-0.09204 -0.271503,-0.320587 -0.179468,-0.511559 l 2.951241,-6.1479084 c 0.125019,-0.2607647 0.0974,-0.7209374 -0.05905,-0.9640621 L 14.984357,3.4214465 11.47324,8.8338454 c -0.115044,0.1779335 -0.3528,0.2285525 -0.530734,0.1127423 -0.177933,-0.11581 -0.228552,-0.3527991 -0.112741,-0.5307325 l 3.834772,-5.9116865 c 0.07056,-0.108908 0.191739,-0.1748656 0.321354,-0.1748656 l 7.37e-4,0 c 0.130382,7.669e-4 0.251562,0.066725 0.322121,0.1763995 l 0.569081,0.8881336 c 0.301412,0.47091 0.346662,1.2056527 0.104302,1.7103088 l -2.951241,6.147908 c -0.06596,0.137285 -0.203241,0.217815 -0.345894,0.217815" />\n    <path\n       d="m 4.3012931,16.902208 c -0.2323873,0 -0.4432999,-0.05828 -0.625835,-0.174099 C 3.3518032,16.523333 3.1493272,16.157495 3.1063777,15.696555 3.059594,15.198802 3.2014803,14.6604 3.5059611,14.178753 c 0.4279607,-0.677222 1.1143851,-1.114385 1.7494236,-1.114385 0.2323872,0 0.4432998,0.05828 0.6258349,0.174097 0.3236549,0.204778 0.5261309,0.570615 0.5690804,1.031555 0.044483,0.47091 -0.081297,0.979402 -0.3527992,1.440341 l -0.134217,0.207077 C 5.5330222,16.519498 4.8949159,16.901441 4.30206,16.901441 l -7.669e-4,7.37e-4 z m 3.430588,-3.005695 c -0.1779335,-0.115045 -0.4149223,-0.06443 -0.5307325,0.11274 l -0.00997,0.01534 C 7.0907071,13.401827 6.7754888,12.897172 6.2907735,12.591156 5.9878263,12.399418 5.6296585,12.298179 5.2546177,12.298179 c -0.9050064,0 -1.8238182,0.563712 -2.3975002,1.471787 -0.3942147,0.623533 -0.5775168,1.333733 -0.5146266,1.99945 0.065958,0.702531 0.3934477,1.273144 0.9226465,1.608304 0.302947,0.191739 0.6611149,0.292977 1.0353888,0.292977 0.9050064,0 1.823818,-0.563711 2.3975001,-1.471786 0.01764,-0.02761 0.034513,-0.05599 0.051385,-0.08437 l 1.0944443,-1.6873 c 0.1150442,-0.17793 0.064424,-0.414919 -0.1127424,-0.53073 l 7.669e-4,0 z" />\n  </g>\n</svg>\n',select:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n<path d="M17 8c-0.412 0-0.794 0.125-1.113 0.339-0.274-0.779-1.016-1.339-1.887-1.339-0.412 0-0.794 0.125-1.113 0.339-0.274-0.779-1.016-1.339-1.887-1.339-0.364 0-0.706 0.098-1 0.269v-3.269c0-1.103-0.897-2-2-2s-2 0.897-2 2v7.373l-1.346-2.333c-0.261-0.475-0.687-0.813-1.199-0.953-0.499-0.136-1.018-0.064-1.462 0.202-0.907 0.544-1.253 1.774-0.77 2.742 0.030 0.061 0.668 1.368 2.66 5.35 0.938 1.875 1.967 3.216 3.059 3.984 0.857 0.603 1.449 0.634 1.559 0.634h5c0.848 0 1.632-0.245 2.331-0.73 0.676-0.468 1.259-1.152 1.734-2.033 0.939-1.743 1.435-4.246 1.435-7.237 0-1.103-0.897-2-2-2zM16.685 16.763c-0.549 1.021-1.548 2.237-3.185 2.237h-4.99c-0.039-0.003-0.46-0.050-1.095-0.525-0.633-0.474-1.605-1.472-2.638-3.54-2.027-4.054-2.65-5.331-2.656-5.343-0.001-0.002-0.001-0.003-0.002-0.004-0.251-0.503-0.073-1.162 0.389-1.439 0.208-0.125 0.451-0.158 0.685-0.095 0.249 0.068 0.458 0.236 0.587 0.472 0.002 0.003 0.004 0.007 0.006 0.010l1.561 2.705c0.319 0.583 0.678 0.828 1.067 0.729 0.39-0.099 0.587-0.489 0.587-1.157v-7.812c0-0.551 0.449-1 1-1s1 0.449 1 1v6.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-1.5c0-0.551 0.449-1 1-1s1 0.449 1 1v1.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-0.5c0-0.551 0.449-1 1-1s1 0.449 1 1v1.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-0.5c0-0.551 0.449-1 1-1s1 0.449 1 1c0 2.826-0.455 5.165-1.315 6.763z" fill="#000000"></path>\n</svg>\n',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M13.5 9c-1.378 0-2.5-1.122-2.5-2.5s1.122-2.5 2.5-2.5 2.5 1.122 2.5 2.5-1.122 2.5-2.5 2.5zM13.5 5c-0.827 0-1.5 0.673-1.5 1.5s0.673 1.5 1.5 1.5 1.5-0.673 1.5-1.5-0.673-1.5-1.5-1.5z" />\n    <path d="M18.5 0h-17c-0.827 0-1.5 0.673-1.5 1.5v17c0 0.827 0.673 1.5 1.5 1.5h17c0.827 0 1.5-0.673 1.5-1.5v-17c0-0.827-0.673-1.5-1.5-1.5zM1 18.5v-4.807l4.197-4.617c0.085-0.093 0.196-0.145 0.314-0.147s0.231 0.048 0.318 0.139l9.5 9.932h-13.83c-0.276 0-0.5-0.224-0.5-0.5zM19 18.5c0 0.276-0.224 0.5-0.5 0.5h-1.786l-10.161-10.623c-0.281-0.294-0.655-0.452-1.053-0.447s-0.768 0.173-1.042 0.474l-3.457 3.803v-10.707c0-0.276 0.224-0.5 0.5-0.5h17c0.276 0 0.5 0.224 0.5 0.5v17z" />\n</svg>\n',presentation:'<svg xmlns="http://www.w3.org/2000/svg"  width="20" height="20" viewBox="0 0 20 20">\n    <path d="M17.5 20h-16c-0.827 0-1.5-0.673-1.5-1.5v-16c0-0.827 0.673-1.5 1.5-1.5h16c0.827 0 1.5 0.673 1.5 1.5v16c0 0.827-0.673 1.5-1.5 1.5zM1.5 2c-0.276 0-0.5 0.224-0.5 0.5v16c0 0.276 0.224 0.5 0.5 0.5h16c0.276 0 0.5-0.224 0.5-0.5v-16c0-0.276-0.224-0.5-0.5-0.5h-16z" fill="#000000"></path>\n    <path d="M6.5 17h-2c-0.276 0-0.5-0.224-0.5-0.5v-9c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v9c0 0.276-0.224 0.5-0.5 0.5zM5 16h1v-8h-1v8z" fill="#000000"></path>\n    <path d="M10.5 17h-2c-0.276 0-0.5-0.224-0.5-0.5v-12c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v12c0 0.276-0.224 0.5-0.5 0.5zM9 16h1v-11h-1v11z" fill="#000000"></path>\n    <path d="M14.5 17h-2c-0.276 0-0.5-0.224-0.5-0.5v-5c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v5c0 0.276-0.224 0.5-0.5 0.5zM13 16h1v-4h-1v4z" fill="#000000"></path>\n</svg>\n',postit:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n<path d="M17.854 5.646l-4.5-4.5c-0.094-0.094-0.221-0.146-0.354-0.146h-9.5c-0.827 0-1.5 0.673-1.5 1.5v16c0 0.827 0.673 1.5 1.5 1.5h13c0.827 0 1.5-0.673 1.5-1.5v-12.5c0-0.133-0.053-0.26-0.146-0.354zM16.793 6h-3.293c-0.276 0-0.5-0.224-0.5-0.5v-3.293l3.793 3.793zM17 18.5c0 0.276-0.224 0.5-0.5 0.5h-13c-0.276 0-0.5-0.224-0.5-0.5v-16c0-0.276 0.224-0.5 0.5-0.5h8.5v3.5c0 0.827 0.673 1.5 1.5 1.5h3.5v11.5z" fill="#000000"></path>\n</svg>\n',ok:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n    <path d="M5.5 17.5c-0.128 0-0.256-0.049-0.354-0.146l-5-5c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l4.646 4.646 13.646-13.646c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-14 14c-0.098 0.098-0.226 0.146-0.354 0.146z" />\n</svg>\n',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19.104 0.896c-0.562-0.562-1.309-0.871-2.104-0.871s-1.542 0.309-2.104 0.871l-12.75 12.75c-0.052 0.052-0.091 0.114-0.116 0.183l-2 5.5c-0.066 0.183-0.021 0.387 0.116 0.524 0.095 0.095 0.223 0.146 0.354 0.146 0.057 0 0.115-0.010 0.171-0.030l5.5-2c0.069-0.025 0.131-0.065 0.183-0.116l12.75-12.75c0.562-0.562 0.871-1.309 0.871-2.104s-0.309-1.542-0.871-2.104zM5.725 17.068l-4.389 1.596 1.596-4.389 11.068-11.068 2.793 2.793-11.068 11.068zM18.396 4.396l-0.896 0.896-2.793-2.793 0.896-0.896c0.373-0.373 0.869-0.578 1.396-0.578s1.023 0.205 1.396 0.578c0.373 0.373 0.578 0.869 0.578 1.396s-0.205 1.023-0.578 1.396z"/>\n</svg>\n',marker:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n    <path d="M19.854 9.646c-0.195-0.195-0.512-0.195-0.707 0l-3.586 3.586c-0.585 0.585-1.537 0.585-2.121 0l-4.672-4.672c-0.282-0.282-0.437-0.658-0.437-1.061s0.155-0.779 0.437-1.061l3.586-3.586c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-3.586 3.586c-0.471 0.471-0.73 1.098-0.73 1.768 0 0.285 0.048 0.563 0.138 0.824l-7.322 7.322c-0.094 0.094-0.146 0.221-0.146 0.354v1.5c0 0.276 0.224 0.5 0.5 0.5h9.5c0.133 0 0.26-0.053 0.354-0.146l3.322-3.322c0.261 0.091 0.539 0.138 0.824 0.138 0.669 0 1.297-0.259 1.768-0.73l3.586-3.586c0.195-0.195 0.195-0.512 0-0.707zM9.793 17h-8.793v-0.793l7.002-7.002c0.020 0.021 0.039 0.042 0.059 0.062l4.672 4.672c0.020 0.020 0.041 0.040 0.062 0.059l-3.002 3.002z" />\n</svg>\n',rectangle:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M1.5 0C.67 0 0 .67 0 1.5v17c0 .83.67 1.5 1.5 1.5h17c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5h-17zM2 1h16c.554 0 1 .446 1 1v16c0 .554-.446 1-1 1H2c-.554 0-1-.446-1-1V2c0-.554.446-1 1-1z" fill-rule="evenodd"/></svg>',rectangleFilled:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M1.5 0C.67 0 0 .67 0 1.5v17c0 .83.67 1.5 1.5 1.5h17c.83 0 1.5-.67 1.5-1.5v-17c0-.83-.67-1.5-1.5-1.5h-17zM2 1h16c.554 0 1 .446 1 1v16c0 .554-.446 1-1 1H2c-.554 0-1-.446-1-1V2c0-.554.446-1 1-1z" fill-rule="evenodd"/><path d="m 2.0000003,0.9999992 15.9999997,0 c 0.554,0 1,0.4460001 1,1.0000001 l 0,16.0000017 c 0,0.554 -0.446,1 -1,1 l -15.9999997,0 c -0.554,0 -1,-0.446 -1,-1 l 0,-16.0000017 c 0,-0.554 0.446,-1.0000001 1,-1.0000001 z" opacity=".3" fill-rule="evenodd"/></svg>',ellipse:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M 10 0 A 10 10 0 0 0 0 10 A 10 10 0 0 0 10 20 A 10 10 0 0 0 20 10 A 10 10 0 0 0 10 0 z M 10 1 A 9 9 0 0 1 19 10 A 9 9 0 0 1 10 19 A 9 9 0 0 1 1 10 A 9 9 0 0 1 10 1 z" fill-rule="evenodd"/></svg>',ellipseFilled:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M 10 0 A 10 10 0 0 0 0 10 A 10 10 0 0 0 10 20 A 10 10 0 0 0 20 10 A 10 10 0 0 0 10 0 z M 10 1 A 9 9 0 0 1 19 10 A 9 9 0 0 1 10 19 A 9 9 0 0 1 1 10 A 9 9 0 0 1 10 1 z" fill-rule="evenodd"/><path d="M 10,1.0000005 A 9,9 0 0 1 19,10.000001 9,9 0 0 1 10,19 9,9 0 0 1 0.9999999,10.000001 9,9 0 0 1 10,1.0000005 Z" opacity=".3" fill-rule="evenodd"/></svg>',lineStraight:'<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 21.999999 21.999999"><path d="m 20.449015,17.483493 -18.7500091,0 c -0.34375,0 -0.6250001,-0.2813 -0.6250001,-0.624999 0,-0.343801 0.2812501,-0.625001 0.6250001,-0.625001 l 18.7500091,0 c 0.34375,0 0.625,0.2812 0.625,0.625001 0,0.343699 -0.28125,0.624999 -0.625,0.624999"/><path d="M 17.383518,2.0332412 3.8674663,20.812601 c -0.247795,0.344288 -0.678849,0.461654 -0.957809,0.260879 -0.279042,-0.200835 -0.304534,-0.646791 -0.05674,-0.991079 L 16.368969,1.3030413 c 0.247795,-0.34428819 0.678768,-0.46171289 0.95781,-0.2608782 0.27896,0.2007752 0.304533,0.6467899 0.05674,0.9910781"/></svg>',mark:'<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24.999999 24.999999"><path d="M12.499999.625c-.34375 0-.625.2799999-.625.6249999l0 4.9999994c0 .345.28125.625.625.625.34375 0 .625-.28.625-.625l0-4.9999994c0-.345-.28125-.6249999-.625-.6249999M12.499999 18.124998c-.34375 0-.625.28-.625.625l0 4.999999c0 .345.28125.625.625.625.34375 0 .625-.28.625-.625l0-4.999999c0-.345-.28125-.625-.625-.625M6.8749994 12.499999c0-.345-.28125-.625-.625-.625l-4.9999994 0c-.34374994 0-.62499991.28-.62499991.625 0 .345.28124997.625.62499991.625l4.9999994 0c.34375 0 .625-.28.625-.625M23.749997 11.874999l-4.999999 0c-.34375 0-.625.28-.625.625 0 .345.28125.625.625.625l4.999999 0c.34375 0 .625-.28.625-.625 0-.345-.28125-.625-.625-.625M20.887378 10.624999c-.27 0-.5175-.175-.59875-.44625-.78375-2.6387498-2.82875-4.6824996-5.4675-5.4674995-.33125-.09875-.52-.4462499-.42125-.7774999.0975-.33125.44625-.5187499.77875-.4212499 1.4825.4412499 2.84875 1.2574998 3.95 2.3574997 1.10125 1.0999998 1.91625 2.4674997 2.3575 3.9512497.09875.3312499-.09.6787499-.42125.7774999-.05875.0175-.12.02625-.17875.02625l.0012 0zM14.999998 21.512378c-.27 0-.5175-.175-.59875-.44625-.1-.33125.09-.67875.42-.7775 2.63875-.785 4.68375-2.82875 5.46875-5.4675.09875-.33125.44625-.51875.7775-.42125.33125.0975.52.44625.42125.7775-.44125 1.48375-1.25625 2.85-2.3575 3.95125-1.1 1.10125-2.46625 1.91625-3.95 2.3575-.06125.0175-.12125.02625-.18.02625l-.0013 0zM9.999999 21.512378c-.05875 0-.12-.0087-.17875-.02625-1.4837498-.44125-2.8499997-1.25625-3.9524995-2.3575-1.1012499-1.10125-1.9149998-2.46625-2.3549997-3.95125-.10125-.33125.08875-.67875.4187499-.7775.3325-.09875.6787499.09.7799999.42125.7824999 2.6375 2.8274997 4.68125 5.4662494 5.46625.33125.09875.52.44625.42125.7775-.08125.27125-.33.4475-.59875.4475l-.00125 0zM4.1124997 10.624999c-.05875 0-.11875-.0088-.18-.02625-.33-.09875-.5174999-.44625-.4187499-.7774999C3.9537497 8.3374991 4.7699996 6.9712492 5.8687495 5.8699994 6.9699993 4.7687495 8.3362492 3.9537496 9.821249 3.5124997c.33125-.09875.67875.09.77625.4212499.10125.33125-.08875.6787499-.41875.7774999-2.6387497.7849999-4.6837495 2.8287497-5.4674994 5.4674995-.08125.27125-.3299999.4475-.5987499.4475l0-.0013z"/></svg>',resize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n    <path d="M19.5 0h-5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5h3.793l-6.146 6.146c-0.195 0.195-0.195 0.512 0 0.707 0.098 0.098 0.226 0.146 0.353 0.146s0.256-0.049 0.353-0.146l6.147-6.146v3.793c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-5c0-0.276-0.224-0.5-0.5-0.5z" />\n    <path d="M7.854 12.147c-0.195-0.195-0.512-0.195-0.707 0l-6.146 6.146v-3.793c0-0.276-0.224-0.5-0.5-0.5s-0.5 0.224-0.5 0.5v5c0 0.276 0.224 0.5 0.5 0.5h5c0.276 0 0.5-0.224 0.5-0.5s-0.224-0.5-0.5-0.5h-3.793l6.146-6.147c0.195-0.195 0.195-0.512 0-0.707z" />\n</svg>\n',rotate:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n    <path d="M2.49 4.49c1.605-1.605 3.74-2.49 6.010-2.49s4.405 0.884 6.010 2.49 2.49 3.74 2.49 6.010v1.293l2.146-2.146c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-3 3c-0.098 0.098-0.226 0.146-0.354 0.146s-0.256-0.049-0.354-0.146l-3-3c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l2.146 2.146v-1.293c0-4.136-3.364-7.5-7.5-7.5s-7.5 3.364-7.5 7.5c0 4.136 3.364 7.5 7.5 7.5 0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5c-2.27 0-4.405-0.884-6.010-2.49s-2.49-3.74-2.49-6.010c0-2.27 0.884-4.405 2.49-6.010z" />\n</svg>\n',settings:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 12c-0.066 0-0.132-0.013-0.194-0.039l-9.5-4c-0.185-0.078-0.306-0.26-0.306-0.461s0.121-0.383 0.306-0.461l9.5-4c0.124-0.052 0.264-0.052 0.388 0l9.5 4c0.185 0.078 0.306 0.26 0.306 0.461s-0.121 0.383-0.306 0.461l-9.5 4c-0.062 0.026-0.128 0.039-0.194 0.039zM1.788 7.5l8.212 3.457 8.212-3.457-8.212-3.457-8.212 3.457z" />\n    <path d="M10 15c-0.066 0-0.132-0.013-0.194-0.039l-9.5-4c-0.254-0.107-0.374-0.4-0.267-0.655s0.4-0.374 0.655-0.267l9.306 3.918 9.306-3.918c0.254-0.107 0.548 0.012 0.655 0.267s-0.012 0.548-0.267 0.655l-9.5 4c-0.062 0.026-0.128 0.039-0.194 0.039z" />\n    <path d="M10 18c-0.066 0-0.132-0.013-0.194-0.039l-9.5-4c-0.254-0.107-0.374-0.4-0.267-0.655s0.4-0.374 0.655-0.267l9.306 3.918 9.306-3.918c0.254-0.107 0.548 0.012 0.655 0.267s-0.012 0.548-0.267 0.655l-9.5 4c-0.062 0.026-0.128 0.039-0.194 0.039z" />\n</svg>\n',invite:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="share">\n    <path d="M18.5,20 L7.5,20 C6.673,20 6,19.327 6,18.5 C6,18.452 6.011,17.31 6.924,16.185 C7.449,15.539 8.165,15.027 9.052,14.663 C10.123,14.223 11.452,14.001 13,14.001 C14.548,14.001 15.876,14.224 16.948,14.663 C17.835,15.027 18.551,15.539 19.076,16.185 C19.99,17.31 20,18.452 20,18.5 C20,19.327 19.327,20 18.5,20 L18.5,20 Z M7,18.503 C7.001,18.778 7.225,19 7.5,19 L18.5,19 C18.775,19 18.999,18.777 19,18.503 C18.999,18.468 18.968,17.608 18.261,16.769 C17.287,15.612 15.468,15.001 13,15.001 C10.532,15.001 8.713,15.613 7.739,16.769 C7.032,17.609 7.001,18.468 7,18.503 L7,18.503 Z" />\n    <path d="M13,13 C10.794,13 9,11.206 9,9 C9,6.794 10.794,5 13,5 C15.206,5 17,6.794 17,9 C17,11.206 15.206,13 13,13 L13,13 Z M13,6 C11.346,6 10,7.346 10,9 C10,10.654 11.346,12 13,12 C14.654,12 16,10.654 16,9 C16,7.346 14.654,6 13,6 L13,6 Z" />\n    <path d="M4.5,20 L1.5,20 C0.673,20 0,19.327 0,18.5 C0,18.463 0.008,17.573 0.663,16.7 C1.041,16.195 1.557,15.796 2.196,15.512 C2.96,15.172 3.904,15 5.001,15 C5.18,15 5.357,15.005 5.528,15.014 C5.804,15.029 6.015,15.264 6.001,15.54 C5.987,15.816 5.751,16.028 5.475,16.013 C5.322,16.005 5.163,16.001 5.002,16.001 C1.108,16.001 1.005,18.38 1.002,18.504 C1.003,18.778 1.227,19.001 1.502,19.001 L4.502,19.001 C4.778,19.001 5.002,19.225 5.002,19.501 C5.002,19.777 4.778,20.001 4.502,20.001 L4.5,20 Z" />\n    <path d="M5,14 C3.346,14 2,12.654 2,11 C2,9.346 3.346,8 5,8 C6.654,8 8,9.346 8,11 C8,12.654 6.654,14 5,14 L5,14 Z M5,9 C3.897,9 3,9.897 3,11 C3,12.103 3.897,13 5,13 C6.103,13 7,12.103 7,11 C7,9.897 6.103,9 5,9 L5,9 Z" />\n    <g id="add" transform="translate(17.000000, 0.000000)">\n        <path d="M4.5,9 C2.01825,9 0,6.98175 0,4.5 C0,2.01825 2.01825,0 4.5,0 C6.98175,0 9,2.01825 9,4.5 C9,6.98175 6.98175,9 4.5,9 L4.5,9 Z M4.5,1 C2.57033333,1 1,2.57033333 1,4.5 C1,6.42966667 2.57033333,8 4.5,8 C6.42966667,8 8,6.42966667 8,4.5 C8,2.57033333 6.42966667,1 4.5,1 L4.5,1 Z" />\n        <path d="M4,4 L4,2.5 L4,2 L5,2 L5,2.5 L5,4 L6.5,4 L7,4 L7,5 L6.5,5 L5,5 L5,6.5 L5,7 L4,7 L4,6.5 L4,5 L2.5,5 L2,5 L2,4 L2.5,4 L4,4 Z" />\n    </g>\n</svg>\n',
share:'<svg\n   xmlns="http://www.w3.org/2000/svg"\n   viewBox="0 0 20 20">\n  <path\n     d="m 16,19 c -1.654,0 -3,-1.346 -3,-3 0,-1.654 1.346,-3 3,-3 1.654,0 3,1.346 3,3 0,1.654 -1.346,3 -3,3 M 4.0000003,13 c -1.654,0 -3.0000001,-1.345999 -3.0000001,-3 0,-1.6539999 1.3460001,-2.9999999 3.0000001,-2.9999999 1.654,0 2.9999999,1.3460001 2.9999999,2.9999999 0,1.654001 -1.3459999,3 -2.9999999,3 M 16,1.0000001 c 1.654,0 3,1.346 3,3.0000001 0,1.6539999 -1.346,2.9999999 -3,2.9999999 -1.654,0 -3,-1.3459999 -3,-2.9999999 0,-1.6540001 1.346,-3.0000001 3,-3.0000001 M 16,12 c -1.384,0 -2.606,0.707 -3.325,1.779 L 7.7730003,11.328 C 7.9200002,10.912 8.0000002,10.466 8.0000002,10 c 0,-0.4659999 -0.08,-0.9119999 -0.2269999,-1.328 L 12.675,6.2210002 c 0.718,1.0719999 1.941,1.7789999 3.325,1.7789999 2.206,0 4,-1.794 4,-3.9999999 C 20,1.7940001 18.206,1.5715776e-7 16,1.5715776e-7 13.794,1.5715776e-7 12,1.7940001 12,4.0000002 c 0,0.465 0.08,0.9119999 0.227,1.3269999 L 7.3250003,7.7780002 c -0.7180001,-1.0720001 -1.9410001,-1.778 -3.325,-1.778 C 1.7940003,6.0000002 2.5254237e-7,7.7940001 2.5254237e-7,10 c 0,2.206 1.79400004745763,4 4.00000004745763,4 1.3839999,0 2.6059999,-0.706999 3.325,-1.778999 L 12.227,14.672 C 12.080001,15.088 12,15.534 12,16 c 0,2.206 1.794,4 4,4 2.206,0 4,-1.794 4,-4 0,-2.206 -1.794,-4 -4,-4"/>\n</svg>\n',size:'<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1664 896q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/>\n</svg>\n',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/><path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"></path></svg>\n',text:'<svg viewBox="0 0 13 15" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.96,14.303 L10.39,8.307 C10.389,8.306 10.389,8.304 10.388,8.303 L6.96,0.303 C6.881,0.119 6.7,1.77635684e-15 6.5,1.77635684e-15 C6.3,1.77635684e-15 6.119,0.119 6.04,0.303 L2.612,8.303 C2.611,8.305 2.611,8.306 2.61,8.308 L0.04,14.304 C-0.069,14.558 0.049,14.852 0.303,14.961 C0.557,15.07 0.851,14.952 0.96,14.698 L3.402,9.001 L9.6,9.001 L12.042,14.698 C12.123,14.888 12.308,15.001 12.502,15.001 C12.568,15.001 12.635,14.988 12.699,14.96 C12.953,14.851 13.07,14.557 12.962,14.303 L12.96,14.303 Z M3.83,8 L6.5,1.769 L9.17,8 L3.829,8 L3.83,8 Z" />\n</svg>\n',trash:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M15.5 2h-3.5v-0.5c0-0.827-0.673-1.5-1.5-1.5h-2c-0.827 0-1.5 0.673-1.5 1.5v0.5h-3.5c-0.827 0-1.5 0.673-1.5 1.5v1c0 0.652 0.418 1.208 1 1.414v12.586c0 0.827 0.673 1.5 1.5 1.5h10c0.827 0 1.5-0.673 1.5-1.5v-12.586c0.582-0.206 1-0.762 1-1.414v-1c0-0.827-0.673-1.5-1.5-1.5zM8 1.5c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v0.5h-3v-0.5zM14.5 19h-10c-0.276 0-0.5-0.224-0.5-0.5v-12.5h11v12.5c0 0.276-0.224 0.5-0.5 0.5zM16 4.5c0 0.276-0.224 0.5-0.5 0.5h-12c-0.276 0-0.5-0.224-0.5-0.5v-1c0-0.276 0.224-0.5 0.5-0.5h12c0.276 0 0.5 0.224 0.5 0.5v1z" />\n    <path d="M12.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z" />\n    <path d="M9.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z" />\n    <path d="M6.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z" />\n</svg>\n',undo:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.51 4.49c-1.605-1.605-3.74-2.49-6.010-2.49s-4.405 0.884-6.010 2.49-2.49 3.74-2.49 6.010v1.293l-2.146-2.146c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l3 3c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l3-3c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-2.146 2.146v-1.293c0-4.136 3.364-7.5 7.5-7.5s7.5 3.364 7.5 7.5-3.364 7.5-7.5 7.5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c2.27 0 4.405-0.884 6.010-2.49s2.49-3.74 2.49-6.010c0-2.27-0.884-4.405-2.49-6.010z" />\n</svg>\n',pan:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n<path d="M17 4c-0.364 0-0.706 0.098-1 0.269v-1.269c0-1.103-0.897-2-2-2-0.412 0-0.794 0.125-1.113 0.339-0.274-0.779-1.016-1.339-1.887-1.339s-1.614 0.56-1.887 1.339c-0.318-0.214-0.701-0.339-1.113-0.339-1.103 0-2 0.897-2 2v7.373l-1.346-2.333c-0.261-0.475-0.687-0.813-1.199-0.953-0.499-0.136-1.018-0.064-1.462 0.202-0.907 0.544-1.253 1.774-0.77 2.742 0.030 0.061 0.668 1.368 2.66 5.35 0.938 1.875 1.967 3.216 3.059 3.984 0.857 0.603 1.449 0.634 1.559 0.634h5c0.851 0 1.642-0.277 2.352-0.822 0.667-0.513 1.246-1.255 1.72-2.204 0.934-1.868 1.428-4.452 1.428-7.474v-3.5c0-1.103-0.897-2-2-2zM18 9.5c0 2.867-0.457 5.296-1.322 7.026-0.564 1.128-1.574 2.474-3.178 2.474h-4.99c-0.039-0.003-0.46-0.050-1.095-0.525-0.633-0.474-1.605-1.472-2.638-3.54-2.027-4.054-2.65-5.331-2.656-5.343-0.001-0.002-0.001-0.003-0.002-0.004-0.251-0.503-0.073-1.162 0.389-1.439 0.208-0.125 0.451-0.158 0.685-0.095 0.249 0.068 0.458 0.236 0.587 0.472 0.002 0.003 0.004 0.007 0.006 0.010l1.561 2.705c0.319 0.583 0.678 0.828 1.067 0.729 0.39-0.099 0.587-0.489 0.587-1.157v-7.813c0-0.551 0.449-1 1-1s1 0.449 1 1v6.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-7.5c0-0.551 0.449-1 1-1s1 0.449 1 1v7.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-6.5c0-0.551 0.449-1 1-1s1 0.449 1 1v7.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-4.5c0-0.551 0.449-1 1-1s1 0.449 1 1v3.5z" fill="#000000"></path>\n</svg>\n',colors:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n  <g\n     transform="matrix(0.80002,0,0,0.80002,-17.551537,-7.5151871)">\n    <path\n       d="m 30.116525,16.577765 c -0.345,0 -0.625,0.28 -0.625,0.625 0,0.345 0.28,0.625 0.625,0.625 0.345,0 0.625,-0.28 0.625,-0.625 0,-0.345 -0.28,-0.625 -0.625,-0.625 m 0,2.5 c -1.03375,0 -1.875,-0.84125 -1.875,-1.875 0,-1.03375 0.84125,-1.875 1.875,-1.875 1.03375,0 1.875,0.84125 1.875,1.875 0,1.03375 -0.84125,1.875 -1.875,1.875" />\n    <path\n       d="m 26.366525,20.327765 c -0.345,0 -0.625,0.28 -0.625,0.625 0,0.345 0.28,0.625 0.625,0.625 0.345,0 0.625,-0.28 0.625,-0.625 0,-0.345 -0.28,-0.625 -0.625,-0.625 m 0,2.5 c -1.03375,0 -1.875,-0.84125 -1.875,-1.875 0,-1.03375 0.84125,-1.875 1.875,-1.875 1.03375,0 1.875,0.84125 1.875,1.875 0,1.03375 -0.84125,1.875 -1.875,1.875" />\n    <path\n       d="m 35.116525,15.327765 c -0.345,0 -0.625,0.28 -0.625,0.625 0,0.345 0.28,0.625 0.625,0.625 0.345,0 0.625,-0.28 0.625,-0.625 0,-0.345 -0.28,-0.625 -0.625,-0.625 m 0,2.5 c -1.03375,0 -1.875,-0.84125 -1.875,-1.875 0,-1.03375 0.84125,-1.875 1.875,-1.875 1.03375,0 1.875,0.84125 1.875,1.875 0,1.03375 -0.84125,1.875 -1.875,1.875" />\n    <path\n       d="m 34.491525,12.827765 c -6.20375,0 -11.25,4.205 -11.25,9.375 0,5.17 5.04625,9.375 11.25,9.375 1.7075,0 3.0925,-0.19875 4.11625,-0.59125 0.81125,-0.31125 1.39625,-0.745 1.7375,-1.29 0.76375,-1.22 0.255,-2.855 -0.30625,-4.0125 -1.2,-2.475 -0.07875,-3.49125 0.46,-3.81375 0.3225,-0.1925 0.66375,-0.29125 1.01625,-0.29125 0.5725,0 1.4275,0.26625 2.25125,1.5325 0.47125,0.72375 0.9575,0.98125 1.23,0.98125 0.44625,0 0.74625,-0.76 0.74625,-1.89 0,-5.17 -5.04625,-9.375 -11.25,-9.375 l -0.0012,0 z m 0,20 c -3.31875,0 -6.44375,-1.0925 -8.8,-3.07625 -1.15625,-0.97375 -2.065,-2.10875 -2.70125,-3.37625 -0.66375,-1.32125 -1,-2.725 -1,-4.1725 0,-1.4475 0.33625,-2.8525 1,-4.1725 0.63625,-1.2675 1.545,-2.4025 2.70125,-3.37625 2.355,-1.98375 5.48,-3.07625 8.8,-3.07625 3.32,0 6.44375,1.0925 8.8,3.07625 1.15625,0.97375 2.065,2.10875 2.70125,3.37625 0.66375,1.32125 1,2.725 1,4.1725 0,2.315 -1.03125,3.14 -1.99625,3.14 -0.80625,0 -1.63625,-0.565 -2.2775,-1.54875 -0.405,-0.62125 -0.8325,-0.96375 -1.20375,-0.96375 -0.12375,0 -0.24625,0.0375 -0.37375,0.11375 -0.7025,0.42 -0.2875,1.55625 0.0225,2.195 1.0025,2.0675 1.085,3.8725 0.24,5.2225 -1.025,1.6375 -3.35125,2.4675 -6.9125,2.4675 l 0,-0.0012 z" />\n    <path\n       d="m 35.741525,25.327765 c -0.68875,0 -1.25,0.56125 -1.25,1.25 0,0.68875 0.56125,1.25 1.25,1.25 0.68875,0 1.25,-0.56125 1.25,-1.25 0,-0.68875 -0.56125,-1.25 -1.25,-1.25 m 0,3.75 c -1.37875,0 -2.5,-1.12125 -2.5,-2.5 0,-1.37875 1.12125,-2.5 2.5,-2.5 1.37875,0 2.5,1.12125 2.5,2.5 0,1.37875 -1.12125,2.5 -2.5,2.5" />\n  </g>\n</svg>\n',arrowLeft:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M14 20c0.128 0 0.256-0.049 0.354-0.146 0.195-0.195 0.195-0.512 0-0.707l-8.646-8.646 8.646-8.646c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-9 9c-0.195 0.195-0.195 0.512 0 0.707l9 9c0.098 0.098 0.226 0.146 0.354 0.146z" fill="#ffffff"></path>\n</svg>\n',arrowRight:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M5 20c-0.128 0-0.256-0.049-0.354-0.146-0.195-0.195-0.195-0.512 0-0.707l8.646-8.646-8.646-8.646c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l9 9c0.195 0.195 0.195 0.512 0 0.707l-9 9c-0.098 0.098-0.226 0.146-0.354 0.146z" fill="#ffffff"></path>\n</svg>\n',plus:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M18.5 10h-8.5v-8.5c0-0.276-0.224-0.5-0.5-0.5s-0.5 0.224-0.5 0.5v8.5h-8.5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5h8.5v8.5c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-8.5h8.5c0.276 0 0.5-0.224 0.5-0.5s-0.224-0.5-0.5-0.5z" fill="#ffffff"></path>\n</svg>\n',userPointer:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15 20">\n    <path class="arrow" transform="translate(-9.451 -6.999)" d="M16.92,26.63,14.25,20.2l-3.7,3.983a.651.651,0,0,1-.69.164.59.59,0,0,1-.4-.55L10,7.587a.588.588,0,0,1,.372-.538.657.657,0,0,1,.674.1l13.2,10.323a.563.563,0,0,1,.162.648.628.628,0,0,1-.582.376H18.5l2.707,6.515a.578.578,0,0,1-.35.766l-3.124,1.177A.67.67,0,0,1,17.5,27a.63.63,0,0,1-.582-.37Zm-2.866-7.864a.538.538,0,0,1,.485-.16.519.519,0,0,1,.4.3l2.816,6.777.127.054L19.847,25l.057-.132L17.087,18.09a.46.46,0,0,1,.052-.451.538.538,0,0,1,.436-.218h4.633l.065-.176L11.315,8.84l-.165.076-.55,13.31.174.069,3.28-3.528Z"></path>\n</svg>\n',edgeUserPointer:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n<path class="arrow" d="M8.5 20c-0.043 0-0.087-0.006-0.13-0.017-0.218-0.059-0.37-0.257-0.37-0.483v-7.5h-7.5c-0.226 0-0.424-0.152-0.483-0.37s0.037-0.449 0.232-0.562l19-11c0.196-0.113 0.444-0.081 0.604 0.079s0.193 0.408 0.079 0.604l-11 19c-0.091 0.157-0.258 0.249-0.433 0.249zM2.362 11h6.138c0.276 0 0.5 0.224 0.5 0.5v6.138l9.128-15.766-15.766 9.128z"></path>\n</svg>\n',check:'<svg viewBox="0 0 13 10" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10.4435648,7.92060044 L10.4435648,-0.949695968 C10.4435648,-1.76568671 9.77199193,-2.44524118 8.94356481,-2.44524118 C8.10936204,-2.44524118 7.44356481,-1.77566278 7.44356481,-0.949695968 L7.44356481,6.56354835 L3.94955735,6.56354835 C3.11243717,6.56354835 2.44356481,7.23512123 2.44356481,8.06354835 C2.44356481,8.89775112 3.11782064,9.56354835 3.94955735,9.56354835 L8.94423781,9.56354835 C9.78135799,9.56354835 10.4502304,8.89197548 10.4502304,8.06354835 C10.4502304,8.01530371 10.4479752,7.96762234 10.4435648,7.92060044 Z" transform="translate(6.446898, 3.559154) rotate(-315.000000) translate(-6.446898, -3.559154)"></path>\n</svg>\n'},o='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\r\n\t<path d="M11.5 7c-0.276 0-0.5-0.224-0.5-0.5 0-1.378-1.122-2.5-2.5-2.5-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c1.378 0 2.5-1.122 2.5-2.5 0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5c0 1.378 1.122 2.5 2.5 2.5 0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5c-1.378 0-2.5 1.122-2.5 2.5 0 0.276-0.224 0.5-0.5 0.5zM10.301 3.5c0.49 0.296 0.903 0.708 1.199 1.199 0.296-0.49 0.708-0.903 1.199-1.199-0.49-0.296-0.903-0.708-1.199-1.199-0.296 0.49-0.708 0.903-1.199 1.199z" />\r\n\t<path d="M1.5 10c-0.276 0-0.5-0.224-0.5-0.5s-0.224-0.5-0.5-0.5c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c0.276 0 0.5-0.224 0.5-0.5s0.224-0.5 0.5-0.5 0.5 0.224 0.5 0.5c0 0.276 0.224 0.5 0.5 0.5s0.5 0.224 0.5 0.5-0.224 0.5-0.5 0.5c-0.276 0-0.5 0.224-0.5 0.5s-0.224 0.5-0.5 0.5z" />\r\n\t<path d="M18.147 15.939l-10.586-10.586c-0.283-0.283-0.659-0.438-1.061-0.438s-0.778 0.156-1.061 0.438l-0.586 0.586c-0.283 0.283-0.438 0.659-0.438 1.061s0.156 0.778 0.438 1.061l10.586 10.586c0.283 0.283 0.659 0.438 1.061 0.438s0.778-0.156 1.061-0.438l0.586-0.586c0.283-0.283 0.438-0.659 0.438-1.061s-0.156-0.778-0.438-1.061zM5.561 6.646l0.586-0.586c0.094-0.094 0.219-0.145 0.354-0.145s0.26 0.052 0.354 0.145l1.439 1.439-1.293 1.293-1.439-1.439c-0.195-0.195-0.195-0.512 0-0.707zM17.439 17.354l-0.586 0.586c-0.094 0.094-0.219 0.145-0.353 0.145s-0.26-0.052-0.353-0.145l-8.439-8.439 1.293-1.293 8.439 8.439c0.195 0.195 0.195 0.512 0 0.707z" />\r\n\t<path d="M3.5 5c-0.276 0-0.5-0.224-0.5-0.5 0-0.827-0.673-1.5-1.5-1.5-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c0.827 0 1.5-0.673 1.5-1.5 0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5c0 0.827 0.673 1.5 1.5 1.5 0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5c-0.827 0-1.5 0.673-1.5 1.5 0 0.276-0.224 0.5-0.5 0.5zM2.998 2.5c0.19 0.143 0.359 0.312 0.502 0.502 0.143-0.19 0.312-0.359 0.502-0.502-0.19-0.143-0.359-0.312-0.502-0.502-0.143 0.19-0.312 0.359-0.502 0.502z" />\r\n\t<path d="M3.5 15c-0.276 0-0.5-0.224-0.5-0.5 0-0.827-0.673-1.5-1.5-1.5-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c0.827 0 1.5-0.673 1.5-1.5 0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5c0 0.827 0.673 1.5 1.5 1.5 0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5c-0.827 0-1.5 0.673-1.5 1.5 0 0.276-0.224 0.5-0.5 0.5zM2.998 12.5c0.19 0.143 0.359 0.312 0.502 0.502 0.143-0.19 0.312-0.359 0.502-0.502-0.19-0.143-0.359-0.312-0.502-0.502-0.143 0.19-0.312 0.359-0.502 0.502z" />\r\n</svg>\r\n';e.exports={icon:function(t){return i[t]||o},elHW:function(t){return r(i[t]||o)},el:function(t){return t=r(i[t]||o),t.removeAttribute("width"),t.removeAttribute("height"),t}}},{}],32:[function(t,e,n){"use strict";var r=(t("observable"),t("hyperscript")),i=t("../lodash.custom"),o=t("../../../common/config"),a=(t("./icon-definitions"),t("class-list"),t("dom-events")),s=function(t,e){return t.querySelector(e)},c=t("component-closest"),u=t("class-list"),l=("ontouchstart"in window||window.DocumentTouch&&(document,window.DocumentTouch),t("debug")("awwapp:board")),f=o.CSS_CLASSES.VISIBLE,d=o.CSS_CLASSES.NOT_VISIBLE,h=o.CSS_CLASSES.SELECTED,p=o.CSS_CLASSES.LOADING,g=o.CSS_CLASSES.EDITING,m=o.CSS_CLASSES.DISABLED,v=o.CSS_CLASSES.OPEN,y=o.AWW_COLOR,C=o.CANVAS_STARTING_ZOOM_LEVEL,b=o.ASSETS_PATH,w=o.MAX_CUSTOM_COLORS,I=o.CSS_CLASSES.TOOLBAR_PREFIX;"https://awwapp.com/".match(location.host);e.exports=function(t){function e(){for(var t=ce.getElementsByClassName("tools__item"),e=t.length-2;e>=0;e--)ce.removeChild(t[e]);i.each(te.customColors,function(t,e){At(t,nn.length+e)})}function n(){var t;return Qt.currentUser()&&Qt.currentUser().isPremium||!cn?Qt.boardInfo().boardId?(t=T(Qt.boardInfo().isAdmin),qt.emit("flash-message",t,"success",7),void qt.emit("export-pdf",!0)):(Ue=!0,qt.on("push-confirm",function(t){Ue&&(qt.emit("export-pdf",!0),Ue=!1)}),qt.emit("join-board"),t=T(Qt.boardInfo().isAdmin),void qt.emit("flash-message",t,"success",7)):(lt("download-pdf","pdfWatermark",["pdf-watermark"]),void(cn=!1))}function A(){var t=Qt.currentPage()-1;t<0||!Qt.userCanDraw()||!Qt.boardCanDo().advancedTools||qt.emit("init-tool","gotoPage",{pg:t})}function _(){if(Qt.userCanDraw()&&Qt.boardCanDo().advancedTools){var t=Qt.currentPage()+1;qt.emit("init-tool","gotoPage",{pg:t})}}function x(t,e,n){a.on(t,"click",function(t){t.target&&"#"===t.target.href&&t.preventDefault(),("RO"!==Qt.currentUser().status||n)&&(e.className.indexOf(f)!==-1?u(e).remove(f):(ot(),Pt=e,u(e).add(f)))})}function O(){(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(re.requestFullscreen?re.requestFullscreen():re.webkitRequestFullscreen?re.webkitRequestFullscreen():re.mozRequestFullScreen?re.mozRequestFullScreen():re.msRequestFullscreen&&re.msRequestFullscreen(),He.src=b+"/ic-exit-fullscreen.svg",Ve=!0)}function S(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),He.src=b+"/ic-fullscreen.svg",Ve=!1}function L(t){var e=t/C*100;De.innerText=(e>1?Math.round(e):Math.max(Math.round(10*e)/10,.1))+"%"}function T(t){return"Please, don't close your browser until we export your PDF. "+(t?" If it takes too long we'll send it to you via email.":"")}function k(t){var e=Qt.users()[t];if(e&&tn.indexOf(e.nick)===-1){var n="Connected with ";tn.push(e.nick),i.each(tn,function(t){n=n.concat(t+", ")}),n=n.substring(0,n.length-2),Le.innerText=n}}function M(t){t?(Z(_e),N(Ae)):(N(_e),Z(Ae))}function E(t){t.className.indexOf(m)===-1&&u(t).add(m)}function B(t){t.className.indexOf(m)!==-1&&u(t).remove(m)}function N(t){t.className.indexOf(d)===-1&&u(t).add(d)}function Z(t){t.className.indexOf(d)!==-1&&u(t).remove(d)}function P(t){t.className.indexOf(f)===-1&&u(t).add(f)}function j(t){t.className.indexOf(f)!==-1&&u(t).remove(f)}function W(t){t.audioEnabled&&!$e&&(Z(Te),Ke(!0))}function R(t){t.isAssignment&&Ye.className.indexOf(d)!==-1&&u(Ye).remove(d)}function z(t){if(Qt.isConnected()){if(!Qt.boardCanDo().advancedTools)return Ke(!0),void U([{op:"chat",header:"Hey, that's a premium feature",text:"You can actually talk with your board members while collaborating. Isn't that great?",link:Qt.boardInfo().isAdmin?{url:"https://awwapp.com//info/plans",text:"Grab your plan here."}:{url:"https://awwapp.com//register",text:"Register and try it for free."},type:"success"}]);Object.keys(Qt.users()).length<2&&U([{op:"chat",header:"Invite someone to talk with.",text:"Hey, just wanted to let you know that you're alone on the board.",type:"success"}]),$e=t,M(t),t?qt.emit("webrtc-on"):qt.emit("webrtc-off");var e="/api/v2/admin/boards/"+Qt.boardInfo().boardId+"/audio/"+(t?"on":"off");te.fetch({method:"post",cors:!0,withCredentials:!0,url:e},function(t,e,n){(t||e.statusCode&&200!==e.statusCode)&&qt.emit("error",t||n.error)})}}function D(){we.innerHTML=""}function X(){var t=ne.getBoundingClientRect();!Ke()&&!qe&&t.width>600&&t.height>600&&!o.isInIframe()&&Ke(!0)}function G(){var t=ve.value;t&&qt.emit("change-user",{nick:t}),u(Ae).remove(g),ve.setAttribute("readonly","")}function F(){Ae.className.indexOf(g)===-1&&(u(Ae).add(g),ve.removeAttribute("readonly"),ve.focus(),ve.select())}function Y(){Oe.parentNode.style.height=Math.max(48,Math.min(100,Oe.scrollHeight))+"px"}function H(t,e,n,r){if(Y(),(void 0===r.which||13==r.which)&&t()){var i={op:"chat",text:r.target.value,time:new Date,uid:t().uid};e.emit("queue-op",i),n([i],!0),r.target.value="",Oe.parentNode.style.height="48px"}}function U(t,e){var n=Qt.currentUser();t=i.filter(t,function(t){return"chat"===t.op&&(t.uid!==Qt.currentUser().uid||e)}),t.length&&(X(),i.each(t,function(t){qt.emit("on-chat-message",t.text,t.uid,t.time);var e,i=t.time?new Date(t.time):new Date;if(!Wt||(Wt-i)/1e3>2){var o=V(i),a=r("time.message__timestamp",o);we.appendChild(a),Wt=i}if("info"===t.type)e=r(".message__info",t.text);else if("error"===t.type)e=r(".message__notice",[r("h3.heading","Something went wrong"),r("p.paragraph",[t.text,t.link?[r("br"),r("a",{href:t.link.url,target:"_blank"},t.link.text)]:""])]);else if("success"===t.type)e=r(".message__notice.success-message",[r("h3.heading",t.header),r("p.paragraph",[t.text,t.link?[r("br"),r("a",{href:t.link.url,target:"_blank"},t.link.text)]:""])]);else{var s=n.uid===t.uid,c=s?n:Qt.users()[t.uid],u=s?".self":"";e=r(".message",[u?"":r(".message__avatar",r("img",{src:c&&c.avatarThumbUrl?c.avatarThumbUrl:Qe,width:"20",height:"20"})),r(".message__box"+u,r(".message__content",r("p.paragraph",t.text)))])}we.appendChild(e)}),we.scrollTop=we.scrollHeight)}function V(t){return rn[t.getMonth()]+" "+t.getDate()+"   "+t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}function J(t){if(!Qt.boardCanDo().advancedTools&&i.includes(o.ADVANCED_TOOLS,t.tool))return lt(t.tool,Qt.currentUser().email?"purchase":"register");if(!t.stateless&&"undo"!==t.tool){Xe.className.indexOf(h)!==-1&&"pan"!==t.tool&&u(Xe).remove(h);var e,n;for(var r in en)if(en.hasOwnProperty(r)){var a=en[r];a.tools.indexOf(t.tool)!==-1&&(e=r),a.selected&&(n={key:r,value:a})}var c=t.tool;if(e&&e.indexOf("upload")===-1){if(n){delete n.value.selected;var l=s(oe,"#"+I+n.key).firstElementChild,f=s(oe,"#"+I+n.value.currentTool).firstElementChild;u(f).remove(h),u(l).remove(h)}en[e].currentTool=c,en[e].selected=!0;var d=s(oe,"#"+I+e).firstElementChild,p=s(d,"img"),g=s(ie,"#"+I+c).firstElementChild;u(d).add(h),u(g).add(h),p.src="/static/site/app-assets/ict-"+c+".svg"}}}function K(t){var e=s(ie,"#"+I+"colors");s(e,".picked__color").style.background=t.color}function q(){var t=s(he,".user--name"),e=s(he,".avatar-thumb");if(Qt.currentUser().email){Z(he);var n=!0,r=!1,i=void 0;try{for(var o,a=pe[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){Z(o.value)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}N(ge),N(me),Qt.currentUser().avatarThumbUrl&&(e.src=Qt.currentUser().avatarThumbUrl)}else{Z(ge),Z(me),N(he);var c=!0,u=!1,l=void 0;try{for(var f,d=pe[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){N(f.value)}}catch(t){u=!0,l=t}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}}var h="Anonymous User";Qt.currentUser().nick?h=Qt.currentUser().nick:Qt.currentUser().email&&(h=Qt.currentUser().email),t.textContent=h,xe.textContent=h,ve.value=h}function Q(t){if(ee.multiPage){t&&qt.emit("reset-minimap");var e=0===Qt.currentPage(),n=Qt.getLastPage(),r=Qt.currentPage()>=n;e?E(Be):B(Be),r?(N(Ee),Z(Ne)):(Z(Ee),N(Ne)),Ze.value="",Qt.currentPage()>n&&(n+=1),Ze.innerText=1+Qt.currentPage()+"/"+(1+n)}}function $(t,e,n,r){var i=s(r,".js-flash-message"),o=u(i),a=u(r);"error"===e?(o.remove("notification--success"),o.add("notification--error")):(o.remove("notification--error"),o.add("notification--success")),a.add(f),setTimeout(function(){a.remove("hidden-fade"),a.add("visible-fade")},0),i.innerText=t,setTimeout(function(){a.add("hidden-fade"),a.remove("visible-fade"),setTimeout(function(){a.remove(f)},500)},1e3*(n||3))}function tt(t,e,n){var r=s(ie,".notification__top");s(ie,".mobile-notification__top");$(t,e,n,r)}function et(t){t.tip=!0,nt(t),t.name&&Qt.currentUser().shownTips.indexOf(t.name)===-1&&(Qt.currentUser().shownTips.push(t.name),te.fetch({method:"post",cors:!0,withCredentials:!0,url:"/account/shown-tips/",json:{shownTips:[t.name]}},function(t,e,n){(t||200!==e.statusCode)&&l("Error updating shown tips on the server",t)}))}function nt(t){u(je).remove("hidden-fade"),u(je).add("visible-fade"),We.innerText=t.message;var e=t.link;s(je,".tip-icon").style.display=t.tip===!0?"inline-block":"none",s(je,".tip-title").style.display=t.tip===!0?"block":"none",s(je,".tip-title").innerText=t.title||"Quick Tip",u(s(je,".close")).remove("is--hidden");var n=t.button;if(n){u(s(je,".close")).add("is--hidden");var r=document.createElement("button");r.className="toolbar__button toolbar__button--colored toolbar--big",r.innerHTML="OK",r.style.borderColor="white",r.style.height="30px",r.style.marginLeft="10px",Re.after(r);var i=function(t){u(je).remove("visible-fade"),u(je).add("hidden-fade"),n.onClick()};a.on(r,"click",i)}if(e){Re.innerText=e.text;var o=function(t){t.target&&"#"===t.target.href&&t.preventDefault(),u(je).remove("visible-fade"),u(je).add("hidden-fade"),qt.emit(e.emitterEvent)};a.off(Re,"click",o),e.src?(Re.href=e.src,e.target&&(Re.target=e.target)):e.emitterEvent&&a.on(Re,"click",o)}else Re.innerText=""}function rt(t,e){if(t)if(t.indexOf("undo")!==-1)qt.emit("do-undo");else if(t.indexOf("trash")!==-1)qt.emit("widget-confirm-trash");else if(t.indexOf("color-")!==-1){var n=parseInt(t.substring("color-".length));qt.emit("change-color",{color:nn.concat(te.customColors)[n]})}else if(t.indexOf("add-color")!==-1){Qt.boardInfo().isAdmin||!Qt.localStorageAvailable||localStorage.addedColor||(localStorage.addedColor=!0,nt({message:"Hey, did you know that you can save your custom colors if you register.",link:{emitterEvent:"widget-register",text:"Register for free here."}}));var r=s(oe,".tools__colorwheel");P(r),N(ue),It(y,!0)}else t.indexOf("google-classroom-share")!==-1?qt.emit("open-google-classroom-dialog"):t.indexOf("google-classroom-turn-in")!==-1?qt.emit("confirm-widget",{header:"Turn in the assignment",text:"Are you sure you want to turn in this assignment?",cancelButtonText:"Cancel",confirmButtonText:"Turn in assignment"},function(){qt.emit("turn-in-assignment"),qt.emit("close-menus")},function(){return qt.emit("close-menus")}):o.TOOLS.basic.concat(o.TOOLS.advanced).indexOf(t)!==-1&&qt.emit("change-tool",{tool:t})}function it(){var t=s(ie,".js-mobile-tools"),e=s(t,".js-open-tools"),n=u(e),r=s(t,".js-close-tools"),i=u(r);u(oe).add("mobile--hidden"),n.remove("is--hidden"),i.add("is--hidden")}function ot(){at(),it(),Pt&&j(Pt),Pt=void 0,le.hasAttribute("readonly")||Et()}function at(){if(Rt){var t=s(ie,"#"+Rt);j(s(t,".toolbox"));var e=s(oe,".tools__colorwheel");e&&e.className.indexOf(f)!==-1&&(u(e).remove(f),Z(ue),Jt&&u(Jt.parentNode).remove(h),Ot(Kt),yt()),Rt=void 0}}function st(t){Z(be.parentNode),1===Object.keys(t.users).length&&X(),clearInterval(jt),ft("This board is saved."),jt=setInterval(function(){var t=$t.allOps();if(t&&t.length){var e=t[t.length-1].time;e&&ft("Last saved: "+te.getTimePassed(e)+" ago.")}},1e4)}function ct(t){var e=t.ops;if(e&&e.length){var n=e[e.length-1].time;n&&ft("Last saved: "+te.getTimePassed(n)+" ago.")}}function ut(){if(Qt.boardInfo().boardId)return void qt.emit("flash-message","This board is already saved!","success",3);qt.emit("save-board",Tt)}function lt(t,e,n){n||(n=["pro"]),Qt.currentUser()&&Qt.currentUser().segment&&n.push(Qt.currentUser().segment);var r="presentation"===t?"upload-pdf":t;te.fetch({method:"GET",url:"/api/v2/widgets/get-tips/",query:{segments:n},headers:{"Content-Type":"application/json",Accept:"application/json"},cors:!0},function(t,n,i){if(t)qt.emit("error",t);else try{JSON.parse(i);qt.emit("slider-widget",JSON.parse(i).tips,e,r)}catch(t){qt.emit("error","Server returns invalid data")}})}function ft(t){fe.innerText=t}function dt(t){if(t.target.className.indexOf("slide--dot")!==-1){zt=t.target;var e=c(t.target,".tools__item",!0,oe);Gt=e.id.substring(I.length),Dt=zt.parentNode.offsetWidth,Xt=[t.touches?t.touches[0].clientX:t.clientX,t.touches?t.touches[0].clientY:t.clientY],Vt=[zt.offsetLeft,zt.offsetTop],"colors"!==Gt&&(Yt=s(e,".tools__bigtool--value"),Ft=Math.max(0,o.SIZES.indexOf(en[Gt].size))),a.on(oe,"mousemove",ht),a.on(oe,"touchmove",ht)}else if(t.target===ae){var n=gt(ae),r=(t.touches?t.touches[0].clientX:t.clientX)-n.left+an,i=(t.touches?t.touches[0].clientY:t.clientY)-n.top+an,u=ae.getBoundingClientRect().width/ae.width,l=mt(r-2*an,i-2*an,sn/2*u,sn/2*u,sn/2*u);se.style.marginLeft=l.x+"px",se.style.marginTop=l.y+"px";var f=Ut.getImageData(r/u-2*an,i/u-2*an,1,1),d=f.data;Kt=bt(d[0],d[1],d[2]),Jt.style.backgroundColor=Kt,qt.emit("change-color",{color:Kt}),te.customColors[te.customColors.length-1]=Kt}}function ht(t){if(zt){var e=t.touches?t.touches[0].clientX:t.clientX,n=e-Xt[0],r=t.touches?t.touches[0].clientY:t.clientY,i=r-Xt[1];if("colors"===Gt){var a=mt(Vt[0]+n,Vt[1]+i,sn/2,sn/2,sn/2);zt.style.marginLeft=a.x+"px",zt.style.marginTop=a.y+"px";var s=zt.offsetLeft,c=zt.offsetTop,u=Ut.getImageData(s+an,c+an,1,1),l=u.data;Kt=bt(l[0],l[1],l[2]),Jt.style.backgroundColor=Kt}else{var f=Math.floor(n/(Dt*on/100));o.SIZES[f+Ft]&&(Ht=o.SIZES[f+Ft],zt.style.marginLeft=(f+Ft)*on+"%",Yt.textContent=f+Ft+1)}}}function pt(t){"colors"===Gt&&Kt?(qt.emit("change-color",{color:Kt}),te.customColors[te.customColors.length-1]=Kt):zt&&Ht&&(en[Gt].size=Ht,qt.emit("change-size",{size:Ht,parentId:Gt}),yt()),a.off(oe,"mousemove",ht),a.off(oe,"touchmove",ht)}function gt(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}function mt(t,e,n,r,i){if(vt(t,e,r,i)<=n)return{x:t,y:e};t-=r,e-=i;var o=Math.atan2(e,t);return{x:Math.cos(o)*n+r-an,y:Math.sin(o)*n+i-an}}function vt(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function yt(){zt=void 0,Dt=void 0,Xt=void 0,Gt=void 0,Ft=void 0,Yt=void 0,Ht=void 0,Vt=void 0,Jt=void 0,Kt=void 0}function Ct(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function bt(t,e,n){return"#"+Ct(t)+Ct(e)+Ct(n)}function wt(t){te.customColors=t}function It(t,e){te.customColors.push(t),At(t,nn.length+te.customColors.length,e)}function At(t,e,n){te.customColors.length>w&&(_t(),e=nn.length+w-1),Jt=r(".predefined__color",{style:{"background-color":t}});var i=r("li.tools__item#aww-toolbar-color-"+e,r(".tools__item--button"+(n?"."+h:""),Jt));ce.insertBefore(i,ce.children[ce.children.length-1])}function _t(){te.customColors=te.customColors.slice(Math.max(0,te.customColors.length-w)),ce.removeChild(ce.children[0]),i.each(ce.children,function(t,e){t.id.indexOf("aww-toolbar-color-")!==-1&&(t.id="aww-toolbar-color-"+(nn.length+e))})}function xt(t){var e=s(t,".slide--dot");if(e){var n=s(t,".tools__bigtool--value"),r=Math.max(0,o.SIZES.indexOf(en[Rt.substring(I.length)].size));e.style.marginLeft=r*on+"%",n&&(n.textContent=r+1)}}function Ot(t){ee.apiKey&&te.fetch({method:"POST",url:"/account/colors/add-color/",json:{color:t},headers:{"Content-Type":"application/json",Accept:"application/json"},cors:!0},function(t,e,n){t&&qt.emit("error",t)})}function St(t){t&&(Je+=t,Je>0?u(de).add(p):(Je=0,u(de).remove(p)))}function Lt(){var t="https://awwapp.com/b/"+Qt.boardInfo().boardSnapshotLink+"?dis="+encodeURIComponent(JSON.stringify([["edit-board-name"],["no-init-modal"]]));window.open(t,"_blank")}function Tt(){le.hasAttribute("readonly")&&(le.removeAttribute("readonly"),le.focus(),le.select(),window.addEventListener("keydown",kt))}function kt(t){13===t.keyCode&&Et()}function Mt(){Qt.boardInfo().boardName&&(le.value=Qt.boardInfo().boardName),Qt.boardInfo().isBoardAdmin&&(le.style.pointerEvents="all")}function Et(){window.removeEventListener("keydown",kt),le.setAttribute("readonly",""),Qt.boardInfo().boardName!==le.value&&(Bt(le.value),qt.emit("flash-message","Board renamed to "+le.value,"success",5))}function Bt(t){if(!(t&&Qt&&Qt.boardInfo()&&Qt.boardInfo().boardId))return void qt.emit("save-board",Et);var e="/api/v2/admin/boards/"+Qt.boardInfo().boardId+"/change-name";te.fetch({method:"post",cors:!0,withCredentials:!0,json:{boardName:t},url:e},function(t,e,n){t||e.statusCode&&200!==e.statusCode?qt.emit("error",t||n.error):(Qt.boardInfo().boardName=n.boardName,qt.emit("board-name-change",n.boardName))})}function Nt(){var t="https://awwapp.com/?dis="+encodeURIComponent(JSON.stringify([["no-init-modal"],["join-board"]]));window.open(t,"_blank")}function Zt(t){var e=s(ie,"#upgrade-button"),n=s(ie,"#mobile-upgrade-button");!t.enableClassroom||Qt.isConnected()&&!Qt.isBoardOwner()?Fe.className.indexOf(d)===-1&&u(Fe).add(d):u(Fe).remove(d),t.hasTrial||!t.isPremium?(u(e).remove(d),u(n).remove(d)):e.className.indexOf(d)===-1&&(u(e).add(d),u(n).add(d)),"education"===t.accountType&&"student"!==t.segment?u(Pe.parentNode).remove(d):Pe.className.indexOf(d)===-1&&u(Pe.parentNode).add(d)}var Pt,jt,Wt,Rt,zt,Dt,Xt,Gt,Ft,Yt,Ht,Ut,Vt,Jt,Kt,qt=t.dispatcher,Qt=t.board,$t=t.canvas,te=t.utils,ee=t.options,ne=t.el,re=(t.canvasContainer,
document.querySelector(".aww")),ie=document.getElementById("board-menus"),oe=s(ie,"#main-toolbar"),ae=s(oe,".tools__colorwheel--canvas"),se=s(oe,".tools__colorwheel--picker"),ce=s(oe,"#custom-colors-row"),ue=s(oe,"#aww-toolbar-add-color"),le=s(ie,".toolbar__board--name"),fe=s(ie,".toolbar__board--info"),de=s(ie,".logo__box"),he=s(ie,"#account-button"),pe=Array.from(ie.querySelectorAll(".js-mobile-account-button")),ge=s(ie,"#login-register-button"),me=s(ie,"#mobile-login-register-button"),ve=s(ie,".chat__username"),ye=s(ie,"#change-name-done-button"),Ce=s(ie,"#change-name-button"),be=s(ie,".chat__box"),we=s(ie,".chat__messages"),Ie=s(ie,".chat__content"),Ae=s(be,".chat__header--normal-state"),_e=s(be,".chat__header--incall"),xe=s(_e,".chat__username--noneditable"),Oe=s(ie,".chat__input"),Se=s(be,"#hang-up-button"),Le=s(be,"#users-on-call"),Te=s(be,".chat__infobox"),ke=s(Te,"#ignore-call"),Me=s(Te,"#join-call"),Ee=s(ie,"#next-page"),Be=s(ie,"#prev-page"),Ne=s(ie,"#new-page"),Ze=s(ie,".pagination--boards"),Pe=s(ie,"#plugins"),je=s(ie,"#bottom-notification"),We=s(je,".paragraph"),Re=s(je,"a"),ze=s(je,"img.close"),De=s(ie,"#zoom-level-text"),Xe=s(ie,"#pan"),Ge=s(ie,"#fullscreen"),Fe=s(ie,"#aww-toolbar-google-classroom-share"),Ye=s(ie,"#aww-toolbar-google-classroom-turn-in"),He=s(Ge,"img"),Ue=!1,Ve=!1,Je=0,Ke=Qt.isChatVisible,qe=!1,Qe=b+"/ic-avatar.svg",$e=!1,tn=[],en=o.DEFAULT_TOOLBAR,nn=o.COLORS,rn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],on=90/(o.SIZES.length-1),an=9,sn=ae.width,cn=!0;te.isLoading(function(t){St(t)}),Qt.boardCanDo(W),Qt.boardInfo(R),Qt.currentUser(Zt),qt.subMany({"close-menus":ot,"change-tool":J,"change-color":K,"set-user-custom-colors":wt,"is-loading":function(t){return te.isLoading(t)},"edit-board-name":Tt,"board-info-changed":Mt,"update-ui":q,"recompute-pagination":Q,"user-data-changed":q,"board-joined":st,"receive-ops":ct,"reset-state":D,"show-chat-message":U,"audio-connection-changed":M,"user-joined-call":k,"flash-message":tt,"show-message":nt,"show-tip-message":et,"update-zoom-level":L,"go-prev-page":A,"go-next-page":_,"cmd-s-pressed":ut,"start-export-pdf":n,"show-tips":lt,"send-new-color-to-backend":Ot}),function(){function t(t){if(t.stopPropagation(),"RO"!==Qt.currentUser().status){ot();var e=t.target.id;if(e.indexOf("board-")!==-1)if(e.indexOf("duplicate")!==-1)Qt.boardInfo().boardSnapshotLink?Lt():qt.emit("save-board",Lt);else if(e.indexOf("save")!==-1)ut();else if(e.indexOf("rename")!==-1)Qt.boardInfo().boardId?Tt():qt.emit("save-board",Tt);else if(e.indexOf("board-open-existing")!==-1){if(!Qt.currentUser().email)return void lt("board-repository","register");qt.emit("widget-board-repository")}else if(e.indexOf("board-templates")!==-1)qt.emit("widget-board-templates");else if(e.indexOf("board-delete")!==-1)qt.emit("delete-this-board",[Qt.boardInfo().boardId]);else if(e.indexOf("board-create-new")!==-1)Nt();else if(e.indexOf("board-manage-participants")!==-1){if(!Qt.boardCanDo().advancedTools)return void lt("manage-participants",Qt.currentUser().email?"purchase":"register");qt.emit("manage-participants")}}}function r(t){t.stopPropagation(),ot();var e=t.target.id;e.indexOf("export-")!==-1&&(e.indexOf("export-as-pdf")!==-1?n():e.indexOf("export-as-image")!==-1&&qt.emit("download-picture"))}a.on(oe,"mousedown",dt),a.on(oe,"touchstart",dt),a.on(oe,"mouseup",pt),a.on(oe,"mouseleave",pt),a.on(oe,"touchend",pt),a.on(ae,"touchmove",dt),a.on(oe,"click",function(t){t.target&&"#"===t.target.href&&t.preventDefault();var n=t.target;if(n.parentNode.className.indexOf("tools__item--button")!==-1){if(t.stopPropagation(),"RO"===Qt.currentUser().status)return;var r=n.parentNode.parentNode,i=r.id.substring(I.length),o=s(r,".toolbox");o&&Rt!==o.parentNode.id?(ot(),Rt=o.parentNode.id,P(o),"colors"===i?e():xt(o),rt(en[i].currentTool,r)):(rt(i,r),"add-color"!==i&&ot())}else if(n.id.indexOf("upload-via-url")!==-1){var a=s(n.parentNode.parentNode,"#aww-toolbar-url-for-upload"),c=a.value,u="https://converter.awwapp.com/api/v1/get_picture/?url="+encodeURIComponent(c);u.match(/\.(gif|jpe?g|png)$/gi)?qt.emit("change-tool",{tool:"image",src:u}):u.match(/\.(ppt|pdf)$/gi)?qt.emit("change-tool",{tool:"presentation",src:u}):qt.emit("flash-message","File is not valid","error",5),a.value=""}});var i=s(ie,"#board-menu-button"),o=s(ie,"#board-menu");x(i,o),a.on(o,"click",t);var c=s(ie,"#export-menu-button"),l=s(ie,"#export-menu");x(c,l,!0),a.on(l,"click",r);var d=s(ie,"#collaborate-button");a.on(d,"click",function(t){t.preventDefault(),ot(),qt.emit("ga-send","Collaborate button test",d.innerText||"ICON ONLY"),aww._dispatcher.emit("widget-shared-board")});var p=s(ie,"#mobile-collaborate-button");a.on(p,"click",function(t){t.preventDefault(),ot(),aww._dispatcher.emit("widget-shared-board")});var g=s(ie,"#help-button");a.on(g,"click",function(t){t.preventDefault(),ot(),aww._dispatcher.emit("widget-help")});var m=s(he,".dropdown__toolbar");x(he,m),a.on(ge,"click",function(t){t.preventDefault(),ot(),qt.emit("widget-login")});var y=s(ie,"#chat-button"),C=s(ie,"#start-voice-call");Ke(function(t){t?(P(be),Oe.focus()):j(be)}),a.on(y,"click",function(t){t.preventDefault();var e=Qt.isChatVisible();ot(),e?(Ke(!1),qe=!0):Ke(!0)}),a.on(C,"click",function(t){t.preventDefault(),z(!0)}),a.on(Se,"click",function(t){t.preventDefault(),z(!1)}),a.on(Me,"click",function(t){t.preventDefault(),z(!0),N(Te)}),a.on(ke,"click",function(t){t.preventDefault(),j(Te),N(Te)}),a.on(Ie,"click",function(t){t.preventDefault(),ot()}),a.on(Ce,"click",function(t){t.preventDefault(),F()}),a.on(ye,"click",function(t){t.preventDefault(),G()}),a.on(ve,"keyup",function(t){("13"==t.keyCode||t.key&&"enter"==t.key.toLowerCase())&&(t.preventDefault(),t.stopPropagation(),G())}),a.on(Oe,"keyup",function(t){return H(Qt.currentUser,qt,U,t)}),a.on(Be,"click",function(t){t.preventDefault(),A()}),a.on(Ee,"click",function(t){t.preventDefault(),_()}),a.on(Ne,"click",function(t){if(t.preventDefault(),Qt.userCanDraw()){if(!Qt.boardCanDo().advancedTools)return void lt("multi-page",Qt.currentUser().email?"purchase":"register");var e=Qt.currentPage()+1;qt.emit("init-tool","gotoPage",{pg:e})}}),a.on(Ze,"change",function(){var t=Ze.value-1;isNaN(t)||t<0||t>Qt.getLastPage()||qt.emit("init-tool","gotoPage",{pg:t})}),a.on(ze,"click",function(t){t.preventDefault(),u(je).remove("visible-fade"),u(je).add("hidden-fade")});var b=s(ie,".tools__minimap--map"),w=s(ie,".tools__minimap--button"),L=s(w,".tools__minimap--visibility"),T=s(ie,"#zoom-in"),k=s(ie,"#zoom-out");a.on(w,"click",function(t){t.preventDefault(),L.className.indexOf(v)!==-1?(u(L).remove(v),u(b).remove(f),qt.emit("minimap-toggle",!1)):(u(L).add(v),u(b).add(f),qt.emit("minimap-toggle",!0))}),a.on(T,"click",function(t){t.preventDefault(),qt.emit("zoom-in")}),a.on(k,"click",function(t){t.preventDefault(),qt.emit("zoom-out")}),a.on(Ge,"click",function(t){t.preventDefault(),Ve?S():O()}),a.on(Xe,"click",function(t){t.preventDefault(),Xe.className.indexOf(h)===-1&&u(Xe).add(h),qt.emit("change-tool",{tool:"pan"})}),Qt.remoteQueue(U),q(),Ut=ae.getContext("2d");var M=new Image;M.onload=function(){Ut.drawImage(M,0,0,M.width,M.height)},M.src="/static/site/app-assets/color-wheel.png",a.on(Pe,"click",function(t){t.preventDefault(),qt.emit("plugins-widget")}),a.on(s(ie,"#mobile-board-menu"),"click",t),x(s(ie,"#mobile-board-dropdown-button"),s(ie,"#mobile-board-menu")),a.on(le,"click",function(t){t.preventDefault(),ot(),Tt()});var E=s(ie,".js-mobile-tools");a.on(E,"click",function(t){t.preventDefault();var e=s(E,".js-open-tools"),n=u(e),r=s(E,".js-close-tools"),i=u(r),o=!n.contains("is--hidden");ot(),o&&(u(oe).remove("mobile--hidden"),n.add("is--hidden"),i.remove("is--hidden"))}),a.on(me,"click",function(t){t.preventDefault(),ot(),qt.emit("widget-login")}),a.on(s(ie,"#mobile-learn-more"),"click",function(t){t.stopPropagation(),t.preventDefault(),ot(),qt.emit("widget-help")});var B=!0,Z=!1,W=void 0;try{for(var R,D=Array.from(ie.querySelectorAll(".js-mobile-export-button"))[Symbol.iterator]();!(B=(R=D.next()).done);B=!0){var X=R.value;a.on(X,"click",r)}}catch(t){Z=!0,W=t}finally{try{!B&&D.return&&D.return()}finally{if(Z)throw W}}}()}},{"../../../common/config":5,"../lodash.custom":12,"./icon-definitions":31,"class-list":52,"component-closest":55,debug:61,"dom-events":65,hyperscript:72,observable:80}],33:[function(t,e,n){"use strict";var r=t("./lodash.custom"),i=function(t){function e(){for(var t=0;t<arguments.length;t++)if(void 0===arguments[t]||null===arguments[t])throw new Error("Input parameter missing!")}var n=t.dispatcher,i=t.board,o=t.canvas,a=t.utils,s=n.emit.bind(n),c=o.draw,u=o.canvas;return{_dispatcher:n,setTool:function(t){if(!t)throw new Error("No tool specified");return s("change-tool",{tool:t})},setStrokeColor:function(t){if(!t)throw new Error("No color specified");return s("change-color",{color:t})},setSize:function(t,e){if(!t)throw new Error("No size specified");if(!e)throw new Error("No element specified");return"text"===e?s("change-font-size",{size:t}):s("change-size",{size:t,parentId:e})},setTextColor:function(t){if(!t)throw new Error("No color specified");return s("change-font-color",{color:t})},setPage:function(t){if(void 0===t)throw new Error("No page number specified");s("goto-page",t),s("queue-op",{op:"gotoPage",pg:t})},setZoomLevel:function(t){e(t),s("set-zoom-level",t),this.redrawBoard()},setPan:function(t,n){e(t,n),s("set-pan",t,n),this.redrawBoard()},setUserPermissions:function(t,n){if(e(t,n),"RW"!==n&&"RO"!==n)throw new Error("Permission code has wrong value (should be 'RW' or 'RO')");s("set-user-permissions",t,n)},setDefaultUserPermission:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(e(t),"RW"!==t&&"RO"!==t)throw new Error("Permission code has wrong value (should be 'RW' or 'RO')");s("set-default-user-permissions",t,n)},setZoomLevelLimits:function(t,e){(t<.5||e>2500)&&console.warn("Zoom level limits are out of recommended range. For best performance put limits inside the range [0.5, 2500]"),s("set-zoom-level-limits",t,e)},setUserName:function(t){e(t),s("change-user",{nick:t})},setUserUid:function(t){e(name),s("change-user",{uid:t})},setShowUserPointers:function(t){e(t),s("show-user-pointers",t)},setSendUserPointer:function(t){e(t),s("send-user-pointer",t)},setEnablePan:function(t){e(t),s("set-enable-pan",t)},setEnableZoom:function(t){e(t),s("set-enable-zoom",t)},getZoomLevelLimits:function(t){e(t),s("get-zoom-level-limits",t)},getStrokeColor:function(t){e(t),s("get-stroke-color",t)},getTextColor:function(t){e(t),s("get-text-color",t)},getCurrentPage:function(t){return e(t),t(i.currentPage())},getLastPage:function(t){return e(t),t(i.getLastPage())},getTool:function(t){e(t),s("get-current-op",t)},getZoomLevel:function(t){e(t),s("get-zoom-level",t)},getPan:function(t){e(t),s("get-top-left-point",t)},getSelectedObjects:function(t){e(t),s("get-selected-ops",t)},getCanvas:function(){return o.canvas},getDrawingOperations:function(){return o.drawingOperations},getViewportImage:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";e(t),t(u.toDataURL(n))},getMaxViewportImage:function(t){e(t),o.getDataURL(t,!1)},getPDF:function(t){e(t),n.once("pdf-exported",t),s("export-pdf",!0)},getBoardInfo:function(t){e(t);var n=i.boardInfo(),r=i.boardCanDo();t({boardId:n.boardId,boardLink:n.boardLink,boardSnapshotLink:n.boardSnapshotLink,boardName:n.boardName,connectAllAsGuests:r.connectAllAsGuests,isPermanent:r.isPermanent,isSnapshot:r.isSnapshot,isConnected:i.isConnected()})},getBoardUsers:function(t){e(t),t(i.users())},getBoardOwner:function(t){e(t),i.getBoardOwner(t)},getCurrentUser:function(t){e(t),t(i.currentUser())},getOps:function(t){e(t),t([].concat(i.localOps,i.queue()))},fitContentToScreen:function(){s("reposition-canvas-to-fit-content")},zoomIn:function(){s("zoom-in")},zoomOut:function(){s("zoom-out")},clearPage:function(t){s("do-clear",t,{forcePage:!0}),this.redrawBoard()},pushOps:function(t){e(t),s("do-ops",t),s("queue-ops",t,{forcePage:!0}),this.redrawBoard()},joinBoard:function(t){return e(t),s("join-board",{boardLink:t})},leaveBoard:function(){return s("leave-board")},sendChatMessage:function(t,n){e(t,n),s("queue-op",{op:"chat",text:t,time:new Date,uid:n})},doUndo:function(){s("do-undo")},redrawBoard:function(){s("do-redraw")},onPageChange:function(t){e(t),n.on("goto-page",t)},onJoinBoard:function(t){e(t),n.on("user-joined-board",t)},onReceiveOps:function(t){e(t),n.on("receive-ops",function(e){return t(e.ops)})},onLoading:function(t){e(t),a.isLoading(function(e){t(e)})},onLeaveBoard:function(t){e(t),n.on("user-left-board",t)},uploadImageFromComputer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments[2];n.once("image-uploaded-from-computer",t),r||n.once("image-drawn-on-canvas",e),s("change-tool",{tool:"image",disableCanvasUpload:r})},uploadImageFromUrl:function(t,e){if(!t)throw new Error("No image URL specified");return n.once("image-drawn-on-canvas",e),s("change-tool",{tool:"image",src:t})},uploadPresentationFromComputer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments[2];n.once("presentation-uploaded-from-computer",t),r||n.on("presentation-drawn-on-canvas",e),s("change-tool",{tool:"presentation",disableCanvasUpload:r})},uploadPresentationFromUrl:function(t,e){if(!t)throw new Error("No presentation URL specified");return n.on("presentation-drawn-on-canvas",e),s("change-tool",{tool:"presentation",src:t})},eraseArea:function(t,n){e(t);var r={op:"eraseArea",points:t,pg:n||i.currentPage(),eraser:!0};c.doOp(r),s("queue-op",r)},drawLine:function(t,n,r,o){e(t,n,r);var a={op:"line",color:t,size:n,points:r,pg:o||i.currentPage()};c.doOp(a),s("queue-op",a)},erase:function(t,n,r,o){e(t,n,r);var a={op:"line",color:t,size:n,points:r,pg:o||i.currentPage(),eraser:!0};c.doOp(a),s("queue-op",a)},drawRectangle:function(t,n,r,o,a,u,l,f){e(t,n,r,o,a,u);var d={op:"rectangle",pg:f||i.currentPage(),color:t,size:n,x:r,y:o,w:a,h:u,filled:l};c.doOp(d),s("queue-op",d)},drawEllipse:function(t,n,r,o,a,u,l,f,d){e(t,n,r,o,u,l,a);var h={op:"ellipse",x:r,y:o,r:a,scale:[u,l],color:t,size:n,filled:f,pg:d||i.currentPage()};c.doOp(h),s("queue-op",h)},drawStickyNote:function(t,n,r,o,a,u,l,f,d,h,p){e(t,n,r,o,a,u);var g={op:"text",text:t,textPoint:[n,r],maxWidth:o,maxHeight:a,pg:p||i.currentPage(),color:u,fontFamily:"Helvetica, sans-serif",fontSize:l||64,lineHeight:f||1.5,fontWeight:h||"bold",fontStyle:"normal",editText:!0,isPostit:!0,postitShadowSize:d||8};c.doOp(g),s("queue-op",g)},drawText:function(t,n,r,o,a,u,l,f,d,h){e(t,n,r,o,a,u);var p={op:"text",text:t,textPoint:[n,r],maxWidth:o,maxHeight:a,pg:h||i.currentPage(),color:u,fontFamily:"Helvetica, sans-serif",fontSize:l||64,lineHeight:f||1.5,fontWeight:d||"bold",fontStyle:"normal",editText:!0,isPostit:!1};c.doOp(p),s("queue-op",p)},drawStraightLine:function(t,n,r,o,a){e(t,n,r,o);var u={op:"lineStraight",points:[t,n],color:r,size:o,pg:a||i.currentPage()};c.doOp(u),s("queue-op",u)},drawImage:function(t,n,r,o,a,u,l){if(e(t,n,r,o,a,u),!t)throw new Error("No image URL specified");var f={op:"image",src:t,left:n,top:r,w:o,h:a,r:u,pg:l||i.currentPage()};c.doOp(f),s("queue-op",f)},moveOps:function(t,n){if(e(t,n),0===t.length)throw new Error("No ops to move defined");var i,o=t[0];o.points&&o.points.length?i=o.points[0]:"rectangle"===o.op||"ellipse"===o.op?i=[o.x,o.y]:"text"===o.op?i=o.textPoint:"image"===o.op&&(i=[o.left,o.top]);var a=r.map(t,function(t){var e=t.points?t.points[0]:"rectangle"===t.op||"ellipse"===t.op?[t.x,t.y]:"text"===t.op?t.textPoint:"image"===t.op?[t.left,t.top]:null;if(null===e)throw new Error("Unknown op");return{opid:t.opid,pos:e}}),u={op:"move",ops:a,points:[i,n]};c.doOp(u),s("queue-op",u)},deleteOps:function(t){if(e(t),0===t.length)throw new Error("No ops to delete defined");var n={op:"delete",ops:r.map(t,function(t){return{opid:t.opid}})};i.setDeleteFlags(t,!0),c.doOp(n),s("queue-op",n),s("get-current-op",function(t){"select"===t&&s("cancel-select")})},on:function(t,e){return n.on(t,e)}}};e.exports=i},{"./lodash.custom":12}],34:[function(t,e,n){"use strict";function r(){o.call(this)}var i=t("../lodash.custom"),o=t("wildemitter");r.prototype=new o,r.prototype.sub=r.prototype.on,r.prototype.subOnce=r.prototype.once,r.prototype.subMany=function(t){var e=this;i.each(t,function(t,n){e.on(n,t)})},e.exports=r},{"../lodash.custom":12,wildemitter:112}],35:[function(t,e,n){"use strict";Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,i=function(t){var e=n(t);return Math.min(Math.max(e,0),r)};return function(t){var n=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!e(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var s,c=i(r.length),u=e(n)?Object(new n(c)):new Array(c),l=0;l<c;)s=r[l],u[l]=a?void 0===o?a(s,l):a.call(o,s,l):s,l+=1;return u.length=c,u}}())},{}],36:[function(t,e,n){"use strict";function r(t,e,n){for(;t&&t!==n;t=t.parentNode){if("string"==typeof t.className&&l(t,e))return t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(d("got module request:",t),p[t])return p[t].loaded?(d("module is already loaded",t),e()):(d("module is loading",t),void p[t].push(e));p[t]=[e];var n="https://awwapp.com/static/widget/js/modules/"+t;d("loading",n);var r=window.document.getElementsByTagName("script")[0],i=window.document.createElement("script");return i.src=n,i.async=!0,r.parentNode.insertBefore(i,r),i.onload=function(){o.each(p[t],function(t){return t()}),p[t].loaded=!0,d("module loaded",t)},i}var o=(t("bluebird"),t("../lodash.custom")),a=(t("hyperscript"),t("observable")),s=t("query-string"),c="history"in window&&"pushState"in history,u=t("uuid").v4,l=t("amp-has-class"),f=t("xhr"),d=t("debug")("awwapp:utils:utils");t("../ui/icon-definitions");t("./polyfills");var h=e.exports=function(e){function n(t,e){var n=t.url;return n.match(/^http/)||(n="https://awwapp.com/"+("/"===n[0]?n.substr(1):n)),t.query&&(n+="?"+s.stringify(t.query)),t.url=n,f(t,e)}function r(t,e,n){var r="https://s3.amazonaws.com/aww-imagedata/"+u.v4()+"."+e;if("data:"!==t.substr(0,5))return n(null,t);var i=p(t);return v(1),f({method:"PUT",url:r,useXDR:!0,headers:{"Access-Control-Allow-Origin":"*","X-Amz-Storage-Class":"REDUCED_REDUNDANCY","Cache-Control":"max-age=31556940"},body:i},function(t){v(-1),n(t,r)})}function i(t){var e=new Date-new Date(t),n=e/31104e6;return n>1?Math.round(n)+"y":(n=e/2592e6)>1?Math.round(n)+"mo":(n=e/864e5)>1?Math.round(n)+"d":(n=e/36e5)>1?Math.round(n)+"h":(n=e/6e4)>1?Math.round(n)+"m":(n=e/1e3,Math.round(n)+"s")}function o(){var t=m.prettyLinks;if(t&&location.pathname.match(new RegExp("^"+t)))return location.pathname.replace(t,"").replace(/\//g,"");var e=s.parse(location.search.substr(1)).awwBoard;return e||(e=s.parse(location.hash.substr(1)).awwBoard),e}function l(t){if(m.prettyLinks){var e=m.prettyLinks;return[location.origin,e,t,"/"].join("")}var n;return c&&(n=s.parse(window.location.search.substr(1))),n.awwBoard=t,[location.origin,location.pathname,"?",s.stringify(n),location.hash].join("")}function d(t){var e=location.href.indexOf("?")>-1?location.href.substring(location.href.indexOf("?")):"";if(m.prettyLinks&&c){var n=m.prettyLinks+t+"/"+e;return void window.history.pushState({link:t},"",n)}var r=s.parse(window.location.hash.substr(1));if(c&&(r=s.parse(window.location.search.substr(1))),r.awwBoard=t,c){var i=[location.pathname,"?",s.stringify(r),location.hash].join("");window.history.pushState({link:t},"",i)}else window.location.hash=s.stringify(r)}function h(t){return 0===Object.keys(t).length&&t.constructor===Object}var p,g=[];try{p=t("data-uri-to-blob")}catch(t){console.error("Browser doesn't support Blob",t),p=function(){}}var m=(e.canvasContainer,e.options),v=a();return{fetch:n,s3upload:r,isLoading:v,customColors:g,getTimePassed:i,getBoardLink:o,setBoardLink:d,getShareUrl:l,isEmpty:h}},p={};o.extend(h,{hasMatchingParent:r,loadjs:i})},{"../lodash.custom":12,"../ui/icon-definitions":31,"./polyfills":35,"amp-has-class":42,bluebird:48,"data-uri-to-blob":59,debug:61,hyperscript:72,observable:80,"query-string":84,uuid:98,xhr:113}],37:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=t("./widgets/share-board"),o=r(i),a=t("./widgets/google-classroom-share"),s=r(a),c=t("./widgets/manage-participants"),u=r(c),l=(t("loads-css"),t("hyperscript")),f=l.context(),d=t("observable"),h=t("class-list"),p=t("dom-events"),g=t("./lodash.custom"),m=t("../../common/config"),v=t("component-closest"),y=m.CSS_CLASSES.BUTTON_DISABLED,C=m.CSS_CLASSES.BUTTON_ENABLED,b={register:{desc:"Register here and unlock 14-day premium trial."},purchase:{desc:"Subscribe here and unlock full premium access."}},w={intro:{sideButton:{text:"Start from template",linkText:"Ready to collaborate? ",emitterEvent:"widget-board-templates"},mainButton:{text:"Start From Scratch",emitterEvent:"close-menus"},lastSlide:{text:"Congrats! You've successfully learned the first steps to collaborative drawing. You are ready to go.",header:"That's it",imageUrl:"https://awwapp.com//static/site/app-assets/last_slide_image.gif"}},register:{sideButton:{text:"Login",linkText:"Already have an account? ",emitterEvent:"widget-login"},mainButton:{text:"Register for free",emitterEvent:"widget-register"},lastSlide:{text:"Congrats! You are ready to explore the app.",header:"That's it",imageUrl:"https://awwapp.com//static/site/app-assets/last_slide_image.gif"}},purchase:{mainButton:{text:"Go Premium",url:"/info/plans",target:"_blank"},lastSlide:{text:"Congrats! You are ready to explore the app.",header:"That's it",imageUrl:"https://awwapp.com//static/site/app-assets/last_slide_image.gif"}},pdfWatermark:{sideButton:{text:"Register here for free!",linkText:"",emitterEvent:"widget-register"},mainButton:{text:"Download PDF with the watermark",emitterEvent:"start-export-pdf"}}},I=function(t,e){return t.querySelector(e)},A=(t("./ui/icon-definitions"),m.CSS_CLASSES.NOT_VISIBLE),_="Microsoft Internet Explorer"!==navigator.appName;_=_&&!navigator.userAgent.match(/Trident\/7\./);var x="download"in document.createElement("a");e.exports=function(t){function e(){n(),it.currentUser().email?(rt.emit("ga-send","Close tab popup","Registered user"),rt.on("board-joined",function(){n(),rt.emit("edit-board-name"),rt.emit("flash-message","The board is now saved","success",3)}),rt.emit("join-board")):(rt.emit("ga-send","Close tab popup","Unregistered user"),rt.emit("show-tips",null,"register",["save-boards","pro"]))}function n(){if(!ut){if(nt){"segmentation"===nt&&(ft=!0);var t=I(dt,"#"+nt+"-widget");h(t).remove(m.CSS_CLASSES.VISIBLE),h(dt).remove(m.CSS_CLASSES.VISIBLE),"signup"===nt&&lt&&(rt.on("userLoggedIn",function(t){t.email&&tt()}),rt.emit("check-login"),lt=!1)}dt.style.pointerEvents="initial"}}function r(t){var e=I(dt,"#"+t+"-widget"),r=I(e,".button--close"),i=I(e,".js-button-cancel");ut=!1,nt=t,h(dt).add(m.CSS_CLASSES.VISIBLE),h(e).add(m.CSS_CLASSES.VISIBLE),r&&p.on(r,"click",function(t){t.stopImmediatePropagation(),n()}),i&&p.on(i,"click",function(t){t.stopImmediatePropagation(),n()}),p.on(dt,"click",function(t){if(t.target===dt){if(!ft)return;t.stopImmediatePropagation(),n()}})}function i(t,e){var n=I(dt,"#"+t+"-widget");I(n,".message.error")&&I(n,".message.error").remove();for(var r in e){var i,o=I(n,"input[name="+r+"]");if(!o)return i=f(".message.error",e[r].message),void I(n,".js-input-fields").append(i);i=f("p.message.error",e[r].msg),o.after(i),h(I(n,"input[name="+r+"]")).add("input--error")}}function a(t){I(t,".msg--error")&&I(t,".msg--error").remove(),c(t,"input--error")}function c(t,e){for(var n=t.getElementsByClassName(e),r=0;r<n.length;r++)n[r]&&h(n[r]).remove(e)}function l(t,e){if(!it.boardCanDo().boardId){if(at.isEmpty(it.currentUser())&&(!e||!e.forceShare))return rt.emit("show-tips","saved-boards","register");rt.emit("socket-init",{autojoin:!0}),rt.emit("close-menus"),at.isLoading(1),rt.emit("join-board"),rt.on("board-joined",function(n){t&&t(e),rt.off("board-joined",this),rt.emit("flash-message","This board has been saved","success",3),at.isLoading(-1)}),ut=!0}}function O(){G()}function S(){var t=I(dt,"#login-widget"),e=I(t,'input[name="email"]'),i=I(t,'input[name="password"]'),o=I(t,".ctrl-login"),s=I(t,".ctrl-signup"),c=I(t,".fb-connect"),u=I(t,".google-connect"),l=I(t,".twitter-connect"),f=function(t){t.stopImmediatePropagation(),lt=!0};p.on(c,"click",f),p.on(u,"click",f),p.on(l,"click",f),p.on(s,"click",function(t){t.stopImmediatePropagation(),Y("reg","main-login"),n(),O()}),p.on(o,"click",function(t){var n={email:e.value,password:i.value};t.stopImmediatePropagation(),X(n,"login")}),p.on(e,"focus",function(){a(t)}),p.on(i,"focus",function(){a(t)}),p.on(i,"keypress",function(t){("13"==t.keyCode||t.key&&"enter"==t.key.toLowerCase())&&o.click()}),r("login")}function L(){dt.style.pointerEvents="none",r("upload-notify")}function T(){n()}function k(t){var e=I(dt,"#confirm-widget"),i=I(e,"#main-header"),o=I(e,"#main-question"),a=I(e,"#confirm-button"),s=I(e,"#cancel-button");a["data-board-ids"]=t,i.innerText="Delete board",o.innerText="Are you sure you want to delete this board ? This action cannot be undone.",a.innerText="Delete board",s.innerText="Cancel",p.on(a,"click",function(e){if(e.stopImmediatePropagation(),!it.boardInfo().boardId&&!t[0])return void(window.location.href=window.location.href);st({method:"DELETE",url:"/api/v2/admin/boards/delete/",json:{boardIds:a["data-board-ids"]},cors:!0,query:{apiKey:ct},withCredentials:!0},function(e,r){r.statusCode&&200!==r.statusCode?rt.emit("flash-message","Board cannot be deleted because of error: "+JSON.stringify(e),"error",15):(t.indexOf(it.boardInfo().boardId)!==-1&&(window.location.href="https://awwapp.com/",it.boardCanDo().isPermanent=!1,it.boardCanDo().isSnapshot=!1,rt.emit("on-board-delete",!1,!1)),rt.emit("flash-message","The board has been deleted","success",5)),n()})}),p.on(s,"click",function(t){t.preventDefault(),n()}),r("confirm")}function M(){var t=I(dt,"#plugins-widget"),e=I(t,"#plugins-list"),n=I(t,".js-close-widget");if(e.innerHTML="","education"===it.currentUser().accountType){var i=f("input#1.styled-checkbox",{type:"checkbox",value:"value1",checked:it.currentUser().enableClassroom}),o=f("label");o.setAttribute("for","1");var a=f("li.item--email.grid.grid--middle.grid--gapless",[f(".grid__column","Enable Google Classroom"),f(".grid__column.grid__column--shrink",[i,o])]);p.on(i,"click",function(t){B(i.checked)}),e.appendChild(a)}p.on(n,"click",function(t){t.stopImmediatePropagation(),rt.emit("close-menus")}),r("plugins")}function E(t){function e(e){st({method:"post",cors:!0,withCredentials:!0,query:{isInEu:e},url:"/account/is-in-eu"},function(n,r,i){n?(rt.emit("error",n),rt.emit("close-menus")):200===r.statusCode&&e&&(window.location.href=t)})}var i=I(dt,"#eu-member-widget"),o=I(i,"#is-in-eu"),a=I(i,"#is-not-in-eu");p.on(o,"click",function(t){t.stopImmediatePropagation(),e(!0)}),p.on(a,"click",function(t){t.stopImmediatePropagation(),rt.emit("close-menus"),e(!1)}),setTimeout(function(){n(),ft=!1,r("eu-member")},500)}function B(t){st({method:"post",cors:!0,withCredentials:!0,query:{enableClassroom:t},url:"https://awwapp.com/account/update-plugins"},function(t,e,n){if(t)return void rt.emit("error",t);200===e.statusCode&&rt.emit("check-login")})}function N(t,e,i){function o(){u.innerHTML=C+1,k.innerHTML=t[C].header,c.style.transform="translateX("+-1*C*_+"px)"}var a=I(dt,"#slider-widget"),s=I(a,".js-total-pages"),c=I(a,".js-slide-wrapper"),u=I(a,".js-current-page"),l=I(a,".js-left-arrow"),d=I(a,".js-right-arrow"),g=I(a,"#side-button"),v=I(a,"#main-button"),y=I(a,".modal__rotator--nav"),C=0,_=476,x=w[e],O=b[e];t.length<2?y.className.indexOf(A)===-1&&h(y).add(A):y.className.indexOf(A)!==-1&&h(y).remove(A);for(var S=0;S<t.length;S++)if(t[S].tipId===i){var L=t.splice(S);t=L.concat(t);break}for(x&&x.lastSlide&&t.push({desc:x.lastSlide.text,header:x.lastSlide.header,imageUrl:x.lastSlide.imageUrl||""}),"intro"===e&&t.unshift({desc:"Learn how to make the most of your collaborative drawing in a minute.",header:"Welcome to AWW",imageUrl:"http://aww-files.s3.amazonaws.com/tips/hello.gif"}),c.style.width=t.length*_+"px",c.innerHTML="",S=0;S<t.length;S++){var T=f(".modal__rotator--item.mb--2.js-slide-content",{style:{"max-width":"476px","max-height":"300px",overflow:"hidden"}},[f(".modal__rotator--text",[f("p.paragraph.h2.text--muted.js-slide-desc",t[S].desc+(O&&O.desc?" "+O.desc:""))]),f(".modal__rotator--figure",[f("img.js-slide-img",{src:t[S].imageUrl,style:S===t.length-1&&x&&x.lastSlide?{width:"476px"}:{"max-width":"100%","max-height":"100%",margin:"0 auto",display:"block"}})])]);c.appendChild(T)}var k=I(a,".js-slide-title");o(),s.innerHTML="/"+t.length,x&&x.mainButton?(v.className.indexOf(m.CSS_CLASSES.NOT_VISIBLE)!==-1&&h(v).remove(m.CSS_CLASSES.NOT_VISIBLE),v.innerText=x.mainButton.text,x.mainButton.url?v.href=x.mainButton.url:(v.href="#",p.on(v,"click",function(t){t.stopImmediatePropagation(),t.preventDefault(),n(),x.mainButton.emitterEvent&&rt.emit(x.mainButton.emitterEvent)})),x.mainButton.target?v.target=x.mainButton.target:v.target=""):v.className.indexOf(m.CSS_CLASSES.NOT_VISIBLE)===-1&&h(v).add(m.CSS_CLASSES.NOT_VISIBLE),x&&x.sideButton?(g.parentNode.className.indexOf(m.CSS_CLASSES.NOT_VISIBLE)!==-1&&h(g.parentNode).remove(m.CSS_CLASSES.NOT_VISIBLE),g.parentNode.childNodes[0].nodeValue=x.sideButton.linkText,g.innerText=x.sideButton.text,x.sideButton.url?g.href=x.sideButton.url:(g.href="#",p.on(g,"click",function(t){t.stopImmediatePropagation(),t.preventDefault(),n(),x.sideButton.emitterEvent&&rt.emit(x.sideButton.emitterEvent)})),x.sideButton.target?g.target=x.sideButton.target:g.target=""):g.parentNode.className.indexOf(m.CSS_CLASSES.NOT_VISIBLE)===-1&&h(g.parentNode).add(m.CSS_CLASSES.NOT_VISIBLE),p.on(l,"click",function(e){e.stopImmediatePropagation(),e.preventDefault(),C--,C<0&&(C=t.length-1),o()}),p.on(d,"click",function(e){if(e.stopImmediatePropagation(),e.preventDefault(),++C>=t.length){if(x.lastSlide)return;C=0}o()}),r("slider")}function Z(t,e,n){var i=I(dt,"#confirm-load-widget"),o=I(i,".js-load-board"),a=I(i,".js-button-cancel"),s=I(i,".modal__heading"),c=I(i,".paragraph"),u=o.cloneNode(!0),l=a.cloneNode(!0);o.parentNode.replaceChild(u,o),a.parentNode.replaceChild(l,a),t.text?c.innerText=t.text:c.innerText="",t.header?s.innerText=t.header:s.innerText="Confirm",l.href="#",l.target="",l.innerText=t.cancelButtonText,n.href?(l.href=n.href,l.target="_blank"):p.on(l,"click",function(t){t.stopImmediatePropagation(),t.preventDefault(),n()}),u.href="#",u.target="",u.innerText=t.confirmButtonText,e.href?(u.href=e.href,u.target="_blank"):p.on(u,"click",function(t){t.stopImmediatePropagation(),t.preventDefault(),e()}),r("confirm-load")}function P(){function t(t,n,r){j(t).then(function(t){var i=JSON.parse(t);h(n).add(m.CSS_CLASSES.CURRENT),W(e,i,r,"templates")})}var e=I(dt,"#board-templates-widget"),n=!1,i=I(e,".js-templates-tabs"),o=e.getElementsByClassName("js-tabs-link"),a={"tab-1":void 0,"tab-2":"brainstorming","tab-3":"business-analysis","tab-4":"business-visualization","tab-5":"design-thinking","tab-6":"product-design","tab-7":"workflow-planning","tab-8":"education"};g.each(o,function(e){var r;e.classList.contains(m.CSS_CLASSES.CURRENT)&&(n=!0),p.on(e,"click",function(e){e.stopImmediatePropagation();var n=e.target.getAttribute("data-tab")
;c(i,m.CSS_CLASSES.CURRENT);for(var o in a)a.hasOwnProperty(n)&&(r=a[n]);t(r,e.target,n)})}),n||t(a[0],o[0],i[0]),r("board-templates")}function j(t){return new Promise(function(e,n){st({method:"get",cors:!0,withCredentials:!0,query:{category:t},url:"/api/v2/widgets/templates"},function(t,n,r){return t?void rt.emit("error",t):n.statusCode&&200!==n.statusCode?void rt.emit("error",new Error(r)):void e(r)})})}function W(t,e,r,i){var o=I(t,".js-"+i+"-wrapper"),a=it.boardInfo(),s=I(t,".frozen-boards-copy");for("boards"===i&&"shared-boards"!==r&&g.some(e,{isFrozen:!0})?s.style.display="block":"boards"===i&&(s.style.display="none");o.hasChildNodes();)o.removeChild(o.lastChild);g.each(e,function(e){var s,c=at.getTimePassed(e.modifiedAt),u=e.isFrozen?".is--frozen":"";if("shared-boards"!==r){var l=[];e.isFrozen||l.push(f("a.dropdown__menu--link.js-duplicate-board",{href:"#","data-snapshot-link":e.boardSnapshotLink},"Duplicate")),l.push(f("a.dropdown__menu--link.js-delete-board",{href:"#","data-id":e._id},"Delete")),s=f(".modal__"+i+"--dropdown.grid__column.grid__column--shrink",[f("img.modal__"+i+"--dropdots.js-dropdots",{src:"/static/newboard/images/ic-dots.svg"}),f(".dropdown.dropdown__modal",[f("ul.dropdown__menu",[f("li.dropdown__menu--item",l)])])])}var d=f(".modal__"+i+"--item.js-"+i+"-item"+u,{"data-name":e.name},[f(".modal__"+i+"--image.js-"+i+"-image",{"data-boardLink":e.boardLink,"data-isFrozen":e.isFrozen},[f("img",{src:e.screenshotUrl||"",style:{"max-width":"100%","max-height":"100%"}})]),f(".modal__boards--info.grid.grid--middle",[f(".grid__column",[f(".modal__"+i+"--name",e.name),"repository"===i?f(".modal__"+i+"--edited","Last edit "+c+" ago"):""]),s])]);h(d).add(m.CSS_CLASSES.VISIBLE),o.appendChild(d);var g=I(d,".dropdown.dropdown__modal"),y=I(d,".js-dropdots"),C=I(d,".js-delete-board"),b=I(d,".js-duplicate-board"),w=I(d,".js-"+i+"-image");e._id===a.boardId&&h(w).add(m.CSS_CLASSES.CURRENT),y&&p.on(y,"click",function(t){t.preventDefault(),h(g).toggle(m.CSS_CLASSES.VISIBLE)}),C&&p.on(C,"click",function(e){e.preventDefault();var r=v(e.target,".js-delete-board",!0,t),i=r.getAttribute("data-id");e.preventDefault(),e.stopImmediatePropagation(),n(),k([i])}),b&&p.on(b,"click",function(t){t.preventDefault(),t.stopImmediatePropagation(),D(t.target.getAttribute("data-snapshot-link"))}),p.on(w,"click",function(e){e.preventDefault();var r,o=v(e.target,".js-"+i+"-image",!0,t),a=o.getAttribute("data-boardlink"),s="true"===o.getAttribute("data-isfrozen"),c={header:"Load board",confirmButtonText:"Load board"};e.preventDefault(),e.stopImmediatePropagation(),n(),s?(c.text="Hey, this board is locked in a view only mode until you subscribe to one of our plans. Subscribe now to get editing access.",c.cancelButtonText="Subscribe to a pro plan.",r={href:"/info/plans"}):(c.text="If you haven't saved your current board it will erase. Are you sure you want to load the new board?",c.cancelButtonText="No, go back to the current board.",r=function(){return rt.emit("close-menus")}),Z(c,function(){a&&(rt.emit("reset-board"),rt.emit("join-board",{boardLink:a}),n())},r)})});var c=I(t,".input--hsearch"),u=dt.getElementsByClassName("js-"+i+"-item");p.on(c,"keyup",function(t){g.each(u,function(e){e.getAttribute("data-name").toLowerCase().match(t.target.value.toLowerCase())?(h(e).add(m.CSS_CLASSES.VISIBLE),h(e).remove(m.CSS_CLASSES.NOT_VISIBLE)):(h(e).remove(m.CSS_CLASSES.VISIBLE),h(e).add(m.CSS_CLASSES.NOT_VISIBLE))})})}function R(){function t(t,n,r){z(t).then(function(t){var i=JSON.parse(t);h(n).add(m.CSS_CLASSES.CURRENT),W(e,i.boards,r,"boards")})}var e=I(dt,"#board-repository-widget"),n=I(e,".js-boards-tabs"),i=e.getElementsByClassName("js-tabs-link"),o={"tab-1":"my-boards","tab-2":"shared-boards"};g.each(i,function(e){var r;c(n,m.CSS_CLASSES.CURRENT),p.on(e,"click",function(e){e.stopImmediatePropagation();var i=e.target.getAttribute("data-tab");c(n,m.CSS_CLASSES.CURRENT);for(var a in o)o.hasOwnProperty(i)&&(r=o[i]);t(r,e.target,o[i])})}),t(o[0],i[0],n[0]),r("board-repository")}function z(t){var e="shared-boards"===t?"/admin/shared-boards/":"/widgets/board-repository/";return e="/api/v2"+e,new Promise(function(t,n){st({method:"get",cors:!0,withCredentials:!0,query:{apiKey:it.currentUser().key||ct},url:e},function(e,n,r){return e?void rt.emit("error",e):n.statusCode&&200!==n.statusCode?void rt.emit("error",new Error(r)):void t(r)})})}function D(t){var e="https://awwapp.com/b/"+t+"?dis="+encodeURIComponent(JSON.stringify([["edit-board-name"]]));window.open(e,"_blank")}function X(t,e){st({method:"post",url:"/api/v2/widgets/account/",json:t,cors:!0,withCredentials:!0},function(t,r,o){if(r.statusCode&&200!==r.statusCode)i(e,o);else{var a=it.boardInfo(),s=it.boardCanDo();a.isAdmin=!0,it.boardInfo(a),g.each(s,function(t,e){o.features&&o.features[e]&&(s[e]=o.features[e])}),it.boardCanDo(s),o.colors&&rt.emit("set-user-custom-colors",o.colors),rt.emit("update-ui"),rt.emit("check-login"),n()}})}function G(){var t={errors:{message:""}},e=I(dt,"#signup-widget"),o=I(dt,'input[type="checkbox"]'),a=I(e,".ctrl-sign-up"),s=I(e,".ctrl-login"),c=I(e,".email"),u=I(e,".password"),l=I(e,".fb-connect"),f=I(e,".google-connect"),d=function(t){t.stopImmediatePropagation(),lt=!0};p.on(l,"click",d),p.on(f,"click",d),u.value&&c.value&&o.checked||h(a).add("button--disabled"),p.on(s,"click",function(t){t.stopImmediatePropagation(),n(),S()}),p.on(o,"click",function(t){t.stopImmediatePropagation(),o.checked?h(a).remove("button--disabled"):h(a).add("button--disabled")}),p.on(a,"click",function(e){if(e.stopImmediatePropagation(),!c.value&&!u.value||!o.checked)return t.errors.message="Fill all input fields.",void i("signup",t);if(!c.value||c.value.indexOf("@")<0||c.value.substring(c.value.indexOf("@")).indexOf(".")<0)return t.errors.message="Invalid Email.",void i("signup",t);if(!u.value)return t.errors.message="Enter a password.",void i("signup",t);st({method:"post",url:"/register",json:{email:c.value,password:u.value,accountType:"fun",src:"widget"},cors:!0,withCredentials:!0},function(t,e,r){if(e.errors||e.statusCode&&200!==e.statusCode)i("signup",r);else{var o=it.boardInfo(),a=it.boardCanDo();Y("reg","---"),o.isAdmin=!0,it.boardInfo(o),g.each(a,function(t,e){r.features&&r.features[e]&&(a[e]=r.features[e])}),it.boardCanDo(a),rt.emit("update-ui"),rt.emit("check-login"),n(),F()}})}),p.on(u,"keypress",function(t){("13"==t.keyCode||t.key&&"enter"==t.key.toLowerCase())&&a.click()}),r("signup")}function F(){tt()}function Y(t,e,n){var r=new Date;r.setTime(r.getTime()+24*(n||365)*60*60*1e3);var i="expires="+r.toGMTString()+";";if(document.cookie.indexOf(t)<0)document.cookie="_aww_"+t+"="+e+";"+i+"path=/";else if("reg"===t){var o=H("_aww_"+t),a=o.split(",").length-1;a>5&&(o=o.substring(o.indexOf(",")+1)),document.cookie="_aww_"+t+"="+o+","+e+";"+i+"path=/"}}function H(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),r=[],i=0;i<n.length;i++)0==n[i].trim().indexOf(e)&&(r=n[i].trim().split("="));return r.length>0?r[1]:""}function U(){var t=I(dt,"#help-widget"),e=dt.getElementsByClassName("js-help-item"),n=I(dt,".js-showall-link"),i=I(t,".js-help-search"),o=I(t,".js-help-content"),a=o.getElementsByTagName("a");g.each(a,function(t){p.on(t,"click",function(t){t.stopImmediatePropagation()})}),g.each(e,function(t){var e=I(t,".js-question-title"),r=I(t,".js-question-answ");p.on(t,"click",function(t){t.preventDefault(),t.stopImmediatePropagation(),h(r).toggle(m.CSS_CLASSES.VISIBLE),rt.emit("ga-send","HELP",e.innerHTML)}),p.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation(),h(o).add(m.CSS_CLASSES.VISIBLE),h(t).toggle(m.CSS_CLASSES.VISIBLE)}),p.on(i,"keyup",function(n){n.preventDefault(),h(o).add(m.CSS_CLASSES.VISIBLE),e.innerHTML.toLowerCase().match(n.target.value.toLowerCase())?(h(t).add(m.CSS_CLASSES.VISIBLE),h(t).remove(m.CSS_CLASSES.NOT_VISIBLE)):(h(t).add(m.CSS_CLASSES.NOT_VISIBLE),h(t).remove(m.CSS_CLASSES.VISIBLE))})}),r("help")}function V(t){rt.emit("export-pdf",t),rt.emit("flash-message","Your board is being exported. When finished, you'll get an email with a link to the PDF file.","success",7)}function J(){function t(t){if("0"===t.status)return"";e.uid===t.uid&&(t=e);var n,r=".aww-label-small.aww-user-id"+(t.uid===e.uid?".active":""),i=".aww-switch.ctrl-switch.aww-ctrl-users.right"+("RW"===t.status?".checked":""),o=f("span"+r,t.nick);return it.boardInfo().isBoardAdmin&&t!==e&&it.boardCanDo().advancedTools&&(n=f("a"+i,{href:"#","data-uid":t.uid})),f(".aww-user-list-item.ctrl-switch-control",[o,n])}var e=it.currentUser(),i=I(dt,"#users-widget"),o=I(i,".ctrl-user-list-wrapper"),a=I(i,".save-name-button"),s=I(i,".ctrl-invite"),c=I(i,".user-permissions-message"),u=it.boardInfo().connectAllAsGuests?"":".checked";if(it.boardCanDo().advancedTools&&it.boardInfo().isBoardAdmin){var l=f(".aww-user-list-item.ctrl-switch-control",[f("span.aww-label-small.aww-user-id","All users"),f("a.aww-switch.ctrl-switch.right"+u,{href:"#","data-uid":"all-users"})]);o.appendChild(l)}else it.boardInfo().isBoardAdmin?it.boardCanDo().advancedTools?c.innerHTML="":c.innerHTML="Premium users can allow or disallow someone to draw.":c.innerHTML="Only the creator of the board can allow or disallow someone to draw.";var m=function(e){return f("div",g.map(e,t))},y=f(".aww-user-list",d.transform(it.users,m));o.appendChild(y);var C=I(i,".ctrl-nick");C.value=it.currentUser().nick,p.on(C,"change",function(t){var e=t.target.value;rt.emit("change-user",{nick:e})}),p.on(i,"click",function(t){"#"===t.target.href&&t.preventDefault();var e=v(t.target,".ctrl-switch",!0,i);if(e){var n=e.getAttribute("data-uid");if(n){var r=h(e).contains("checked"),o=[];if("all-users"===n){var a=window.document.getElementsByClassName("ctrl-user-list-wrapper")[0].getElementsByClassName("aww-ctrl-users");r?rt.emit("set-connect-all-as-guests",!1):rt.emit("set-connect-all-as-guests",!0),g.each(a,function(t){o.push(t.getAttribute("data-uid"))})}r?rt.emit("promote-user",n,o):rt.emit("demote-user",n,o)}}}),p.on(s,"click",function(t){t.preventDefault(),rt.emit("widget-shared-board")}),p.on(a,"click",function(t){t.preventDefault(),rt.emit("flash-message","Name saved","success",3),n()}),r("users")}function K(){var t=(I(dt,"#general-widget"),it.isConnected()),e=it.boardInfo().isAdmin,i=it.boardCanDo().audio,o=it.boardCanDo().advancedTools,a=it.boardCanDo().audioEnabled,s=void 0!==(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia),c=I(dt,".ctrl-show-users"),u=I(dt,".ctrl-board-controls"),l=I(dt,".ctrl-voice"),d=I(dt,".ctrl-export-pdf"),g=I(dt,".ctrl-voice-toggle"),m=I(dt,".ctrl-voice-label"),y=I(dt,".ctrl-chat-toggle"),C=I(dt,".ctrl-chat-label");t||(h(c).remove("aww-link"),c.style.display="block",c.style.padding="25px 24px",c.style.margin="0",c.style.borderBottom="1px solid #e2e2e2",c.style.color="#999",c.style.pointerEvents="none",c.innerHTML=c.innerHTML+" ",c.appendChild(f("span.aww-label-small","(Share board first)")),u.style.pointerEvents="none",l.style.pointerEvents="none",m.innerHTML=m.innerHTML+" (Share board first)",C.innerHTML=C.innerHTML+" (Share board first)"),o?h(c).add("is-pro"):d.style.display="none",s&&i&&(e||a)||(l.style.display="none");var b=I(dt,".ctrl-download-picture");if(b.onclick=function(){t?rt.emit("ga-send","download image","shared"):rt.emit("ga-send","download image","root")},_&&x){var w;try{w=ot.getDataURL()}catch(t){b.style.display="none"}b.href=w}else p.on(b,"click",function(t){return t.preventDefault(),n(),rt.emit("download-picture")});p.on(dt,"click",function(t){return t.preventDefault(),v(t.target,".ctrl-invite",!0)?rt.emit("widget-shared-board"):v(t.target,".ctrl-show-users",!0)?J():v(t.target,".ctrl-share-picture",!0)?(n(),rt.emit("share-picture")):void(v(t.target,".ctrl-export-pdf",!0)&&(n(),V(!0)))}),it.isAudioActive()&&h(g).add("checked"),p.on(g,"checked",function(){rt.emit("webrtc-on"),changeAudioState(!0)}),p.on(g,"unchecked",function(){rt.emit("webrtc-off"),changeAudioState(!1)}),it.isChatVisible()&&h(y).add("checked"),p.on(y,"checked",function(){return rt.emit("chat-toggle")}),p.on(y,"unchecked",function(){return rt.emit("chat-toggle")}),r("general")}function q(){var t=I(dt,"#confirm-widget"),e=I(t,"#main-header"),i=I(t,"#main-question"),o=I(t,"#confirm-button"),a=I(t,"#cancel-button");e.innerText="Clear page",i.innerText="Are you sure you want to clear this page? This action cannot be undone.",o.innerText="Clear page",a.innerText="Cancel",p.off(o,"click",Q),p.off(a,"click",n),p.on(o,"click",Q),p.on(a,"click",n),r("confirm")}function Q(){rt.emit("do-clear"),n()}function $(t,e){if("string"==typeof t)if("RW"===t)t=!1;else{if("RO"!==t)return console.error("User permission code not correct");t=!0}var n="/api/v2/admin/boards/"+it.boardInfo().boardId+"/connectAllAsGuests",e=e||function(){};st({method:"post",cors:!0,withCredentials:!0,json:{connectAllAsGuests:t},url:n},function(n,r,i){n||r.statusCode&&200!==r.statusCode?(rt.emit("error",n||i.error),e(r.statusCode,i.error)):rt.emit("set-connect-all-as-guests",t)})}function tt(){var t,e=m.CSS_CLASSES.NOT_VISIBLE,n=(I(dt,"#segmentation-widget"),dt.querySelectorAll(".fields__item")),i=dt.querySelectorAll(".fields__popup--item"),o=I(dt,".other-segment-input"),a=I(dt,".other-segment-button");g.each(n,function(n){p.on(n,"mouseover",function(r){var i=I(n,".fields__popup");t&&h(t).add(e),h(i).remove(e),t=i}),p.on(n,"mouseout",function(n){t&&h(t).add(e)})}),g.each(i,function(n){p.on(n,"click",function(r){if(r.preventDefault(),n.id.indexOf("other")!==-1)return h(t).add(e),void o.focus();et(n.id,!0)})}),p.on(o,"keyup",function(t){o.value.length>0&&a.className.indexOf(y)!==-1?(h(a).remove(y),h(a).add(C)):0===o.value.length&&a.className.indexOf(C)!==-1&&(h(a).remove(C),h(a).add(y))}),p.on(a,"click",function(t){t.preventDefault(),a.className.indexOf(y)===-1&&et(o.value,!0)}),ft=!1,r("segmentation")}function et(t,e){st({method:"post",cors:!0,json:{segment:t,getTips:e},withCredentials:!0,query:{apiKey:ct},url:"/account/set-segment/"},function(t,e,r){(t||e.statusCode>=400)&&rt.emit("error",t||r.error),n(),N(r.tips,"intro")})}var nt,rt=t.dispatcher,it=(t.canvasContainer,t.board),ot=t.canvas,at=t.utils,st=at.fetch,ct=t.options.apiKey,ut=!1,lt=!1,ft=!0,dt=(document.getElementById("aww-container"),document.getElementById("aww-widgets-wrapper"));rt.on("close-menus",n),rt.on("save-board-on-close-window",e),rt.on("widget-help",U),rt.on("widget-login",S),rt.on("widget-register",O),rt.on("register-finished",F),rt.on("upload-notify-widget",L),rt.on("confirm-widget",Z),rt.on("widget-board-repository",R),rt.on("widget-board-templates",P),rt.on("open-google-classroom-dialog",function(){return(0,s.default)({board:it,saveBoard:l,dispatcher:rt,showModal:r,closeDialog:n,setConnectAllAsGuests:$,utils:at,config:m,type:"create-assignment"})}),rt.on("widget-shared-board",function(){return(0,o.default)({board:it,saveBoard:l,dispatcher:rt,showModal:r,closeDialog:n,setConnectAllAsGuests:$,utils:at,config:m})}),rt.on("manage-participants",function(){if(!it.isConnected())return rt.emit("flash-message","Share your board first","success",3);(0,u.default)({board:it,dispatcher:rt,showModal:r,closeDialog:n,setConnectAllAsGuests:$,utils:at})}),rt.on("widget-general",K),rt.on("widget-confirm-trash",q),rt.on("turn-in-assignment",function(){return(0,s.default)({board:it,saveBoard:l,dispatcher:rt,showModal:r,closeDialog:n,setConnectAllAsGuests:$,utils:at,config:m,type:"turn-in-assignment"})}),rt.on("save-board",l),rt.on("close-window",function(){return window.close()}),rt.on("plugins-widget",M),rt.on("EU-member-widget",E),rt.on("slider-widget",N),rt.on("file-dropped",T),rt.on("delete-this-board",k),rt.on("set-default-user-permissions",$),rt.on("get-cookie",function(t,e){e(H(t))}),rt.on("set-cookie",function(t,e,n){Y(t,e,n)}),rt.on("widget-join-board",function(){var t=I(dt,"#join-board-widget"),e=I(t,".js-board-name"),i=I(t,".js-nick-input"),o=I(t,".js-join-board"),a=void 0;rt.on("board-joined",function(t){e.innerText=t.boardName,i.value=a=t.currentUser.nick,i.focus()}),p.on(o,"click",function(t){t.preventDefault(),t.stopPropagation(),i.value!=a&&rt.emit("change-user",{nick:i.value}),n()}),r("join-board")}),rt.on("widget-start-drawing",function(){r("start-drawing")}),rt.on("widget-keyboard-shortcuts",function(){var t=I(dt,"#keyboard-shortcuts-widget"),e=navigator.platform.toUpperCase().indexOf("MAC")!==-1,n=!0,i=!1,o=void 0;try{for(var a,s=t.querySelectorAll("li.cmd")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.style.display=e?"block":"none"}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}var c=!0,u=!1,l=void 0;try{for(var f,d=t.querySelectorAll("li.ctrl")[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){f.value.style.display=e?"none":"block"}}catch(t){u=!0,l=t}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}r("keyboard-shortcuts")})}},{"../../common/config":5,"./lodash.custom":12,"./ui/icon-definitions":31,"./widgets/google-classroom-share":38,"./widgets/manage-participants":39,"./widgets/share-board":40,"class-list":52,"component-closest":55,"dom-events":65,hyperscript:72,"loads-css":77,observable:80}],38:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){function e(t,e){v(t,"li",function(t){return(0,s.default)(t).remove("is--current")}),(0,s.default)(e).add("is--current");var n=e.getAttribute("data-tab");v(R,".js-tab-content",function(t){return(0,s.default)(t).remove("is--current")});var r=g(R,'.js-tab-content[data-tab="'+n+'"]');(0,s.default)(r).add("is--current")}function n(){"read-only"===X!==k.boardInfo().connectAllAsGuests&&N("read-only"===X,function(t,n){401===t&&e(z,g(z,'li[data-tab="read-write"]'))})}function r(){var t=k.boardInfo().boardLink,e=Z.getShareUrl(t),n="https://classroom.google.com/share?url="+encodeURIComponent(e);v(R,".js-share-to-google-classroom-go",function(t){return t.href=n})}function i(){r(),B(W)}function o(){gapi.load("client:auth2",I)}function a(t){t?k.isConnected()||"create-assignment"!==j?l():E(l):c()}function c(){gapi.auth2.getAuthInstance().signIn().then(function(t){a(!0)},function(t){t.error&&d()})}function l(){"create-assignment"===j?S():"turn-in-assignment"===j&&(m(),M.emit("is-loading",-1))}function d(){M.emit("is-loading",-1),L()}function m(){M.emit("is-loading",1);var t=gapi.client.classroom,e={courseId:k.boardInfo().classroomCourseId,courseWorkId:k.boardInfo().classroomAssignmentId};t.courses.courseWork.studentSubmissions.list(e).then(function(n){if(!n)return void d();var r=n.result.studentSubmissions[0].id;e.id=r,e.resource={addAttachments:[{link:{url:"https://awwapp.com/b/"+k.boardInfo().boardLink}}]},t.courses.courseWork.studentSubmissions.modifyAttachments(e).then(function(n){delete e.resource,t.courses.courseWork.studentSubmissions.turnIn(e).then(function(t){M.emit("is-loading",-1),M.emit("flash-message","Yay, you've successfully turned in the assignment","success",10)}).catch(function(t){M.emit("is-loading",-1),h("Error, while turning in a google classroom attachment",t),t&&t.result&&t.result.error&&"PERMISSION_DENIED"===t.result.error.status?M.emit("flash-message","Sorry, you don't have a permission to turn in this assignment","error",10):M.emit("flash-message","Something wrong happened, sorry about this. Please contact us.","error",10)})}).catch(function(t){M.emit("is-loading",-1),h("Error, while modifying a google classroom attachment",t),t&&t.result&&t.result.error&&"PERMISSION_DENIED"===t.result.error.status?M.emit("flash-message","Sorry, you don't have a permission to turn in this assignment","error",10):M.emit("flash-message","Something wrong happened, sorry about this. Please contact us.","error",10)})}).catch(function(t){M.emit("is-loading",-1),t&&t.result&&t.result.error&&"UNAUTHENTICATED"===t.result.error.status?L():(h("Error, while listing student submissions in google classroom",t),M.emit("flash-message","Something went wrong. Did you try turning in an assignment twice?","error",10))})}function I(){gapi.client.init({discoveryDocs:b,clientId:C,scope:w}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(a),a(!1)}).catch(function(t){M.emit("flash-message","error","There was an error"+t,10),M.emit("is-loading",-1)})}function A(t){u.default.on(t,"mouseover",function(){(0,s.default)(t).add("hover")}),u.default.on(t,"mouseout",function(){(0,s.default)(t).remove("hover")})}function _(){return gapi.client.classroom.courses.list({pageSize:1e3}).then(function(t){return t},function(t){t.result.error&&c()})}function x(t,e,n,r,o){o.init(t),u.default.on(t,"click",function(t){t.preventDefault(),o.showCalendar()}),A(e),_().then(function(t){if(0===Object.keys(t.result).length&&t.result.constructor===Object)return void d();var o=t.result.courses;n.innerHTML="",f.default.each(o,function(t){n.appendChild(p("a.course",{id:t.id,href:"#"},t.name))});var a=g(R,".course");u.default.on(a,"click",function(t){t.preventDefault(),r.innerHTML=this.innerHTML,T=this.id,(0,s.default)(e).remove("hover")}),i(),M.emit("is-loading",-1)}).catch(function(t){})}function O(t,e,n){var r="/api/v2/admin/boards/"+k.boardInfo().boardId+"/set-assignment-id";Z.fetch({method:"post",cors:!0,withCredentials:!0,json:{courseId:t,assignmentId:e,courseTitle:n},url:r},function(t,e,n){(t||e.statusCode&&200!==e.statusCode)&&M.emit("error",t||n.error)})}function S(){function t(t,e,n,r,i,o,a){a.style.display="inline-block";var s=gapi.client.classroom,c={courseId:t,title:e,description:n,materials:[{link:{url:"https://awwapp.com/b/"+r}}],workType:"ASSIGNMENT",state:"PUBLISHED"};i&&(c.dueDate=i,c.dueTime={hours:0,minutes:0,seconds:0,nanos:0}),s.courses.courseWork.create(c).then(function(n){var r=n.result.id,i=n.result.alternateLink;r?(O(t,r,e),o.href=i,o.style.display="inline-block",a.style.display="none"):o.innerHTML="Sorry. For some reason you can't create an assignment in Google Classroom"})}if(!k.currentUser().isPremium)return M.emit("show-message",{message:"As a free user you can save up to 2 boards. You can delete old boards or sign up for premium&nbsp;",link:{text:"here",target:"_blank",src:"/edu"}}),void M.emit("close-menus");if(!k.currentUser().email)return M.emit("show-message",{message:"To create an assignment, you have to have an account. Sign up for free&nbsp;",link:{text:"here",target:"_blank",src:"/register"}}),void M.emit("close-menus");var e=g(R,".aww-dropdown#choose-course"),n=g(R,".choose-course-button"),r=g(R,".choose-course-option-text"),i=g(R,".view-in-google-classroom"),o=g(R,".cssload-spin-box"),a=g(R,".aww-dropdown-content.courses"),c=g(R,"#due-date"),l=g(R,".google-classroom-title"),f=g(R,".google-classroom-instructions"),d=g(R,".calendar-warning"),h=g(R,".go-button"),m=k.boardInfo(),v=m.boardSnapshotLink;u.default.on(h,"click",function(e){e.stopImmediatePropagation(),l.value?T?t(T,l.value,f.value,v,y.date,i,o):n.style.border="2px solid #ed1c24":(0,s.default)(l).add("error")});var y={month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["S","M","T","W","T","F","S"],month_days:[31,28,31,30,31,30,31,31,30,31,30,31],today:new Date,opt:{},data:[],_calendar_active_instance:{},date:void 0,getStyle:function(t,e){if(t.currentStyle)var n=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),r=t.currentStyle[e]||t.currentStyle[n];else if(window.getComputedStyle){e=e.replace(/([A-Z])/g,"-$1").toLowerCase();var r=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}return"opacity"==e&&t.filter?r=parseFloat(t.filter.match(/opacity\=([^)]*)/)[1])/100:"width"==e&&isNaN(r)?r=t.clientWidth||t.offsetWidth:"height"==e&&isNaN(r)&&(r=t.clientHeight||t.offsetHeight),r},getPosition:function(t){for(var e=0,n=0;t;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return navigator.userAgent.indexOf("Mac")!=-1&&void 0!==document.body.leftMargin&&(e+=document.body.leftMargin,offsetTop+=document.body.topMargin),new Array(e,n)},selectDate:function(t){var e=this._calendar_active_instance;document.getElementById(e.opt.input).value=t,e.hideCalendar()},makeCalendar:function(t,e,n){var r=new Date;if(t<r.getYear()+1900||e<r.getMonth()&&t===r.getYear()+1900)return d.innerHTML="Due date must be in the future.",void(d.style.display="block");d.style.display="none",t=parseInt(t),e=parseInt(e),n=parseInt(n);var i=e+1,o=t;i>=12&&(i=0,o++);var a=e-1,s=t;a<0&&(a=11,s--);for(var c=[],u=0;u<this.month_names.length;u++){var l="";u==e&&(l="selected"),c.push(p("option",{value:u,selected:l},this.month_names[u]))}for(var f=p("select.calendar-month",{name:"calendar-month",onchange:function(){y.makeCalendar(t,this.value)}},c),h=p("a",{style:{"margin-right":"5px"},onclick:function(){y.makeCalendar(s,a)},title:this.month_names[a]+" "+s},"<"),g=p("a",{style:{"margin-left":"5px"},onclick:function(){y.makeCalendar(o,i)},title:this.month_names[i]+" "+o},">"),m=p("th.calendar-title",[h,f,g]),v=p("tr",m),C=[],b=0;b<7;b++)C.push(p("td",this.weekdays[b]));var w=p("tr.header",C),I=p("thead",[v,w]),A=new Date(t,e,1),_=A.getDay(),x=1,O=0;this.month_days[1]=t%4==0?29:28;for(var S=this.month_days[e],L=[],u=0;u<=5&&!(M>=S);u++){for(var T=[],k=0;k<7;k++)if(x>S?O=0:k>=_&&!O&&(O=1),O){var M=x,E=e+1;M<10&&(M="0"+M),E<10&&(E="0"+E);var B="",N=this.today.getYear();N<1900&&(N+=1900),N==t&&this.today.getMonth()==e&&this.today.getDate()==x&&(B=" today"),n==x&&(B+=" selected"),B+=" "+this.weekdays[k].toLowerCase();var n=p("td.days"+B,[p("a.aww-link",{date:E+"/"+M+"/"+t,year:t,month:E,day:M,onclick:function(){if(r.getYear()+1900===this.year&&r.getMonth()===this.month-1&&r.getDate()>=this.day)return d.innerHTML="Due date must be in the future.",void(d.style.display="block");d.style.display="none",y.selectDate(this.date),y.date={year:this.year,month:this.month,day:this.day}}},M)]);T.push(n),x++}else T.push(p("td.days"," "));var Z=p("tr",T);L.push(Z)}var P=p("tbody",L),j=p("table",[I,P]),W=document.getElementById(this.opt.calendar);W.lastChild&&W.removeChild(W.lastChild),W.appendChild(j),this.data=[]},showCalendar:function(){var t=document.getElementById(this.opt.input),e=document.getElementById(this.opt.calendar);if(this.opt.display_element)var n=document.getElementById(this.opt.display_element);else var n=document.getElementById(this.opt.input);var r=this.getPosition(n),i=parseInt(this.getStyle(n,"width"));e.style.left=r[0]+i+10+"px",e.style.top=r[1]+"px";var o=new Date,a=t.value;if(a){var s=!1,c=a.split("-");3==c.length&&(c[1]--,s=new Date(c[0],c[1],c[2])),s&&!isNaN(s.getYear())&&(o=s)}var u=o.getYear();u<1900&&(u+=1900),y.makeCalendar(u,o.getMonth(),o.getDate()),document.getElementById(this.opt.calendar).style.display="inline-block",this._calendar_active_instance=this},hideCalendar:function(t){var e="";e=t?t.opt.calendar:this._calendar_active_instance.opt.calendar,e&&(document.getElementById(e).style.display="none"),this._calendar_active_instance={}},init:function(t){if(this.opt.input=t.id,!this.opt.calendar||!document.getElementById(this.opt.calendar)){this.opt.calendar||(this.opt.calendar="calender_div_"+Math.round(100*Math.random()));var e=p(".calendar#"+this.opt.calendar,{style:{display:"none"}});t.parentNode.appendChild(e)}}};x(c,e,a,r,y)}function L(){M.emit("confirm-widget",{header:"Oops...Something went wrong",text:"To enable Google Classroom assignments do the following steps:\n\n* Enable pop-ups for awwapp.com.\n* Log into the browser with your Google Classroom credentials.",cancelButtonText:"Close",confirmButtonText:"Learn how to enable pop-ups"},{href:"/info/how-to-enable-popups"},function(){return M.emit("close-menus")})}var T,k=t.board,M=t.dispatcher,E=t.saveBoard,B=t.showModal,N=(t.closeDialog,t.setConnectAllAsGuests),Z=t.utils,P=t.config,j=t.type,W="google-classroom-assignment",R=g(document,"#"+W+"-widget"),z=g(R,"ul.js-invite-permissions"),D=g(R,".success--message"),X="read-write";D.className.indexOf(P.CSS_CLASSES.NOT_VISIBLE)===-1&&(0,s.default)(D).add(P.CSS_CLASSES.NOT_VISIBLE),"yes"!==R.attributes.dataEventHandlers&&"create-assignment"===j&&(R.attributes.dataEventHandlers="yes",function(){y(z,"li","click",function(t,r){r.preventDefault();var i=t.getAttribute("data-tab");if(k.boardCanDo().advancedTools&&P.ADVANCED_SHARING_OPTIONS.indexOf(i)===-1){D.className.indexOf(P.CSS_CLASSES.NOT_VISIBLE)!==-1&&(0,s.default)(D).remove(P.CSS_CLASSES.NOT_VISIBLE);var o,a=g(D,"p"),c=g(D,"a"),u="Hey there, this is a pro feature. To "+("read-only"===i?"share board as read only ":"share a copy of the board ");return k.boardInfo().isAdmin?(u+="get one of the pro plans here.",c.src="/info/plans",c.target="_blank",o="Go premium here."):(u+="register for free here.",c.onclick=function(t){t.preventDefault(),M.emit("widget-register")},o="Register here for free."),a.innerText=u,void(c.innerText=o)}D.className.indexOf(P.CSS_CLASSES.NOT_VISIBLE)===-1&&(0,s.default)(D).add(P.CSS_CLASSES.NOT_VISIBLE),e(z,t),X=i,n()})}());var G=window.document.createElement("script");G.src="https://apis.google.com/js/api.js",G.async=!0,G.onload=function(){o()},document.body.appendChild(G),M.emit("is-loading",1)};var i=t("hyperscript"),o=r(i),a=t("class-list"),s=r(a),c=t("dom-events"),u=r(c),l=t("lodash"),f=r(l),d=t("clipboard"),h=(r(d),t("debug")("awwapp:google-classroom-share")),p=o.default.context(),g=function(t,e){return t.querySelector(e)},m=function(t,e){return t.querySelectorAll(e)},v=function(t,e,n){for(var r=m(t,e),i=0;i<r.length;i++)n(r[i])},y=function(t,e,n,r){return v(t,e,function(t){return u.default.on(t,n,function(e){return r(t,e)})})},C="547306870731-75bm564htihdjtts2tosjri9e1q6kb7s.apps.googleusercontent.com",b=["https://www.googleapis.com/discovery/v1/apis/classroom/v1/rest"],w="https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.rosters"},{"class-list":52,clipboard:54,debug:61,"dom-events":65,hyperscript:72,lodash:78}],39:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){function e(t,e){var r=void 0;return r=e?[h("b",t.nick),h("i"," (you)")]:[h("span",t.nick)],h(".list__item",[h(".list__item--start",[h(".user--avatar",[h("img",{src:t.avatarThumbUrl?t.avatarThumbUrl:"/static/site/app-assets/ic-avatar.svg",alt:""})]),h("p.paragraph",{color:"green"},r)]),h(".list__item--end",e?[]:[h("input#user-"+t.uid+".o-toggle.js-user-toggle",{type:"checkbox",checked:"RW"===t.status,disabled:e||!n.isBoardOwner()}),h("label.o-toggle__button",{htmlFor:"user-"+t.uid})])])}var n=t.board,r=t.dispatcher,i=t.showModal,o=t.closeDialog,a=t.setConnectAllAsGuests,s=(t.utils,p(document,"#manage-participants-widget")),u=p(s,"#manage-participants__all"),l=p(s,".js-user-list");"yes"!==s.attributes.dataEventHandlers&&(s.attributes.dataEventHandlers="yes",function(){c.default.on(u,"change",function(){n.isBoardOwner()&&(g(l,".js-user-toggle").forEach(function(t){t.checked=u.checked}),d("Setting connectAllAsGuests",!u.checked),a(!u.checked))}),c.default.on(p(s,".js-invite-users"),"click",function(t){t.preventDefault(),t.stopPropagation(),o(),r.emit("widget-shared-board")}),c.default.on(l,"change",function(t){if(t.target.id&&"user-"===t.target.id.substr(0,5)&&n.isBoardOwner()){var e=t.target.id.substr(5);d((t.target.checked?"Promoting":"Demoting")+" user "+e),r.emit(t.target.checked?"promote-user":"demote-user",e)}})}()),u.checked=!n.boardInfo().connectAllAsGuests,n.isBoardOwner()||(u.disabled=!0),function(t,n){var r=[];for(var i in n)i!==t.uid&&r.push(n[i]);r.sort(function(t,e){var n=t.nick.toLowerCase(),r=e.nick.toLowerCase();return n===r?0:n>r?1:-1}),l.innerHTML="",l.appendChild(e(t,!0));var o=!0,a=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var f=c.value;"0"!==f.status&&l.appendChild(e(f))}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{
if(a)throw s}}}(n.currentUser(),n.users()),d("Manage participants",n.currentUser(),n.users()),i("manage-participants")};var i=t("hyperscript"),o=r(i),a=t("class-list"),s=(r(a),t("dom-events")),c=r(s),u=t("clipboard"),l=(r(u),t("debug")),f=r(l),d=(0,f.default)("awwapp:manage-participants"),h=o.default.context(),p=function(t,e){return t.querySelector(e)},g=function(t,e){return t.querySelectorAll(e)}},{"class-list":52,clipboard:54,debug:61,"dom-events":65,hyperscript:72}],40:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){function e(t,e){g(t,"li",function(t){return(0,s.default)(t).remove("is--current")}),(0,s.default)(e).add("is--current")}function n(t){g(E,".js-tab-content",function(t){return(0,s.default)(t).remove("is--current")});var e=h(E,'.js-tab-content[data-tab="'+t+'"]');if((0,s.default)(e).add("is--current"),"embed"===t)var n=h(e,"textarea.input");else var n=h(e,"input");setTimeout(function(){n.focus(),n.setSelectionRange(0,n.value.length)},100)}function r(t,e){return new f.default(t,{target:function(n){var r=t.textContent;return t.textContent="Copied!",setTimeout(function(){t.textContent=r},2e3),e}})}function i(){var t=j.value.split(/;,\s+/);j.value="";var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(""!==(a=a.trim())){var s={};a.indexOf("@")===-1?s.background="#ed1c24":y.push(a),w(a,s)}}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}function o(){"read-only"===F!==A.boardInfo().connectAllAsGuests&&L("read-only"===F,function(t,n){401===t&&e(B,h(B,'li[data-tab="read-write"]'))})}function a(t){var e="/api/v2/boards/"+A.boardInfo().boardId+"/send-invites";T.fetch({url:e,method:"post",json:{emails:t,useSnapshot:"duplicate"===F},cors:!0,withCredentials:!0},function(t,e,n){if(t||e.statusCode&&200!==e.statusCode)_.emit("flash-message","Error sending invites","error",3);else if(n.unsent&&n.unsent.length>0){var r="";v.each(n.unsent,function(t){return r+=t+", "}),_.emit("show-message",{message:"Your invitations are sent, but these recipients didn't receive your email: "+r.substring(0,r.length-2),link:{text:"See why this happens",src:"/info/email-invites-failed",target:"_blank"}})}else _.emit("flash-message","Invites sent","success",3)}),S()}function c(){var t=A.boardInfo(),e="duplicate"===F?t.boardSnapshotLink:t.boardLink,n=T.getShareUrl(e),r='<iframe width="100%" height="650px" src="'+n+'"></iframe>',i="https://api.qrserver.com/v1/create-qr-code/?color=5BC179&bgcolor=FFFFFF&data="+encodeURIComponent(n)+"&qzone=1&margin=0&size=1000x1000&ecc=L",o="Hey, join me on this collaborative whiteboard. #awwapp "+n;I="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n),h(E,"input.js-board-link").value=n,h(E,"textarea.js-embed-code").value=r,h(E,".js-qr-code").src=i,h(E,"#share-to-twitter").href="https://twitter.com/intent/tweet?text="+encodeURIComponent(o)}function l(){g(P,".tag",function(t){return t.remove()}),j.value="",y=[],c(),O(M)}function C(t){b(v.filter(H,function(e){return e.indexOf(t)!==-1&&y.indexOf(e)===-1}).slice(0,5))}function b(t){Z.innerHTML="",v.each(t,function(t){var e=d("li.item--email.grid.grid--middle.grid--gapless",d(".grid__column",t));u.default.on(e,"click",function(e){e.stopImmediatePropagation(),e.preventDefault(),y.push(t),w(t),C(j.value)}),Z.appendChild(e)})}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e["border-radius"]="3px",P.insertBefore(d(".tag",{style:e},[t,d("span",{style:{cursor:"pointer"}},[h(E,".tag-template svg").cloneNode(!0)])]),j)}var I,A=t.board,_=t.dispatcher,x=t.saveBoard,O=t.showModal,S=t.closeDialog,L=t.setConnectAllAsGuests,T=t.utils,k=t.config,M="share-board",E=h(document,"#"+M+"-widget"),B=h(E,"ul.js-invite-permissions"),N=h(E,"ul.js-invite-type"),Z=h(E,".email-autocomplete-dropdown"),P=h(E,".js-email-tags"),j=h(E,".js-add-mail"),W=h(E,'.js-tab-content[data-tab="share"] .js-copy-to-clipboard'),R=h(E,'.js-tab-content[data-tab="embed"] .js-copy-to-clipboard'),z=h(E,".js-qr-popup"),D=h(z,"a"),X=h(E,".js-send-invite"),G=h(E,".success--message"),F="read-write",Y=h(E,"#share-to-facebook"),H=[];A.boardInfo(c),G.className.indexOf(k.CSS_CLASSES.NOT_VISIBLE)===-1&&(0,s.default)(G).add(k.CSS_CLASSES.NOT_VISIBLE),"yes"!==E.attributes.dataEventHandlers&&(E.attributes.dataEventHandlers="yes",function(){u.default.on(j,"keydown",function(t){if("Tab"===t.key)t.stopImmediatePropagation(),t.preventDefault(),i();else if("Backspace"===t.key&&0===j.value.length){var e=p(P,".tag");e.length>0&&(e[e.length-1].remove(),y.splice(y.length-1,1)),t.stopImmediatePropagation(),t.preventDefault()}}),u.default.on(j,"keyup",function(t){t.stopImmediatePropagation(),t.preventDefault(),C(j.value)}),u.default.on(j,"keypress",function(t){" "!==t.key&&","!==t.key&&"Enter"!==t.key||(t.stopImmediatePropagation(),t.preventDefault(),i())}),u.default.on(j,"click",function(t){t.stopImmediatePropagation(),t.preventDefault(),C(j.value)}),u.default.on(P,"click",function(t){t.preventDefault();var e=!0,n=!1,r=void 0;try{for(var i,o=t.path[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("DIV"===a.tagName&&(0,s.default)(a).contains("tag"))return y.splice(y.indexOf(a.innerText),1),a.remove(),void j.focus()}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}),u.default.on(E,"click",function(){Z.innerHTML=""}),r(W,h(E,"input.js-board-link")),r(R,h(E,"textarea.js-embed-code")),m(B,"li","click",function(t,n){n.preventDefault();var r=t.getAttribute("data-tab");if(!A.boardCanDo().advancedTools&&k.ADVANCED_SHARING_OPTIONS.indexOf(r)!==-1){G.className.indexOf(k.CSS_CLASSES.NOT_VISIBLE)!==-1&&(0,s.default)(G).remove(k.CSS_CLASSES.NOT_VISIBLE);var i,a=h(G,"p"),u=h(G,"a"),l="Hey there, this is a pro feature. To "+("read-only"===r?"share board as read only ":"share a copy of the board ");return A.boardInfo().isAdmin?(l+="get one of the pro plans here.",u.src="/info/plans",u.target="_blank",i="Go premium here."):(l+="register for free here.",u.onclick=function(t){_.emit("widget-register")},i="Register here for free."),a.innerText=l,void(u.innerText=i)}G.className.indexOf(k.CSS_CLASSES.NOT_VISIBLE)===-1&&(0,s.default)(G).add(k.CSS_CLASSES.NOT_VISIBLE),e(B,t),F=r,o(),c()}),m(N,"li","click",function(t,r){r.preventDefault();var i=t.getAttribute("data-tab");e(N,t),n(i)}),u.default.on(h(E,".js-show-qr"),"click",function(t){t.preventDefault(),(0,s.default)(z).add("is--visible")}),u.default.on(D,"click",function(t){t.preventDefault(),(0,s.default)(z).remove("is--visible")}),u.default.on(X,"click",function(t){t.preventDefault(),i();var e=[];g(P,".tag",function(t){var n=t.innerText;n.indexOf("@")!==-1&&e.push(n)}),e.length&&a(e)}),u.default.on(Y,"click",function(t){return t.preventDefault(),window.open(I,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1})}()),A.isConnected()?l():x(l,{forceShare:!0}),function(){T.fetch({method:"get",cors:!0,withCredentials:!0,url:"/api/v2/invited-emails/get-emails"},function(t,e,n){(t||e.statusCode>=400)&&_.emit("error",t||n.error),n&&(H=JSON.parse(n).emails)})}()};var i=t("hyperscript"),o=r(i),a=t("class-list"),s=r(a),c=t("dom-events"),u=r(c),l=t("clipboard"),f=r(l),d=o.default.context(),h=function(t,e){return t.querySelector(e)},p=function(t,e){return t.querySelectorAll(e)},g=function(t,e,n){for(var r=p(t,e),i=0;i<r.length;i++)n(r[i])},m=function(t,e,n,r){return g(t,e,function(t){return u.default.on(t,n,function(e){return r(t,e)})})},v=t("lodash"),y=[]},{"class-list":52,clipboard:54,"dom-events":65,hyperscript:72,lodash:78}],41:[function(t,e,n){var r=t("amp-has-class"),i=t("amp-is-string"),o=t("amp-is-array"),a=t("amp-trim"),s=Array.prototype.slice;e.exports=function(t,e){if(e=2===arguments.length&&i(e)?a(e).split(/\s+/):o(e)?e:s.call(arguments,1),1===e.length&&t.classList)return e[0]&&t.classList.add(e[0]),t;for(var n,c=[],u=0,l=e.length,f=t.className;u<l;u++)(n=e[u])&&!r(f,n)&&c.push(n);return c.length&&(t.className=a((f+" "+c.join(" ")).replace(/\s{2,}/g," "))),t}},{"amp-has-class":42,"amp-is-array":43,"amp-is-string":44,"amp-trim":45}],42:[function(t,e,n){var r=t("amp-is-string");e.exports=function(t,e){return(" "+(r(t)?t:t.className).replace(/[\t\r\n\f]/g," ")+" ").indexOf(" "+e+" ")!==-1}},{"amp-is-string":44}],43:[function(t,e,n){var r=Object.prototype.toString,i=Array.isArray;e.exports=i||function(t){return"[object Array]"===r.call(t)}},{}],44:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){return"[object String]"===r.call(t)}},{}],45:[function(t,e,n){e.exports=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},{}],46:[function(t,e,n){t("webrtc-adapter");e.exports=function(t,e,n){var r,i=(window.URL,e),o={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(n)for(r in n)o[r]=n[r];return i?"audio"===i.tagName.toLowerCase()&&(o.audio=!0):i=document.createElement(o.audio?"audio":"video"),o.disableContextMenu&&(i.oncontextmenu=function(t){t.preventDefault()}),o.autoplay&&(i.autoplay="autoplay"),o.muted&&(i.muted=!0),!o.audio&&o.mirror&&["","moz","webkit","o","ms"].forEach(function(t){var e=t?t+"Transform":"transform";i.style[e]="scaleX(-1)"}),i.srcObject=t,i}},{"webrtc-adapter":103}],47:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,a,s=t.length;o=r(t),a=new f(3*s/4-o),n=o>0?s-4:s;var c=0;for(e=0;e<n;e+=4)i=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,a[c++]=255&i):1===o&&(i=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}function a(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(r));return i.join("")}function c(t){for(var e,n=t.length,r=n%3,i="",o=[],a=0,c=n-r;a<c;a+=16383)o.push(s(t,a,a+16383>c?c:a+16383));return 1===r?(e=t[n-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=c;for(var u=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;h<p;++h)u[h]=d[h],l[d.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],48:[function(t,e,n){(function(t,r){!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:void 0!==r?i=r:"undefined"!=typeof self&&(i=self),i.Promise=t()}}(function(){var e,n,i;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(e,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=u}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var c;try{throw new Error}catch(t){c=t}var u=e("./schedule"),l=e("./queue"),f=e("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=c},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof t){var d={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(e,a,void 0,l,d),u._then(s,c,void 0,l,d),l._setOnCancel(u)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){return n(t,this.pop()).apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),c=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(c){var u=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return o(n).call(u,c)}else if("function"==typeof f){var d=o(f).call(u,c);if(d===a)return d;if(d)return o(n).call(u,c)}else if(r.isObject(c)){for(var h=i(f),p=0;p<h.length;++p){var g=h[p];if(f[g]!=c[g])continue t}return o(n).call(u,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+R.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?R.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function c(){return this._onCancelField}function u(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function p(){this._trace=new E(this._peekContext())}function g(t,e){if(z(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=_(t);R.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),R.notEnumerableProp(t,"__stackCleaned__",!0)}}}function m(t,e,n,r,i){if(void 0===t&&null!==e&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=I(s),u=c.length-1;u>=0;--u){var l=c[u];if(!X.test(l)){var f=l.match(G);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(c.length>0)for(var d=c[0],u=0;u<s.length;++u)if(s[u]===d){u>0&&(a="\n"+s[u-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(h,!0,e)}}function v(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),y(n)}function y(t,e,r){if(at.warnings){var i,o=new W(t);if(e)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=_(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||x(o,"",!0)}}function C(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function I(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||F.test(r),o=i&&rt(r);i&&!o&&(H&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function A(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||F.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function _(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?A(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:I(e)}}function x(t,e,n){if("undefined"!=typeof console){var r;if(R.isObject(t)){var i=t.stack;r=e+Y(i,t)}else r=e+String(t);"function"==typeof Z?Z(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function O(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){j.throwLater(t)}"unhandledRejection"===t?et(t,n,r)||i||x(n,"Unhandled rejection "):et(t,r)}function S(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():R.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+L(e)+">, no stack trace)"}function L(t){return t.length<41?t:t.substr(0,38)+"..."}function T(){return"function"==typeof ot}function k(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function M(t,e){if(T()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,c=0;c<i.length;++c){var u=k(i[c]);if(u){n=u.fileName,a=u.line;break}}for(var c=0;c<o.length;++c){var u=k(o[c]);if(u){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(rt=function(t){if(D.test(t))return!0;var e=k(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function E(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,E),e>32&&this.uncycle()}var B,N,Z,P=n._getDomain,j=n._async,W=e("./errors").Warning,R=e("./util"),z=R.canAttachTrace,D=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,X=/\((?:timers\.js):\d+:\d+\)/,G=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,F=null,Y=null,H=!1,U=!(0==R.env("BLUEBIRD_DEBUG")),V=!(0==R.env("BLUEBIRD_WARNINGS")||!U&&!R.env("BLUEBIRD_WARNINGS")),J=!(0==R.env("BLUEBIRD_LONG_STACK_TRACES")||!U&&!R.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=R.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(V||!!R.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),j.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){O("rejectionHandled",B,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),O("unhandledRejection",N,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return y(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=P();N="function"==typeof t?null===e?t:R.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=P();B="function"==typeof t?null===e?t:R.domainBind(e,t):void 0};var q=function(){};n.longStackTraces=function(){if(j.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&T()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;at.longStackTraces=!0,q=function(){if(j.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),j.enableTrampoline(),at.longStackTraces=!1},n.prototype._captureStackTrace=p,n.prototype._attachExtraTrace=g,r.activateLongStackTraces(),j.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return at.longStackTraces&&T()};var Q=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return R.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!R.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return R.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!R.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),R.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!R.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),$=function(){return R.isNode?function(){return t.emit.apply(t,arguments)}:R.global?function(t){var e="on"+t.toLowerCase(),n=R.global[e];return!!n&&(n.apply(R.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},et=function(t){var e=!1;try{e=$.apply(null,arguments)}catch(t){j.throwLater(t),e=!0}var n=!1;try{n=Q(t,tt[t].apply(null,arguments))}catch(t){j.throwLater(t),n=!0}return n||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&q()),"warnings"in t){var e=t.warnings;at.warnings=!!e,K=at.warnings,R.isObject(e)&&"wForgottenReturn"in e&&(K=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(j.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=c,n.prototype._setOnCancel=u,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,nt=f,at.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,n.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,n.prototype._fireEvent=o)),n},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var nt=d,rt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;R.inherits(E,Error),r.CapturedTrace=E,E.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;s<t-1?(c._parent=e[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)e[l]._length=u,u++;return}}}},E.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=_(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(I(i.stack.split("\n"))),i=i._parent;w(r),b(r),R.notEnumerableProp(t,"stack",C(n,r)),R.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():S(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,F=/^\s*at\s*/,Y=t;var e=Error.captureStackTrace;return rt=function(t){return D.test(t)},function(t,n){Error.stackTraceLimit+=6,e(t,n),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return F=/@/,Y=t,H=!0,function(t){t.stack=(new Error).stack};var r;try{throw new Error}catch(t){r="stack"in t}
return"stack"in n||!r||"number"!=typeof Error.stackTraceLimit?(Y=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?S(e):e.toString()},null):(F=/^\s*at\s*/,Y=t,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(Z=function(t){console.warn(t)},R.isNode&&t.stderr.isTTY?Z=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:R.isNode||"string"!=typeof(new Error).stack||(Z=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:V,longStackTraces:!1,cancellation:!1,monitoring:!1};return J&&n.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return h},checkForgottenReturns:m,setBounds:M,warn:y,deprecated:v,CapturedTrace:E,fireDomEvent:Q,fireGlobalEvent:$}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"==typeof r?r:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(t){if(!(this instanceof i))return new i(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,a,s=t("./es5"),c=s.freeze,u=t("./util"),l=u.inherits,f=u.notEnumerableProp,d=r("Warning","warning"),h=r("CancellationError","cancellation error"),p=r("TimeoutError","timeout error"),g=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<m.length;++v)"function"==typeof Array.prototype[m[v]]&&(g.prototype[m[v]]=Array.prototype[m[v]]);s.defineProperty(g.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),g.prototype.isOperational=!0;var y=0;g.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},l(i,Error);var C=Error.__BluebirdErrorTypes__;C||(C=c({CancellationError:h,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:g}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:C,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:C.CancellationError,OperationalError:C.OperationalError,TimeoutError:C.TimeoutError,AggregateError:C.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},d=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:d,keys:s,names:s,defineProperty:u,getDescriptor:c,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function a(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function s(){return u.call(this,this.promise._target()._settledValue())}function c(t){if(!a(this,t))return d.e=t,d}function u(t){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),t);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var h=n(l,i);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new f("late cancellation observer");return i._attachExtraTrace(p),d.e=p,d}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(s,c,void 0,this,void 0)}}}return i.isRejected()?(a(this),d.e=t,d):(a(this),t)}var l=t("./util"),f=e.CancellationError,d=l.errorObj,h=t("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,u);var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var a=arguments[r];if(!l.isObject(a))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(h(i,s,this),1,void 0,u)},i}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=h(n[o])(t);if(r._popContext(),a===d){r._pushContext();var s=e.reject(d.e);return r._popContext(),s}var c=i(a,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(a.cancellation()){var s=new e(r),c=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}var u=t("./errors"),l=u.TypeError,f=t("./util"),d=f.errorObj,h=f.tryCatch,p=[];f.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),t=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=h(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===d)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&null===(o=s(o,this._yieldHandlers,this._promise)))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));p.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=u();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(t,n,a,o).promise()}var u=e._getDomain,l=t("./util"),f=l.tryCatch,d=l.errorObj,h=e._async;l.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(n=n*-1-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var u=this._promise,l=this._callback,h=u._boundValue();u._pushContext();var p=f(l).call(h,t,n,o),g=u._popContext();if(a.checkForgottenReturns(p,g,null!==s?"Promise.filter":"Promise.map",u),p===d)return this._reject(p.e),!0;var m=i(p,this._promise);if(m instanceof e){m=m._target();var v=m._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,r[n]=m,m._proxy(this,(n+1)*-1),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);p=m._value()}r[n]=p}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];c=a.isArray(u)?s(t).apply(l,u):s(t).call(l,u)}else c=s(t)();var f=r._popContext();return o.checkForgottenReturns(c,f,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new u(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors"),u=c.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===c&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===c&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===c&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function r(){}function i(t,e){if(null==t||t.constructor!==o)throw new C("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new C("expecting a function but got "+p.classString(e))}function o(t){t!==w&&i(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function c(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var u,l=function(){return new C("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},d=function(t){return o.reject(new C(t))},h={},p=e("./util");u=p.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},p.notEnumerableProp(o,"_getDomain",u);var g=e("./es5"),m=e("./async"),v=new m;g.defineProperty(o,"_async",{value:v});var y=e("./errors"),C=o.TypeError=y.TypeError;o.RangeError=y.RangeError;var b=o.CancellationError=y.CancellationError;o.TimeoutError=y.TimeoutError,o.OperationalError=y.OperationalError,o.RejectionError=y.OperationalError,o.AggregateError=y.AggregateError;var w=function(){},I={},A={},_=e("./thenables")(o,w),x=e("./promise_array")(o,w,_,d,r),O=e("./context")(o),S=O.create,L=e("./debuggability")(o,O),T=(L.CapturedTrace,e("./finally")(o,_,A)),k=e("./catch_filter")(A),M=e("./nodeback"),E=p.errorObj,B=p.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!p.isObject(o))return d("Catch statement predicate: expecting an object but got "+p.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,k(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(L.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+p.classString(t);arguments.length>1&&(n+=", "+p.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?d("expecting a function but got "+p.classString(t)):this.all()._then(t,void 0,void 0,I,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},o.prototype.error=function(t){return this.caught(p.originatesFromRejection,t)},o.getNewLibraryCopy=n.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=B(t)(M(e,n));return r===E&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new x(t).promise()},o.cast=function(t){var e=_(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new C("expecting a function but got "+p.classString(t));return v.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var a=void 0!==i,s=a?i:new o(w),c=this._target(),l=c._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=u();if(0!=(50397184&l)){var d,h,g=c._settlePromiseCtx;0!=(33554432&l)?(h=c._rejectionHandler0,d=t):0!=(16777216&l)?(h=c._fulfillmentHandler0,d=e,c._unsetRejectionIsUnhandled()):(g=c._settlePromiseLateCancellationObserver,h=new b("late cancellation observer"),c._attachExtraTrace(h),d=e),v.invoke(g,c,{handler:null===f?d:"function"==typeof d&&p.domainBind(f,d),promise:s,receiver:r,value:h})}else c._addCallbacks(t,e,s,r,f);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==h)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:p.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:p.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=_(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0==(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var c=new b("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},o.prototype._rejectCallback=function(t,e,n){var r=p.ensureErrorObject(t),i=r===t;if(!i&&!n&&L.warnings()){var o="a promise was rejected with a non-error: "+p.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){if(t!==w){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){r._pushContext();var o;e===I?n&&"number"==typeof n.length?o=B(t).apply(this._boundValue(),n):(o=E,o.e=new C("cannot .spread() a non-array: "+p.classString(n))):o=B(t).call(e,n);var a=r._popContext();i=r._bitField,0==(65536&i)&&(o===A?r._reject(n):o===E?r._rejectCallback(o.e,!1):(L.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var a=t instanceof o,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof T&&n.isFinallyHandler()?(n.cancelPromise=t,B(e).call(n,i)===E&&t._reject(E.e)):e===f?t._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(t):a||t instanceof x?t._cancel():n.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(c&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():v.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return v.fatalError(t,p.isNode);(65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled()}},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){return L.deprecated("Promise.defer","new Promise"),{promise:new o(w),resolve:a,reject:s}},p.notEnumerableProp(o,"_makeSelfResolutionError",l),e("./method")(o,w,_,d,L),e("./bind")(o,w,_,L),e("./cancel")(o,x,d,L),e("./direct_resolve")(o),e("./synchronous_inspection")(o),e("./join")(o,x,_,w,v,u),o.Promise=o,o.version="3.5.0",e("./map.js")(o,x,d,_,w,L),e("./call_get.js")(o),e("./using.js")(o,d,_,S,w,L),e("./timers.js")(o,w,L),e("./generators.js")(o,d,w,_,r,L),e("./nodeify.js")(o),e("./promisify.js")(o,w),e("./props.js")(o,x,_,d),e("./race.js")(o,w,_,d),e("./reduce.js")(o,x,d,_,w,L),e("./settle.js")(o,x,L),e("./some.js")(o,x,d),e("./filter.js")(o,w),e("./each.js")(o,w),e("./any.js")(o),p.toFastProperties(o),p.toFastProperties(o.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new o(w)),L.setBounds(m.firstLineError,p.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){s=s._target();var u=s._bitField;if(this._values=s,0==(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null===(s=c.asArray(s))){var l=i("expecting an array or an iterable object but got "+c.classString(s)).reason();return void this._promise._rejectCallback(l,!1)}if(0===s.length)return void(o===-5?this._resolveEmptyArray():this._resolve(a(o)));this._iterate(s)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0==(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!=(33554432&a)?this._promiseFulfilled(c._value(),s):0!=(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},
s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!w.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,C);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,n,r){for(var s=h.inheritedDataKeys(t),c=[],u=0;u<s.length;++u){var l=s[u],f=t[l],d=r===I||I(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,d)||c.push(l,f)}return a(c,e,n),c}function c(t,r,i,o,a,s){function c(){var i=r;r===d&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof l&&this!==u?this[l]:t,c=p(o,s);try{a.apply(i,g(arguments,c))}catch(t){o._rejectCallback(m(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),l=t;return"string"==typeof l&&(t=o),h.notEnumerableProp(c,"__isPromisified__",!0),c}function u(t,e,n,r,i){for(var o=new RegExp(A(e)+"$"),a=s(t,e,o,n),c=0,u=a.length;c<u;c+=2){var l=a[c],f=a[c+1],p=l+e;if(r===_)t[p]=_(l,d,l,f,e,i);else{var g=r(f,function(){return _(l,d,l,f,e,i)});h.notEnumerableProp(g,"__isPromisified__",!0),t[p]=g}}return h.toFastProperties(t),t}function l(t,e,n){return _(t,e,void 0,t,null,n)}var f,d={},h=t("./util"),p=t("./nodeback"),g=h.withAppended,m=h.maybeWrapAsError,v=h.canEvaluate,y=t("./errors").TypeError,C={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+b.join("|")+")$"),I=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},A=function(t){return t.replace(/([$])/,"\\$")},_=v?f:c;e.promisify=function(t,e){if("function"!=typeof t)throw new y("expecting a function but got "+h.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?d:e.context,o=!!e.multiArgs,a=l(t,n,o);return h.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var i=e.filter;"function"!=typeof i&&(i=I);var o=e.promisifier;if("function"!=typeof o&&(o=_),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=h.inheritedDataKeys(t),s=0;s<a.length;++s){var c=t[a[s]];"constructor"!==a[s]&&h.isClass(c)&&(u(c.prototype,r,i,o,n),u(c,r,i,o,n))}return u(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(t){var n,a=r(t);return u(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,c=t("./util"),u=c.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),d=function(t){for(var e=new s,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=d(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,r(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return s(c);if(null===(t=a.asArray(t)))return i("expecting an array or an iterable object but got "+a.classString(t));var u=new e(n);void 0!==o&&u._propagateFrom(o,3);for(var l=u._fulfill,f=u._reject,d=0,h=t.length;d<h;++d){var p=t[d];(void 0!==p||d in t)&&e.cast(p)._then(l,f,void 0,u,null)}return u}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=d();this._fn=null===a?n:h.domainBind(a,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function u(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+h.classString(e)):new s(t,e,n,i).promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=p(n._fn);r._pushContext();var o;(o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var d=e._getDomain,h=t("./util"),p=h.tryCatch;h.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],29:[function(e,n,i){"use strict";var o,a=e("./util"),s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var u=r.setImmediate,l=t.nextTick;o=a.isRecentNode?function(t){u.call(r,t)}:function(e){l.call(t,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var f=c.resolve();o=function(t){f.then(t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:s:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),i()}}();n.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection;t("./util").inherits(i,n),i.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,c=t("./errors").AggregateError,u=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===u){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return u.e=t,u}}function a(t){try{return f.call(t,"_promise0")}catch(t){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,d=c.tryCatch(r).call(t,o,a);return f=!1,s&&d===u&&(s._rejectCallback(d.e,!0,!0),s=null),l}var c=t("./util"),u=c.errorObj,l=c.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(u,null,null,t,void 0),r.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(n),s=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,c=new i(setTimeout(function(){n.isPending()&&f(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,a,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(a>=u)return l._fulfill();var o=c(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(t){return s(t)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,u=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function d(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var p=t("./util"),g=t("./errors").TypeError,m=t("./util").inherits,v=p.errorObj,y=p.tryCatch,C={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():C},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==C?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},m(f,l),f.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+p.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var c=new h(t),f=0;f<t;++f){var g=o[f];if(l.isDisposer(g)){var m=g;g=g.promise(),g._setDisposable(m)}else{var C=r(g);C instanceof e&&(g=C._then(d,null,null,{resources:c,index:f},void 0))}c[f]=g}for(var b=new Array(c.length),f=0;f<b.length;++f)b[f]=e.resolve(c[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}I._pushContext(),i=y(i);var r=s?i.apply(void 0,t):i(t),o=I._popContext();return a.checkForgottenReturns(r,o,"Promise.using",I),r}),I=w.lastly(function(){var t=new e.PromiseInspection(w);return u(c,t)});return c.promise=I,I._setOnCancel(c),I},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new g}}},{"./errors":12,"./util":36}],36:[function(e,n,i){"use strict";function o(){try{var t=M;return M=null,t.apply(this,arguments)}catch(t){return k.e=t,k}}function a(t){return M=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function c(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return s(t)?new Error(y(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!L.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function d(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return L.defineProperty(t,e,r),t}function h(t){throw t}function p(t){try{if("function"==typeof t){var e=L.names(t.prototype),n=L.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=Z.test(t+"")&&L.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function g(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function m(t){return P.test(t)}function v(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(t){return"[no string representation]"}}function C(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{d(t,"isOperational",!0)}catch(t){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function I(t){return C(t)&&L.propertyIsWritable(t,"stack")}function A(t){return{}.toString.call(t)}function _(t,e,n){for(var r=L.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{L.defineProperty(e,o,L.getDescriptor(t,o))}catch(t){}}}function x(e){return D?t.env[e]:void 0}function O(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function S(t,e){return t.bind(e)}var L=e("./es5"),T="undefined"==typeof navigator,k={e:{}},M,E="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null,B=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},N=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(L.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(t,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}t=L.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),Z=/this\s*\.\s*\S+\s*=/,P=/^[a-z$_][a-z$_0-9]*$/i,j=function(){return"stack"in new Error?function(t){return I(t)?t:new Error(y(t))}:function(t){if(I(t))return t;try{throw new Error(y(t))}catch(t){return t}}}(),W=function(t){return L.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};W=function(t){return L.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?R(t):null}}var z=void 0!==t&&"[object process]"===A(t).toLowerCase(),D=void 0!==t&&void 0!==t.env,X={isClass:p,isIdentifier:m,inheritedDataKeys:N,getDataPropertyOrDefault:f,thrower:h,isArray:L.isArray,asArray:W,notEnumerableProp:d,isPrimitive:s,isObject:c,isError:C,canEvaluate:T,errorObj:k,tryCatch:a,inherits:B,withAppended:l,maybeWrapAsError:u,toFastProperties:g,filledRange:v,toString:y,canAttachTrace:I,ensureErrorObject:j,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:A,copyDescriptors:_,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:z,hasEnvVariables:D,env:x,global:E,getNativePromise:O,domainBind:S};X.isRecentNode=X.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),X.isNode&&X.toFastProperties(t);try{throw new Error}catch(t){X.lastLineError=t}n.exports=X},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:83}],49:[function(t,e,n){},{}],50:[function(t,e,n){e.exports=function(t){var e=String.prototype.split,n=/()??/.exec("")[1]===t;return function(r,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return e.call(r,i,o);var a,s,c,u,l=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),d=0,i=new RegExp(i.source,f+"g");for(r+="",n||(a=new RegExp("^"+i.source+"$(?!\\s)",f)),o=o===t?-1>>>0:o>>>0;(s=i.exec(r))&&!((c=s.index+s[0].length)>d&&(l.push(r.slice(d,s.index)),!n&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(s[e]=t)}),s.length>1&&s.index<r.length&&Array.prototype.push.apply(l,s.slice(1)),u=s[0].length,d=c,l.length>=o));)i.lastIndex===s.index&&i.lastIndex++;return d===r.length?!u&&i.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}}()},{}],51:[function(t,e,n){"use strict";function r(t){if(t>K)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return o(t,e,n)}function o(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return Y(t)?f(t,e,n):"string"==typeof t?u(t,e):d(t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t,e,n){return a(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}function c(t){return a(t),r(t<0?0:0|h(t))}function u(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,e),o=r(n),a=o.write(t,e);return a!==n&&(o=o.slice(0,a)),o}function l(t){for(var e=t.length<0?0:0|h(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=i.prototype,r}function d(t){if(i.isBuffer(t)){var e=0|h(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if(H(t)||"length"in t)return"number"!=typeof t.length||U(t.length)?r(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(t){if(t>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return 0|t}function p(t){return+t!=t&&(t=0),i.alloc(+t)}function g(t,e){if(i.isBuffer(t))return t.length;if(H(t)||Y(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,U(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:C(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):C(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}var u;if(i){var l=-1;for(u=n;u<s;u++)if(o(t,u)===o(e,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===c)return l*a}else l!==-1&&(u-=u-l),l=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var f=!0,d=0;d<c;d++)if(o(t,u+d)!==o(e,d)){f=!1;break}if(f)return u}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(U(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return F(z(e,t.length-n),t,n,r)}function I(t,e,n,r){return F(D(e),t,n,r)}function A(t,e,n,r){return I(t,e,n,r)}function _(t,e,n,r){return F(G(e),t,n,r)}function x(t,e,n,r){return F(X(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?V.fromByteArray(t):V.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var c,u,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:c=t[i+1],128==(192&c)&&(f=(31&o)<<6|63&c)>127&&(a=f);break;case 3:c=t[i+1],u=t[i+2],128==(192&c)&&128==(192&u)&&(f=(15&o)<<12|(63&c)<<6|63&u)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:c=t[i+1],u=t[i+2],l=t[i+3],128==(192&c)&&128==(192&u)&&128==(192&l)&&(f=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return L(r)}function L(t){var e=t.length;if(e<=q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=q));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=R(t[o]);return i}function E(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,o,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Z(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,r,i){return e=+e,n>>>=0,i||Z(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return e=+e,n>>>=0,
i||Z(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,r,52,8),n+8}function W(t){if(t=t.trim().replace(Q,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(t){return V.toByteArray(W(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Y(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function H(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function U(t){return t!==t}var V=t("base64-js"),J=t("ieee754");n.Buffer=i,n.SlowBuffer=p,n.INSPECT_MAX_BYTES=50;var K=2147483647;n.kMaxLength=K,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return s(t,e,n)},i.allocUnsafe=function(t){return c(t)},i.allocUnsafeSlow=function(t){return c(t)},i.isBuffer=function(t){return null!=t&&t._isBuffer===!0},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=g,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,s=n-e,c=Math.min(a,s),u=this.slice(r,o),l=t.slice(e,n),f=0;f<c;++f)if(u[f]!==l[f]){a=u[f],s=l[f];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},i.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return I(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),J.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),J.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),J.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),J.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){N(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=i.isBuffer(t)?t:new i(t,r),c=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%c]}return this};var Q=/[^+\/0-9A-Za-z-_]/g},{"base64-js":47,ieee754:73}],52:[function(t,e,n){function r(t){function e(t){var e=l();a(e,t)>-1||(e.push(t),f(e))}function n(t){var e=l(),n=a(e,t);n!==-1&&(e.splice(n,1),f(e))}function r(t){return a(l(),t)>-1}function s(t){return r(t)?(n(t),!1):(e(t),!0)}function c(){return t.className}function u(t){return l()[t]||null}function l(){return i(t.className.split(" "),o)}function f(e){var n=e.length;t.className=e.join(" "),h.length=n;for(var r=0;r<e.length;r++)h[r]=e[r];delete e[n]}var d=t.classList;if(d)return d;var h={add:e,remove:n,contains:r,toggle:s,toString:c,length:0,item:u};return h}function i(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r])&&n.push(t[r]);return n}function o(t){return!!t}var a=t("indexof");e.exports=r},{indexof:75}],53:[function(t,e,n){!function(r,i){if("function"==typeof define&&define.amd)define(["module","select"],i);else if(void 0!==n)i(e,t("select"));else{var o={exports:{}};i(o,r.select),r.clipboardAction=o.exports}}(this,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(t){return t&&t.__esModule?t:{default:t}}(e),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},{select:86}],54:[function(t,e,n){!function(r,i){if("function"==typeof define&&define.amd)define(["module","./clipboard-action","tiny-emitter","good-listener"],i);else if(void 0!==n)i(e,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};i(o,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=o.exports}}(this,function(t,e,n,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var u=i(e),l=i(n),f=i(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(t,n){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return s(e,t),h(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,f.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return c("action",t)}},{key:"defaultTarget",value:function(t){var e=c("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return c("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(l.default);t.exports=p})},{"./clipboard-action":53,"good-listener":70,"tiny-emitter":95}],55:[function(t,e,n){function r(t,e,n){for(n=n||document.documentElement;t&&t!==n;){if(i(t,e))return t;t=t.parentNode}return i(t,e)?t:null}try{var i=t("matches-selector")}catch(e){var i=t("component-matches-selector")}e.exports=r},{"component-matches-selector":56,"matches-selector":56}],56:[function(t,e,n){function r(t,e){if(!t||1!==t.nodeType)return!1;if(a)return a.call(t,e);for(var n=i.all(e,t.parentNode),r=0;r<n.length;++r)if(n[r]==t)return!0;return!1}try{var i=t("query")}catch(e){var i=t("component-query")}var o=Element.prototype,a=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;e.exports=r},{"component-query":57,query:57}],57:[function(t,e,n){function r(t,e){return e.querySelector(t)}n=e.exports=function(t,e){return e=e||document,r(t,e)},n.all=function(t,e){return e=e||document,e.querySelectorAll(t)},n.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return r=t.one,n.all=t.all,n}},{}],58:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function n(t){if(!t._start)try{r(t)}catch(e){if(t._tasks[t._ended+t._active-1])o(t,e);else if(!t._data)throw e}}function r(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,o=n[r];n[r]=i(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||u)}}function i(t,e){return function(r,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=r?o(t,r):(t._data[e]=i,t._waiting?n(t):a(t))))}}function o(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(t){}t._active=NaN,a(t)}function a(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function s(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new e(t)}var c=[].slice,u={};e.prototype=s.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=c.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),n(this),this},abort:function(){return null==this._error&&o(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},a(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,a(this),this}},t.queue=s,Object.defineProperty(t,"__esModule",{value:!0})})},{}],59:[function(t,e,n){function r(t){return t.split(";")[0].slice(5)}var i=window.Blob,o=100==new i([new Uint8Array(100)]).size;e.exports=function(t){for(var e=t.split(",")[1],n=atob(e),a=new ArrayBuffer(n.length),s=new Uint8Array(a),c=0;c<n.length;c++)s[c]=n.charCodeAt(c);o||(s=a);var u=new i([s],{type:r(t)});return u.slice=u.slice||u.webkitSlice,u}},{}],60:[function(t,e,n){function r(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=u?Math.round(t/u)+"h":t>=c?Math.round(t/c)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return a(t,l,"day")||a(t,u,"hour")||a(t,c,"minute")||a(t,s,"second")||t+" ms"}function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,c=60*s,u=60*c,l=24*u,f=365.25*l;e.exports=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return r(t);if("number"===n&&isNaN(t)===!1)return e.long?o(t):i(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],61:[function(t,e,n){(function(r){function i(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),e){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}}function c(){var t;try{t=n.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}n=e.exports=t("./debug"),n.log=a,n.formatArgs=o,n.save=s,n.load=c,n.useColors=i,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(c())}).call(this,t("_process"))},{"./debug":62,_process:83}],62:[function(t,e,n){function r(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function i(t){function e(){if(e.enabled){var t=e,r=+new Date,i=r-(u||r);t.diff=i,t.prev=u,t.curr=r,u=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;s++;var i=n.formatters[r];if("function"==typeof i){var a=o[s];e=i.call(t,a),o.splice(s,1),s--}return e}),n.formatArgs.call(t,o);(e.log||n.log||console.log.bind(console)).apply(t,o)}}return e.namespace=t,e.enabled=n.enabled(t),e.useColors=n.useColors(),e.color=r(t),"function"==typeof n.init&&n.init(e),e}function o(t){n.save(t),n.names=[],n.skips=[];for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function a(){n.enable("")}function s(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i.debug=i.default=i,n.coerce=c,n.disable=a,n.enable=o,n.enabled=s,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var u},{ms:60}],63:[function(t,e,n){function r(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=r},{}],64:[function(t,e,n){function r(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function i(t,e,n,r){return function(n){n.delegateTarget=o(n.target,e),n.delegateTarget&&r.call(t,n)}}var o=t("./closest");e.exports=r},{"./closest":63}],65:[function(t,e,n){var r=t("synthetic-dom-events"),i=function(t,e,n,r){return t.addEventListener(e,n,r||!1)},o=function(t,e,n,r){return t.removeEventListener(e,n,r||!1)},a=function(t,e,n,r){function a(i){o(t,e,a,r),n(i)}i(t,e,a,r)},s=function(t,e,n){var i=r(e,n);t.dispatchEvent(i)};document.addEventListener||(i=function(t,e,n){return t.attachEvent("on"+e,n)}),document.removeEventListener||(o=function(t,e,n){return t.detachEvent("on"+e,n)}),document.dispatchEvent||(s=function(t,e,n){var i=r(e,n);return t.fireEvent("on"+i.type,i)}),e.exports={on:i,off:o,once:a,emit:s}},{"synthetic-dom-events":92}],66:[function(t,e,r){(function(){function t(t){return!!t.exifdata}function i(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}function o(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}function a(t,e){function n(n){var r=s(n);t.exifdata=r||{};var i=c(n);if(t.iptcdata=i||{},w.isXmpEnabled){var o=m(n);t.xmpdata=o||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var r=i(t.src);n(r)}else if(/^blob\:/i.test(t.src)){var a=new FileReader;a.onload=function(t){n(t.target.result)},o(t.src,function(t){a.readAsArrayBuffer(t)})}else{var u=new XMLHttpRequest;u.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(u.response),u=null},u.open("GET",t.src,!0),u.responseType="arraybuffer",u.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var a=new FileReader;a.onload=function(t){C&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},a.readAsArrayBuffer(t)}}function s(t){var e=new DataView(t);if(C&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return C&&console.log("Not a valid JPEG"),!1;for(var n,r=2,i=t.byteLength;r<i;){if(255!=e.getUint8(r))return C&&console.log("Not a valid marker at offset "+r+", found: "+e.getUint8(r)),!1;if(n=e.getUint8(r+1),C&&console.log(n),225==n)return C&&console.log("Found 0xFFE1 marker"),g(e,r+4,e.getUint16(r+2));r+=2+e.getUint16(r+2)}}function c(t){var e=new DataView(t);if(C&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return C&&console.log("Not a valid JPEG"),!1;for(var n=2,r=t.byteLength;n<r;){if(function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)}(e,n)){var i=e.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);return u(t,n+8+i,e.getUint16(n+6+i))}n++}}function u(t,e,n){for(var r,i,o,a,s=new DataView(t),c={},u=e;u<e+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(a=s.getUint8(u+2))in S&&(o=s.getInt16(u+3),o+5,i=S[a],r=p(s,u+5,o),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(r):c[i]=[c[i],r]:c[i]=r),u++;return c}function l(t,e,n,r,i){var o,a,s,c=t.getUint16(n,!i),u={};for(s=0;s<c;s++)o=n+12*s+2,a=r[t.getUint16(o,!i)],!a&&C&&console.log("Unknown tag: "+t.getUint16(o,!i)),u[a]=f(t,o,e,n,i);return u}function f(t,e,n,r,i){var o,a,s,c,u,l,f=t.getUint16(e+2,!i),d=t.getUint32(e+4,!i),h=t.getUint32(e+8,!i)+n;switch(f){case 1:case 7:if(1==d)return t.getUint8(e+8,!i);for(o=d>4?h:e+8,a=[],c=0;c<d;c++)a[c]=t.getUint8(o+c);return a;case 2:return o=d>4?h:e+8,p(t,o,d-1);case 3:if(1==d)return t.getUint16(e+8,!i);for(o=d>2?h:e+8,
a=[],c=0;c<d;c++)a[c]=t.getUint16(o+2*c,!i);return a;case 4:if(1==d)return t.getUint32(e+8,!i);for(a=[],c=0;c<d;c++)a[c]=t.getUint32(h+4*c,!i);return a;case 5:if(1==d)return u=t.getUint32(h,!i),l=t.getUint32(h+4,!i),s=new Number(u/l),s.numerator=u,s.denominator=l,s;for(a=[],c=0;c<d;c++)u=t.getUint32(h+8*c,!i),l=t.getUint32(h+4+8*c,!i),a[c]=new Number(u/l),a[c].numerator=u,a[c].denominator=l;return a;case 9:if(1==d)return t.getInt32(e+8,!i);for(a=[],c=0;c<d;c++)a[c]=t.getInt32(h+4*c,!i);return a;case 10:if(1==d)return t.getInt32(h,!i)/t.getInt32(h+4,!i);for(a=[],c=0;c<d;c++)a[c]=t.getInt32(h+8*c,!i)/t.getInt32(h+4+8*c,!i);return a}}function d(t,e,n){var r=t.getUint16(e,!n);return t.getUint32(e+2+12*r,!n)}function h(t,e,n,r){var i=d(t,e+n,r);if(!i)return{};if(i>t.byteLength)return{};var o=l(t,e,e+i,x,r);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=e+o.JpegIFOffset,s=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(t.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function p(t,e,r){var i="";for(n=e;n<e+r;n++)i+=String.fromCharCode(t.getUint8(n));return i}function g(t,e){if("Exif"!=p(t,e,4))return C&&console.log("Not valid EXIF data! "+p(t,e,4)),!1;var n,r,i,o,a,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return C&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(s+2,!n))return C&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=t.getUint32(s+4,!n);if(c<8)return C&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if(r=l(t,s,s+c,A,n),r.ExifIFDPointer){o=l(t,s,s+r.ExifIFDPointer,I,n);for(i in o){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=O[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=O.Components[o[i][0]]+O.Components[o[i][1]]+O.Components[o[i][2]]+O.Components[o[i][3]]}r[i]=o[i]}}if(r.GPSInfoIFDPointer){a=l(t,s,s+r.GPSInfoIFDPointer,_,n);for(i in a){switch(i){case"GPSVersionID":a[i]=a[i][0]+"."+a[i][1]+"."+a[i][2]+"."+a[i][3]}r[i]=a[i]}}return r.thumbnail=h(t,s,c,n),r}function m(t){if("DOMParser"in self){var e=new DataView(t);if(C&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return C&&console.log("Not a valid JPEG"),!1;for(var n=2,r=t.byteLength,i=new DOMParser;n<r-4;){if("http"==p(e,n,4)){var o=n-1,a=e.getUint16(n-2)-1,s=p(e,o,a),c=s.indexOf("xmpmeta>")+8;s=s.substring(s.indexOf("<x:xmpmeta"),c);var u=s.indexOf("x:xmpmeta")+10;s=s.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+s.slice(u);return y(i.parseFromString(s,"text/xml"))}n++}}}function v(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes.item(i),a=o.nodeName;if(null==e[a])e[a]=v(o);else{if(null==e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(v(o))}}return e}function y(t){try{var e={};if(t.children.length>0)for(var n=0;n<t.children.length;n++){var r=t.children.item(n),i=r.attributes;for(var o in i){var a=i[o],s=a.nodeName,c=a.nodeValue;void 0!==s&&(e[s]=c)}var u=r.nodeName;if(void 0===e[u])e[u]=v(r);else{if(void 0===e[u].push){var l=e[u];e[u]=[],e[u].push(l)}e[u].push(v(r))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}var C=!1,b=this,w=function(t){return t instanceof w?t:this instanceof w?void(this.EXIFwrapped=t):new w(t)};void 0!==r?(void 0!==e&&e.exports&&(r=e.exports=w),r.EXIF=w):b.EXIF=w;var I=w.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},A=w.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},_=w.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},x=w.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},O=w.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},S={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};w.enableXmp=function(){w.isXmpEnabled=!0},w.disableXmp=function(){w.isXmpEnabled=!1},w.getData=function(e,n){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(t(e)?n&&n.call(e):a(e,n),!0)},w.getTag=function(e,n){if(t(e))return e.exifdata[n]},w.getIptcTag=function(e,n){if(t(e))return e.iptcdata[n]},w.getAllTags=function(e){if(!t(e))return{};var n,r=e.exifdata,i={};for(n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i},w.getAllIptcTags=function(e){if(!t(e))return{};var n,r=e.iptcdata,i={};for(n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i},w.pretty=function(e){if(!t(e))return"";var n,r=e.exifdata,i="";for(n in r)r.hasOwnProperty(n)&&("object"==typeof r[n]?r[n]instanceof Number?i+=n+" : "+r[n]+" ["+r[n].numerator+"/"+r[n].denominator+"]\r\n":i+=n+" : ["+r[n].length+" values]\r\n":i+=n+" : "+r[n]+"\r\n");return i},w.readFromBinaryFile=function(t){return s(t)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return w})}).call(this)},{}],67:[function(t,e,n){function r(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===c.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):a(t,e,n)}function i(t,e,n){for(var r=0,i=t.length;r<i;r++)u.call(t,r)&&e.call(n,t[r],r,t)}function o(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}function a(t,e,n){for(var r in t)u.call(t,r)&&e.call(n,t[r],r,t)}var s=t("is-function");e.exports=r;var c=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{"is-function":76}],68:[function(t,e,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],69:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],70:[function(t,e,n){function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(t))return i(t,e,n);if(s.nodeList(t))return o(t,e,n);if(s.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return c(document.body,t,e,n)}var s=t("./is"),c=t("delegate");e.exports=r},{"./is":69,delegate:64}],71:[function(t,e,n){function r(t,e){var n=-(1/0);t.getFloatFrequencyData(e);for(var r=4,i=e.length;r<i;r++)e[r]>n&&e[r]<0&&(n=e[r]);return n}var i,o=t("wildemitter");"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var a=null;e.exports=function(t,e){var n=new o;if(!i)return n;var e=e||{},s=e.smoothing||.1,c=e.interval||50,u=e.threshold,l=e.play,f=e.history||10,d=!0;a||(a=new i);var h,p,g;g=a.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=s,p=new Float32Array(g.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(h=a.createMediaElementSource(t),void 0===l&&(l=!0),u=u||-50):(h=a.createMediaStreamSource(t),u=u||-50),h.connect(g),l&&g.connect(a.destination),n.speaking=!1,n.setThreshold=function(t){u=t},n.setInterval=function(t){c=t},n.stop=function(){d=!1,n.emit("volume_change",-100,u),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),g.disconnect(),h.disconnect()},n.speakingHistory=[];for(var m=0;m<f;m++)n.speakingHistory.push(0);var v=function(){setTimeout(function(){if(d){var t=r(g,p);n.emit("volume_change",t,u);var e=0;if(t>u&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)e+=n.speakingHistory[i];e>=2&&(n.speaking=!0,n.emit("speaking"))}else if(t<u&&n.speaking){for(var i=0;i<n.speakingHistory.length;i++)e+=n.speakingHistory[i];0==e&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(t>u)),v()}},c)};return v(),n}},{wildemitter:112}],72:[function(t,e,n){function r(){function t(){function t(n){var u;if(null==n);else if("string"==typeof n)r?r.appendChild(u=l.createTextNode(n)):function(t){var e=s(t,/([\.#]?[^\s#.]+)/);/^\.|#/.test(e[1])&&(r=l.createElement("div")),o(e,function(t){var e=t.substring(1,t.length);t&&(r?"."===t[0]?c(r).add(e):"#"===t[0]&&r.setAttribute("id",e):r=l.createElement(t))})}(n);else if("number"==typeof n||"boolean"==typeof n||n instanceof Date||n instanceof RegExp)r.appendChild(u=l.createTextNode(n.toString()));else if(a(n))o(n,t);else if(i(n))r.appendChild(u=n);else if(n instanceof f)r.appendChild(u=n);else if("object"==typeof n)for(var d in n)if("function"==typeof n[d])/^on\w+/.test(d)?function(t,n){r.addEventListener?(r.addEventListener(t.substring(2),n[t],!1),e.push(function(){r.removeEventListener(t.substring(2),n[t],!1)})):(r.attachEvent(t,n[t]),e.push(function(){r.detachEvent(t,n[t])}))}(d,n):(r[d]=n[d](),e.push(n[d](function(t){r[d]=t})));else if("style"===d)if("string"==typeof n[d])r.style.cssText=n[d];else for(var h in n[d])!function(t,i){if("function"==typeof i)r.style.setProperty(t,i()),e.push(i(function(e){r.style.setProperty(t,e)}));else var o=n[d][t].match(/(.*)\W+!important\W*$/);o?r.style.setProperty(t,o[1],"important"):r.style.setProperty(t,n[d][t])}(h,n[d][h]);else if("attrs"===d)for(var p in n[d])r.setAttribute(p,n[d][p]);else"data-"===d.substr(0,5)?r.setAttribute(d,n[d]):r[d]=n[d];else if("function"==typeof n){var p=n();r.appendChild(u=i(p)?p:l.createTextNode(p)),e.push(n(function(t){i(t)&&u.parentElement?(u.parentElement.replaceChild(t,u),u=t):u.textContent=t}))}return u}for(var n=[].slice.call(arguments),r=null;n.length;)t(n.shift());return r}var e=[];return t.cleanup=function(){for(var t=0;t<e.length;t++)e[t]();e.length=0},t}function i(t){return t&&t.nodeName&&t.nodeType}function o(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n)}function a(t){return"[object Array]"==Object.prototype.toString.call(t)}var s=t("browser-split"),c=t("class-list"),u="undefined"==typeof window?t("html-element"):window,l=u.document,f=u.Text;(e.exports=r()).context=r},{"browser-split":50,"class-list":52,"html-element":49}],73:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),e+=a+f>=1?d/c:d*Math.pow(2,1-f),e*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+h]=255&a,h+=p,a/=256,u-=8);t[n+h-p]|=128*g}},{}],74:[function(t,e,n){function r(t,e){function n(){o?t.detachEvent("onload",n):t.removeEventListener("load",n,!1),e(null,!1)}var r,o;return t.nodeName?"img"!==t.nodeName.toLowerCase()?e(new Error("Element supplied is not an image")):t.src&&t.complete&&void 0!==t.naturalWidth?e(null,!0):(o=!t.addEventListener,o?t.attachEvent("onload",n):t.addEventListener("load",n,!1),void((t.readyState||t.complete)&&(r=t.src,t.src=i,t.src=r))):e(new Error("First argument must be an image element"))}var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.exports=r},{}],75:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],76:[function(t,e,n){function r(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=r;var i=Object.prototype.toString},{}],77:[function(t,e,n){"use strict";function r(t,e){function n(){for(var i,a=0;a<o.length;a++)o[a].href&&o[a].href.indexOf(t)>-1&&(i=!0);i?(r.media="all",e()):setTimeout(n)}var r=window.document.createElement("link"),i=window.document.getElementsByTagName("script")[0],o=window.document.styleSheets;return r.rel="stylesheet",r.href=t,r.media="only x",i.parentNode.insertBefore(r,i),n(),r}e.exports=r},{}],78:[function(t,e,n){(function(t){(function(){function r(t,e){return t.set(e[0],e[1]),t}function i(t,e){return t.add(e),t}function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function u(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function f(t,e){return!!(null==t?0:t.length)&&I(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function h(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function g(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function m(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function v(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.split("")}function C(t){return t.match(Ze)||[]}function b(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function w(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function I(t,e,n){return e===e?J(t,e,n):w(t,_,n)}function A(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function _(t){return t!==t}function x(t,e){var n=null==t?0:t.length;return n?k(t,e)/n:Bt}function O(t){return function(e){return null==e?nt:e[t]}}function S(t){return function(e){return null==t?nt:t[e]}}function L(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function T(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function k(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==nt&&(n=n===nt?o:n+o)}return n}function M(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function E(t,e){return h(e,function(e){return[e,t[e]]})}function B(t){return function(e){return t(e)}}function N(t,e){return h(e,function(e){return t[e]})}function Z(t,e){return t.has(e)}function P(t,e){for(var n=-1,r=t.length;++n<r&&I(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length;n--&&I(e,t[n],0)>-1;);return n}function W(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function R(t){return"\\"+bn[t]}function z(t,e){return null==t?nt:t[e]}function D(t){return fn.test(t)}function X(t){return dn.test(t)}function G(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function F(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Y(t,e){return function(n){return t(e(n))}}function H(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ct||(t[n]=ct,o[i++]=n)}return o}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function V(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function K(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function q(t){return D(t)?$(t):jn(t)}function Q(t){return D(t)?tt(t):y(t)}function $(t){for(var e=un.lastIndex=0;un.test(t);)++e;return e}function tt(t){return t.match(un)||[]}function et(t){return t.match(ln)||[]}var nt,rt=200,it="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ot="Expected a function",at="__lodash_hash_undefined__",st=500,ct="__lodash_placeholder__",ut=1,lt=2,ft=4,dt=1,ht=2,pt=1,gt=2,mt=4,vt=8,yt=16,Ct=32,bt=64,wt=128,It=256,At=512,_t=30,xt="...",Ot=800,St=16,Lt=1,Tt=2,kt=1/0,Mt=9007199254740991,Et=1.7976931348623157e308,Bt=NaN,Nt=4294967295,Zt=Nt-1,Pt=Nt>>>1,jt=[["ary",wt],["bind",pt],["bindKey",gt],["curry",vt],["curryRight",yt],["flip",At],["partial",Ct],["partialRight",bt],["rearg",It]],Wt="[object Arguments]",Rt="[object Array]",zt="[object AsyncFunction]",Dt="[object Boolean]",Xt="[object Date]",Gt="[object DOMException]",Ft="[object Error]",Yt="[object Function]",Ht="[object GeneratorFunction]",Ut="[object Map]",Vt="[object Number]",Jt="[object Null]",Kt="[object Object]",qt="[object Proxy]",Qt="[object RegExp]",$t="[object Set]",te="[object String]",ee="[object Symbol]",ne="[object Undefined]",re="[object WeakMap]",ie="[object WeakSet]",oe="[object ArrayBuffer]",ae="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",ue="[object Int8Array]",le="[object Int16Array]",fe="[object Int32Array]",de="[object Uint8Array]",he="[object Uint8ClampedArray]",pe="[object Uint16Array]",ge="[object Uint32Array]",me=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ce=/&(?:amp|lt|gt|quot|#39);/g,be=/[&<>"']/g,we=RegExp(Ce.source),Ie=RegExp(be.source),Ae=/<%=([\s\S]+?)%>/g,_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xe=/^\w*$/,Oe=/^\./,Se=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(Se.source),Te=/^\s+|\s+$/g,ke=/^\s+/,Me=/\s+$/,Ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,Ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,Re=/^0b[01]+$/i,ze=/^\[object .+?Constructor\]$/,De=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fe=/($^)/,Ye=/['\n\r\u2028\u2029\\]/g,He="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ue="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ve="["+He+"]",Je="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ke="[^\\ud800-\\udfff"+Ue+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",qe="\\ud83c[\\udffb-\\udfff]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",en="(?:"+Ve+"|"+qe+")?",nn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Qe,$e].join("|")+")[\\ufe0e\\ufe0f]?"+en+")*",rn="[\\ufe0e\\ufe0f]?"+en+nn,on="(?:"+["[\\u2700-\\u27bf]",Qe,$e].join("|")+")"+rn,an="(?:"+["[^\\ud800-\\udfff]"+Ve+"?",Ve,Qe,$e,"[\\ud800-\\udfff]"].join("|")+")",sn=RegExp("[']","g"),cn=RegExp(Ve,"g"),un=RegExp(qe+"(?="+qe+")|"+an+rn,"g"),ln=RegExp([tn+"?"+Je+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+["["+Ue+"]",tn,"$"].join("|")+")","(?:"+tn+"|"+Ke+")+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+["["+Ue+"]",tn+"(?:"+Je+"|"+Ke+")","$"].join("|")+")",tn+"?(?:"+Je+"|"+Ke+")+(?:['](?:d|ll|m|re|s|t|ve))?",tn+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",on].join("|"),"g"),fn=RegExp("[\\u200d\\ud800-\\udfff"+He+"\\ufe0e\\ufe0f]"),dn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pn=-1,gn={};gn[se]=gn[ce]=gn[ue]=gn[le]=gn[fe]=gn[de]=gn[he]=gn[pe]=gn[ge]=!0,gn[Wt]=gn[Rt]=gn[oe]=gn[Dt]=gn[ae]=gn[Xt]=gn[Ft]=gn[Yt]=gn[Ut]=gn[Vt]=gn[Kt]=gn[Qt]=gn[$t]=gn[te]=gn[re]=!1;var mn={};mn[Wt]=mn[Rt]=mn[oe]=mn[ae]=mn[Dt]=mn[Xt]=mn[se]=mn[ce]=mn[ue]=mn[le]=mn[fe]=mn[Ut]=mn[Vt]=mn[Kt]=mn[Qt]=mn[$t]=mn[te]=mn[ee]=mn[de]=mn[he]=mn[pe]=mn[ge]=!0,mn[Ft]=mn[Yt]=mn[re]=!1;var vn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wn=parseFloat,In=parseInt,An="object"==typeof t&&t&&t.Object===Object&&t,_n="object"==typeof self&&self&&self.Object===Object&&self,xn=An||_n||Function("return this")(),On="object"==typeof n&&n&&!n.nodeType&&n,Sn=On&&"object"==typeof e&&e&&!e.nodeType&&e,Ln=Sn&&Sn.exports===On,Tn=Ln&&An.process,kn=function(){try{return Tn&&Tn.binding&&Tn.binding("util")}catch(t){}}(),Mn=kn&&kn.isArrayBuffer,En=kn&&kn.isDate,Bn=kn&&kn.isMap,Nn=kn&&kn.isRegExp,Zn=kn&&kn.isSet,Pn=kn&&kn.isTypedArray,jn=O("length"),Wn=S(vn),Rn=S(yn),zn=S(Cn),Dn=function t(e){function n(t){if(ec(t)&&!hd(t)&&!(t instanceof J)){if(t instanceof S)return t;if(dl.call(t,"__wrapped__"))return Qo(t)}return new S(t)}function y(){}function S(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function J(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function $(){var t=new J(this.__wrapped__);return t.__actions__=Bi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Bi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Bi(this.__views__),t}function tt(){if(this.__filtered__){var t=new J(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ze(){var t=this.__wrapped__.value(),e=this.__dir__,n=hd(t),r=e<0,i=n?t.length:0,o=Ao(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,h=Xl(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return pi(t,this.__actions__);var p=[];t:for(;c--&&d<h;){u+=e;for(var g=-1,m=t[u];++g<f;){var v=l[g],y=v.iteratee,C=v.type,b=y(m);if(C==Tt)m=b;else if(!b){if(C==Lt)continue t;break t}}p[d++]=m}return p}function He(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ue(){this.__data__=Ql?Ql(null):{},this.size=0}function Ve(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Je(t){var e=this.__data__;if(Ql){var n=e[t];return n===at?nt:n}return dl.call(e,t)?e[t]:nt}function Ke(t){var e=this.__data__;return Ql?e[t]!==nt:dl.call(e,t)}function qe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ql&&e===nt?at:e,this}function Qe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $e(){this.__data__=[],this.size=0}function tn(t){var e=this.__data__,n=Hn(e,t)
;return!(n<0)&&(n==e.length-1?e.pop():Ol.call(e,n,1),--this.size,!0)}function en(t){var e=this.__data__,n=Hn(e,t);return n<0?nt:e[n][1]}function nn(t){return Hn(this.__data__,t)>-1}function rn(t,e){var n=this.__data__,r=Hn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function on(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function an(){this.size=0,this.__data__={hash:new He,map:new(Vl||Qe),string:new He}}function un(t){var e=Co(this,t).delete(t);return this.size-=e?1:0,e}function ln(t){return Co(this,t).get(t)}function fn(t){return Co(this,t).has(t)}function dn(t,e){var n=Co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new on;++e<n;)this.add(t[e])}function yn(t){return this.__data__.set(t,at),this}function Cn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new Qe(t);this.size=e.size}function An(){this.__data__=new Qe,this.size=0}function _n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function On(t){return this.__data__.get(t)}function Sn(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof Qe){var r=n.__data__;if(!Vl||r.length<rt-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new on(r)}return n.set(t,e),this.size=n.size,this}function kn(t,e){var n=hd(t),r=!n&&dd(t),i=!n&&!r&&gd(t),o=!n&&!r&&!i&&bd(t),a=n||r||i||o,s=a?M(t.length,ol):[],c=s.length;for(var u in t)!e&&!dl.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Mo(u,c))||s.push(u);return s}function jn(t){var e=t.length;return e?t[Jr(0,e-1)]:nt}function Xn(t,e){return Vo(Bi(t),Qn(e,0,t.length))}function Gn(t){return Vo(Bi(t))}function Fn(t,e,n){(n===nt||Ds(t[e],n))&&(n!==nt||e in t)||Kn(t,e,n)}function Yn(t,e,n){var r=t[e];dl.call(t,e)&&Ds(r,n)&&(n!==nt||e in t)||Kn(t,e,n)}function Hn(t,e){for(var n=t.length;n--;)if(Ds(t[n][0],e))return n;return-1}function Un(t,e,n,r){return ff(t,function(t,i,o){e(r,t,n(t),o)}),r}function Vn(t,e){return t&&Ni(e,Pc(e),t)}function Jn(t,e){return t&&Ni(e,jc(e),t)}function Kn(t,e,n){"__proto__"==e&&kl?kl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function qn(t,e){for(var n=-1,r=e.length,i=Qu(r),o=null==t;++n<r;)i[n]=o?nt:Bc(t,e[n]);return i}function Qn(t,e,n){return t===t&&(n!==nt&&(t=t<=n?t:n),e!==nt&&(t=t>=e?t:e)),t}function $n(t,e,n,r,i,o){var a,c=e&ut,u=e&lt,l=e&ft;if(n&&(a=i?n(t,r,i,o):n(t)),a!==nt)return a;if(!tc(t))return t;var f=hd(t);if(f){if(a=Oo(t),!c)return Bi(t,a)}else{var d=Af(t),h=d==Yt||d==Ht;if(gd(t))return wi(t,c);if(d==Kt||d==Wt||h&&!i){if(a=u||h?{}:So(t),!c)return u?Pi(t,Jn(a,t)):Zi(t,Vn(a,t))}else{if(!mn[d])return i?t:{};a=Lo(t,d,$n,c)}}o||(o=new bn);var p=o.get(t);if(p)return p;o.set(t,a);var g=l?u?go:po:u?jc:Pc,m=f?nt:g(t);return s(m||t,function(r,i){m&&(i=r,r=t[i]),Yn(a,i,$n(r,e,n,i,t,o))}),a}function tr(t){var e=Pc(t);return function(n){return er(n,t,e)}}function er(t,e,n){var r=n.length;if(null==t)return!r;for(t=rl(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===nt&&!(i in t)||!o(a))return!1}return!0}function nr(t,e,n){if("function"!=typeof t)throw new al(ot);return Of(function(){t.apply(nt,n)},e)}function rr(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,c=[],u=e.length;if(!s)return c;n&&(e=h(e,B(n))),r?(o=d,a=!1):e.length>=rt&&(o=Z,a=!1,e=new vn(e));t:for(;++i<s;){var l=t[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,a&&p===p){for(var g=u;g--;)if(e[g]===p)continue t;c.push(l)}else o(e,p,r)||c.push(l)}return c}function ir(t,e){var n=!0;return ff(t,function(t,r,i){return n=!!e(t,r,i)}),n}function or(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===nt?a===a&&!dc(a):n(a,s)))var s=a,c=o}return c}function ar(t,e,n,r){var i=t.length;for(n=yc(n),n<0&&(n=-n>i?0:i+n),r=r===nt||r>i?i:yc(r),r<0&&(r+=i),r=n>r?0:Cc(r);n<r;)t[n++]=e;return t}function sr(t,e){var n=[];return ff(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function cr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ko),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?cr(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function ur(t,e){return t&&hf(t,e,Pc)}function lr(t,e){return t&&pf(t,e,Pc)}function fr(t,e){return l(e,function(e){return qs(t[e])})}function dr(t,e){e=Ci(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Jo(e[n++])];return n&&n==r?t:nt}function hr(t,e,n){var r=e(t);return hd(t)?r:p(r,n(t))}function pr(t){return null==t?t===nt?ne:Jt:Tl&&Tl in rl(t)?Io(t):Xo(t)}function gr(t,e){return t>e}function mr(t,e){return null!=t&&dl.call(t,e)}function vr(t,e){return null!=t&&e in rl(t)}function yr(t,e,n){return t>=Xl(e,n)&&t<Dl(e,n)}function Cr(t,e,n){for(var r=n?d:f,i=t[0].length,o=t.length,a=o,s=Qu(o),c=1/0,u=[];a--;){var l=t[a];a&&e&&(l=h(l,B(e))),c=Xl(l.length,c),s[a]=!n&&(e||i>=120&&l.length>=120)?new vn(a&&l):nt}l=t[0];var p=-1,g=s[0];t:for(;++p<i&&u.length<c;){var m=l[p],v=e?e(m):m;if(m=n||0!==m?m:0,!(g?Z(g,v):r(u,v,n))){for(a=o;--a;){var y=s[a];if(!(y?Z(y,v):r(t[a],v,n)))continue t}g&&g.push(v),u.push(m)}}return u}function br(t,e,n,r){return ur(t,function(t,i,o){e(r,n(t),i,o)}),r}function wr(t,e,n){e=Ci(e,t),t=Fo(t,e);var r=null==t?t:t[Jo(va(e))];return null==r?nt:o(r,t,n)}function Ir(t){return ec(t)&&pr(t)==Wt}function Ar(t){return ec(t)&&pr(t)==oe}function _r(t){return ec(t)&&pr(t)==Xt}function xr(t,e,n,r,i){return t===e||(null==t||null==e||!ec(t)&&!ec(e)?t!==t&&e!==e:Or(t,e,n,r,xr,i))}function Or(t,e,n,r,i,o){var a=hd(t),s=hd(e),c=a?Rt:Af(t),u=s?Rt:Af(e);c=c==Wt?Kt:c,u=u==Wt?Kt:u;var l=c==Kt,f=u==Kt,d=c==u;if(d&&gd(t)){if(!gd(e))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new bn),a||bd(t)?uo(t,e,n,r,i,o):lo(t,e,c,n,r,i,o);if(!(n&dt)){var h=l&&dl.call(t,"__wrapped__"),p=f&&dl.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,m=p?e.value():e;return o||(o=new bn),i(g,m,n,r,o)}}return!!d&&(o||(o=new bn),fo(t,e,n,r,i,o))}function Sr(t){return ec(t)&&Af(t)==Ut}function Lr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=rl(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var c=s[0],u=t[c],l=s[1];if(a&&s[2]){if(u===nt&&!(c in t))return!1}else{var f=new bn;if(r)var d=r(u,l,c,t,e,f);if(!(d===nt?xr(l,u,dt|ht,r,f):d))return!1}}return!0}function Tr(t){return!(!tc(t)||Po(t))&&(qs(t)?yl:ze).test(Ko(t))}function kr(t){return ec(t)&&pr(t)==Qt}function Mr(t){return ec(t)&&Af(t)==$t}function Er(t){return ec(t)&&$s(t.length)&&!!gn[pr(t)]}function Br(t){return"function"==typeof t?t:null==t?Ou:"object"==typeof t?hd(t)?Rr(t[0],t[1]):Wr(t):Nu(t)}function Nr(t){if(!jo(t))return zl(t);var e=[];for(var n in rl(t))dl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Zr(t){if(!tc(t))return Do(t);var e=jo(t),n=[];for(var r in t)("constructor"!=r||!e&&dl.call(t,r))&&n.push(r);return n}function Pr(t,e){return t<e}function jr(t,e){var n=-1,r=Xs(t)?Qu(t.length):[];return ff(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Wr(t){var e=bo(t);return 1==e.length&&e[0][2]?Ro(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Rr(t,e){return Bo(t)&&Wo(e)?Ro(Jo(t),e):function(n){var r=Bc(n,t);return r===nt&&r===e?Zc(n,t):xr(e,r,dt|ht)}}function zr(t,e,n,r,i){t!==e&&hf(e,function(o,a){if(tc(o))i||(i=new bn),Dr(t,e,a,n,zr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):nt;s===nt&&(s=o),Fn(t,a,s)}},jc)}function Dr(t,e,n,r,i,o,a){var s=t[n],c=e[n],u=a.get(c);if(u)return void Fn(t,n,u);var l=o?o(s,c,n+"",t,e,a):nt,f=l===nt;if(f){var d=hd(c),h=!d&&gd(c),p=!d&&!h&&bd(c);l=c,d||h||p?hd(s)?l=s:Gs(s)?l=Bi(s):h?(f=!1,l=wi(c,!0)):p?(f=!1,l=Li(c,!0)):l=[]:uc(c)||dd(c)?(l=s,dd(s)?l=wc(s):(!tc(s)||r&&qs(s))&&(l=So(c))):f=!1}f&&(a.set(c,l),i(l,c,r,o,a),a.delete(c)),Fn(t,n,l)}function Xr(t,e){var n=t.length;if(n)return e+=e<0?n:0,Mo(e,n)?t[e]:nt}function Gr(t,e,n){var r=-1;return e=h(e.length?e:[Ou],B(yo())),T(jr(t,function(t,n,i){return{criteria:h(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return ki(t,e,n)})}function Fr(t,e){return Yr(t,e,function(e,n){return Zc(t,n)})}function Yr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=dr(t,a);n(s,a)&&ei(o,Ci(a,t),s)}return o}function Hr(t){return function(e){return dr(e,t)}}function Ur(t,e,n,r){var i=r?A:I,o=-1,a=e.length,s=t;for(t===e&&(e=Bi(e)),n&&(s=h(t,B(n)));++o<a;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==t&&Ol.call(s,c,1),Ol.call(t,c,1);return t}function Vr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Mo(i)?Ol.call(t,i,1):fi(t,i)}}return t}function Jr(t,e){return t+Zl(Yl()*(e-t+1))}function Kr(t,e,n,r){for(var i=-1,o=Dl(Nl((e-t)/(n||1)),0),a=Qu(o);o--;)a[r?o:++i]=t,t+=n;return a}function qr(t,e){var n="";if(!t||e<1||e>Mt)return n;do{e%2&&(n+=t),(e=Zl(e/2))&&(t+=t)}while(e);return n}function Qr(t,e){return Sf(Go(t,e,Ou),t+"")}function $r(t){return jn(Jc(t))}function ti(t,e){var n=Jc(t);return Vo(n,Qn(e,0,n.length))}function ei(t,e,n,r){if(!tc(t))return t;e=Ci(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var c=Jo(e[i]),u=n;if(i!=a){var l=s[c];u=r?r(l,c,s):nt,u===nt&&(u=tc(l)?l:Mo(e[i+1])?[]:{})}Yn(s,c,u),s=s[c]}return t}function ni(t){return Vo(Jc(t))}function ri(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Qu(i);++r<i;)o[r]=t[r+e];return o}function ii(t,e){var n;return ff(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Pt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!dc(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ai(t,e,Ou,n)}function ai(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,c=dc(e),u=e===nt;i<o;){var l=Zl((i+o)/2),f=n(t[l]),d=f!==nt,h=null===f,p=f===f,g=dc(f);if(a)var m=r||p;else m=u?p&&(r||d):s?p&&d&&(r||!h):c?p&&d&&!h&&(r||!g):!h&&!g&&(r?f<=e:f<e);m?i=l+1:o=l}return Xl(o,Zt)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ds(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ci(t){return"number"==typeof t?t:dc(t)?Bt:+t}function ui(t){if("string"==typeof t)return t;if(hd(t))return h(t,ui)+"";if(dc(t))return uf?uf.call(t):"";var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function li(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=d;else if(o>=rt){var u=e?null:Cf(t);if(u)return U(u);a=!1,i=Z,c=new vn}else c=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h===h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),s.push(l)}else i(c,h,n)||(c!==s&&c.push(h),s.push(l))}return s}function fi(t,e){return e=Ci(e,t),null==(t=Fo(t,e))||delete t[Jo(va(e))]}function di(t,e,n,r){return ei(t,e,n(dr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ri(t,r?0:o,r?o+1:i):ri(t,r?o+1:0,r?i:o)}function pi(t,e){var n=t;return n instanceof J&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function gi(t,e,n){var r=t.length;if(r<2)return r?li(t[0]):[];for(var i=-1,o=Qu(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=rr(o[i]||a,t[s],e,n));return li(cr(o,1),e,n)}function mi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:nt;n(a,t[r],s)}return a}function vi(t){return Gs(t)?t:[]}function yi(t){return"function"==typeof t?t:Ou}function Ci(t,e){return hd(t)?t:Bo(t,e)?[t]:Lf(Ac(t))}function bi(t,e,n){var r=t.length;return n=n===nt?r:n,!e&&n>=r?t:ri(t,e,n)}function wi(t,e){if(e)return t.slice();var n=t.length,r=Il?Il(n):new t.constructor(n);return t.copy(r),r}function Ii(t){var e=new t.constructor(t.byteLength);return new wl(e).set(new wl(t)),e}function Ai(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function _i(t,e,n){return g(e?n(F(t),ut):F(t),r,new t.constructor)}function xi(t){var e=new t.constructor(t.source,je.exec(t));return e.lastIndex=t.lastIndex,e}function Oi(t,e,n){return g(e?n(U(t),ut):U(t),i,new t.constructor)}function Si(t){return cf?rl(cf.call(t)):{}}function Li(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ti(t,e){if(t!==e){var n=t!==nt,r=null===t,i=t===t,o=dc(t),a=e!==nt,s=null===e,c=e===e,u=dc(e);if(!s&&!u&&!o&&t>e||o&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0}function ki(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var c=Ti(i[r],o[r]);if(c){if(r>=s)return c;return c*("desc"==n[r]?-1:1)}}return t.index-e.index}function Mi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,c=e.length,u=Dl(o-a,0),l=Qu(c+u),f=!r;++s<c;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;u--;)l[s++]=t[i++];return l}function Ei(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,c=-1,u=e.length,l=Dl(o-s,0),f=Qu(l+u),d=!r;++i<l;)f[i]=t[i];for(var h=i;++c<u;)f[h+c]=e[c];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=t[i++]);return f}function Bi(t,e){var n=-1,r=t.length;for(e||(e=Qu(r));++n<r;)e[n]=t[n];return e}function Ni(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],c=r?r(n[s],t[s],s,n,t):nt;c===nt&&(c=t[s]),i?Kn(n,s,c):Yn(n,s,c)}return n}function Zi(t,e){return Ni(t,wf(t),e)}function Pi(t,e){return Ni(t,If(t),e)}function ji(t,e){return function(n,r){var i=hd(n)?a:Un,o=e?e():{};return i(n,t,yo(r,2),o)}}function Wi(t){return Qr(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:nt,a=i>2?n[2]:nt;for(o=t.length>3&&"function"==typeof o?(i--,o):nt,a&&Eo(n[0],n[1],a)&&(o=i<3?nt:o,i=1),e=rl(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Ri(t,e){return function(n,r){if(null==n)return n;if(!Xs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=rl(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function zi(t){return function(e,n,r){for(var i=-1,o=rl(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(n(o[c],c,o)===!1)break}return e}}function Di(t,e,n){function r(){return(this&&this!==xn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&pt,o=Fi(t);return r}function Xi(t){return function(e){e=Ac(e);var n=D(e)?Q(e):nt,r=n?n[0]:e.charAt(0),i=n?bi(n,1).join(""):e.slice(1);return r[t]()+i}}function Gi(t){return function(e){return g(wu(eu(e).replace(sn,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=lf(t.prototype),r=t.apply(n,e);return tc(r)?r:n}}function Yi(t,e,n){function r(){for(var a=arguments.length,s=Qu(a),c=a,u=vo(r);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==u&&s[a-1]!==u?[]:H(s,u);return(a-=l.length)<n?no(t,e,Vi,r.placeholder,nt,s,l,nt,nt,n-a):o(this&&this!==xn&&this instanceof r?i:t,this,s)}var i=Fi(t);return r}function Hi(t){return function(e,n,r){var i=rl(e);if(!Xs(e)){var o=yo(n,3);e=Pc(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:nt}}function Ui(t){return ho(function(e){var n=e.length,r=n,i=S.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new al(ot);if(i&&!a&&"wrapper"==mo(o))var a=new S([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=mo(o),c="wrapper"==s?bf(o):nt;a=c&&Zo(c[0])&&c[1]==(wt|vt|Ct|It)&&!c[4].length&&1==c[9]?a[mo(c[0])].apply(a,c[3]):1==o.length&&Zo(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&hd(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Vi(t,e,n,r,i,o,a,s,c,u){function l(){for(var v=arguments.length,y=Qu(v),C=v;C--;)y[C]=arguments[C];if(p)var b=vo(l),w=W(y,b);if(r&&(y=Mi(y,r,i,p)),o&&(y=Ei(y,o,a,p)),v-=w,p&&v<u){var I=H(y,b);return no(t,e,Vi,l.placeholder,n,y,I,s,c,u-v)}var A=d?n:this,_=h?A[t]:t;return v=y.length,s?y=Yo(y,s):g&&v>1&&y.reverse(),f&&c<v&&(y.length=c),this&&this!==xn&&this instanceof l&&(_=m||Fi(_)),_.apply(A,y)}var f=e&wt,d=e&pt,h=e&gt,p=e&(vt|yt),g=e&At,m=h?nt:Fi(t);return l}function Ji(t,e){return function(n,r){return br(n,t,e(r),{})}}function Ki(t,e){return function(n,r){var i;if(n===nt&&r===nt)return e;if(n!==nt&&(i=n),r!==nt){if(i===nt)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ci(n),r=ci(r)),i=t(n,r)}return i}}function qi(t){return ho(function(e){return e=h(e,B(yo())),Qr(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function Qi(t,e){e=e===nt?" ":ui(e);var n=e.length;if(n<2)return n?qr(e,t):e;var r=qr(e,Nl(t/q(e)));return D(e)?bi(Q(r),0,t).join(""):r.slice(0,t)}function $i(t,e,n,r){function i(){for(var e=-1,c=arguments.length,u=-1,l=r.length,f=Qu(l+c),d=this&&this!==xn&&this instanceof i?s:t;++u<l;)f[u]=r[u];for(;c--;)f[u++]=arguments[++e];return o(d,a?n:this,f)}var a=e&pt,s=Fi(t);return i}function to(t){return function(e,n,r){return r&&"number"!=typeof r&&Eo(e,n,r)&&(n=r=nt),e=vc(e),n===nt?(n=e,e=0):n=vc(n),r=r===nt?e<n?1:-1:vc(r),Kr(e,n,r,t)}}function eo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=bc(e),n=bc(n)),t(e,n)}}function no(t,e,n,r,i,o,a,s,c,u){var l=e&vt,f=l?a:nt,d=l?nt:a,h=l?o:nt,p=l?nt:o;e|=l?Ct:bt,(e&=~(l?bt:Ct))&mt||(e&=~(pt|gt));var g=[t,e,i,h,f,p,d,s,c,u],m=n.apply(nt,g);return Zo(t)&&xf(m,g),m.placeholder=r,Ho(m,t,e)}function ro(t){var e=nl[t];return function(t,n){if(t=bc(t),n=null==n?0:Xl(yc(n),292)){var r=(Ac(t)+"e").split("e");return r=(Ac(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function io(t){return function(e){var n=Af(e);return n==Ut?F(e):n==$t?V(e):E(e,t(e))}}function oo(t,e,n,r,i,o,a,s){var c=e&gt;if(!c&&"function"!=typeof t)throw new al(ot);var u=r?r.length:0;if(u||(e&=~(Ct|bt),r=i=nt),a=a===nt?a:Dl(yc(a),0),s=s===nt?s:yc(s),u-=i?i.length:0,e&bt){var l=r,f=i;r=i=nt}var d=c?nt:bf(t),h=[t,e,n,r,i,l,f,o,a,s];if(d&&zo(h,d),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===nt?c?0:t.length:Dl(h[9]-u,0),!s&&e&(vt|yt)&&(e&=~(vt|yt)),e&&e!=pt)p=e==vt||e==yt?Yi(t,e,s):e!=Ct&&e!=(pt|Ct)||i.length?Vi.apply(nt,h):$i(t,e,n,r);else var p=Di(t,e,n);return Ho((d?gf:xf)(p,h),t,e)}function ao(t,e,n,r){return t===nt||Ds(t,ul[n])&&!dl.call(r,n)?e:t}function so(t,e,n,r,i,o){return tc(t)&&tc(e)&&(o.set(e,t),zr(t,e,nt,so,o),o.delete(e)),t}function co(t){return uc(t)?nt:t}function uo(t,e,n,r,i,o){var a=n&dt,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var l=-1,f=!0,d=n&ht?new vn:nt;for(o.set(t,e),o.set(e,t);++l<s;){var h=t[l],p=e[l];if(r)var g=a?r(p,h,l,e,t,o):r(h,p,l,t,e,o);if(g!==nt){if(g)continue;f=!1;break}if(d){if(!v(e,function(t,e){if(!Z(d,e)&&(h===t||i(h,t,n,r,o)))return d.push(e)})){f=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function lo(t,e,n,r,i,o,a){switch(n){case ae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oe:return!(t.byteLength!=e.byteLength||!o(new wl(t),new wl(e)));case Dt:case Xt:case Vt:return Ds(+t,+e);case Ft:return t.name==e.name&&t.message==e.message;case Qt:case te:return t==e+"";case Ut:var s=F;case $t:var c=r&dt;if(s||(s=U),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=ht,a.set(t,e);var l=uo(s(t),s(e),r,i,o,a);return a.delete(t),l;case ee:if(cf)return cf.call(t)==cf.call(e)}return!1}function fo(t,e,n,r,i,o){var a=n&dt,s=po(t),c=s.length;if(c!=po(e).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in e:dl.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);for(var h=a;++u<c;){l=s[u];var p=t[l],g=e[l];if(r)var m=a?r(g,p,l,e,t,o):r(p,g,l,t,e,o);if(!(m===nt?p===g||i(p,g,n,r,o):m)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(t),o.delete(e),d}function ho(t){return Sf(Go(t,nt,ua),t+"")}function po(t){return hr(t,Pc,wf)}function go(t){return hr(t,jc,If)}function mo(t){for(var e=t.name+"",n=tf[e],r=dl.call(tf,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function vo(t){return(dl.call(n,"placeholder")?n:t).placeholder}function yo(){var t=n.iteratee||Su;return t=t===Su?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function Co(t,e){var n=t.__data__;return No(e)?n["string"==typeof e?"string":"hash"]:n.map}function bo(t){for(var e=Pc(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Wo(i)]}return e}function wo(t,e){var n=z(t,e);return Tr(n)?n:nt}function Io(t){var e=dl.call(t,Tl),n=t[Tl];try{t[Tl]=nt}catch(t){}var r=gl.call(t);return e?t[Tl]=n:delete t[Tl],r}function Ao(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Xl(e,t+a);break;case"takeRight":t=Dl(t,e-a)}}return{start:t,end:e}}function _o(t){var e=t.match(Be);return e?e[1].split(Ne):[]}function xo(t,e,n){e=Ci(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Jo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&$s(i)&&Mo(a,i)&&(hd(t)||dd(t))}function Oo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&dl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function So(t){return"function"!=typeof t.constructor||jo(t)?{}:lf(Al(t))}function Lo(t,e,n,r){var i=t.constructor;switch(e){case oe:return Ii(t);case Dt:case Xt:return new i(+t);case ae:return Ai(t,r);case se:case ce:case ue:case le:case fe:case de:case he:case pe:case ge:return Li(t,r);case Ut:return _i(t,r,n);case Vt:case te:return new i(t);case Qt:return xi(t);case $t:return Oi(t,r,n);case ee:return Si(t)}}function To(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ee,"{\n/* [wrapped with "+e+"] */\n")}function ko(t){return hd(t)||dd(t)||!!(Sl&&t&&t[Sl])}function Mo(t,e){return!!(e=null==e?Mt:e)&&("number"==typeof t||Xe.test(t))&&t>-1&&t%1==0&&t<e}function Eo(t,e,n){if(!tc(n))return!1;var r=typeof e;return!!("number"==r?Xs(n)&&Mo(e,n.length):"string"==r&&e in n)&&Ds(n[e],t)}function Bo(t,e){if(hd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!dc(t))||(xe.test(t)||!_e.test(t)||null!=e&&t in rl(e))}function No(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Zo(t){var e=mo(t),r=n[e];if("function"!=typeof r||!(e in J.prototype))return!1;if(t===r)return!0;var i=bf(r);return!!i&&t===i[0]}function Po(t){return!!pl&&pl in t}function jo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ul)}function Wo(t){return t===t&&!tc(t)}function Ro(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==nt||t in rl(n)))}}function zo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(pt|gt|wt),a=r==wt&&n==vt||r==wt&&n==It&&t[7].length<=e[8]||r==(wt|It)&&e[7].length<=e[8]&&n==vt;if(!o&&!a)return t;r&pt&&(t[2]=e[2],i|=n&pt?0:mt);var s=e[3];if(s){var c=t[3];t[3]=c?Mi(c,s,e[4]):s,t[4]=c?H(t[3],ct):e[4]}return s=e[5],s&&(c=t[5],t[5]=c?Ei(c,s,e[6]):s,t[6]=c?H(t[5],ct):e[6]),s=e[7],s&&(t[7]=s),r&wt&&(t[8]=null==t[8]?e[8]:Xl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Do(t){var e=[];if(null!=t)for(var n in rl(t))e.push(n);return e}function Xo(t){return gl.call(t)}function Go(t,e,n){return e=Dl(e===nt?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Dl(r.length-e,0),s=Qu(a);++i<a;)s[i]=r[e+i];i=-1;for(var c=Qu(e+1);++i<e;)c[i]=r[i];return c[e]=n(s),o(t,this,c)}}function Fo(t,e){return e.length<2?t:dr(t,ri(e,0,-1))}function Yo(t,e){for(var n=t.length,r=Xl(e.length,n),i=Bi(t);r--;){var o=e[r];t[r]=Mo(o,n)?i[o]:nt}return t}function Ho(t,e,n){var r=e+"";return Sf(t,To(r,qo(_o(r),n)))}function Uo(t){var e=0,n=0;return function(){var r=Gl(),i=St-(r-n);if(n=r,i>0){if(++e>=Ot)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function Vo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===nt?r:e;++n<e;){var o=Jr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Jo(t){if("string"==typeof t||dc(t))return t;var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function Ko(t){if(null!=t){try{return fl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t,e){return s(jt,function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)}),t.sort()}function Qo(t){if(t instanceof J)return t.clone();var e=new S(t.__wrapped__,t.__chain__);return e.__actions__=Bi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function $o(t,e,n){e=(n?Eo(t,e,n):e===nt)?1:Dl(yc(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Qu(Nl(r/e));i<r;)a[o++]=ri(t,i,i+=e);return a}function ta(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ea(){var t=arguments.length;if(!t)return[];for(var e=Qu(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(hd(n)?Bi(n):[n],cr(e,1))}function na(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:yc(e),ri(t,e<0?0:e,r)):[]}function ra(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:yc(e),e=r-e,ri(t,0,e<0?0:e)):[]}function ia(t,e){return t&&t.length?hi(t,yo(e,3),!0,!0):[]}function oa(t,e){return t&&t.length?hi(t,yo(e,3),!0):[]}function aa(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Eo(t,e,n)&&(n=0,r=i),ar(t,e,n,r)):[]}function sa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:yc(n);return i<0&&(i=Dl(r+i,0)),w(t,yo(e,3),i)}function ca(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==nt&&(i=yc(n),i=n<0?Dl(r+i,0):Xl(i,r-1)),w(t,yo(e,3),i,!0)}function ua(t){return(null==t?0:t.length)?cr(t,1):[]}function la(t){return(null==t?0:t.length)?cr(t,kt):[]}function fa(t,e){return(null==t?0:t.length)?(e=e===nt?1:yc(e),cr(t,e)):[]}function da(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ha(t){return t&&t.length?t[0]:nt}function pa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:yc(n);return i<0&&(i=Dl(r+i,0)),I(t,e,i)}function ga(t){return(null==t?0:t.length)?ri(t,0,-1):[]}function ma(t,e){return null==t?"":Rl.call(t,e)}function va(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==nt&&(i=yc(n),i=i<0?Dl(r+i,0):Xl(i,r-1)),e===e?K(t,e,i):w(t,_,i,!0)}function Ca(t,e){return t&&t.length?Xr(t,yc(e)):nt}function ba(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}function wa(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,yo(n,2)):t}function Ia(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,nt,n):t}function Aa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=yo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Vr(t,i),n}function _a(t){return null==t?t:Hl.call(t)}function xa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Eo(t,e,n)?(e=0,n=r):(e=null==e?0:yc(e),n=n===nt?r:yc(n)),ri(t,e,n)):[]}function Oa(t,e){return oi(t,e)}function Sa(t,e,n){return ai(t,e,yo(n,2))}function La(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&Ds(t[r],e))return r}return-1}function Ta(t,e){return oi(t,e,!0)}function ka(t,e,n){return ai(t,e,yo(n,2),!0)}function Ma(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if(Ds(t[n],e))return n}return-1}function Ea(t){return t&&t.length?si(t):[]}function Ba(t,e){return t&&t.length?si(t,yo(e,2)):[]}function Na(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]}function Za(t,e,n){return t&&t.length?(e=n||e===nt?1:yc(e),ri(t,0,e<0?0:e)):[]}function Pa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:yc(e),e=r-e,ri(t,e<0?0:e,r)):[]}function ja(t,e){return t&&t.length?hi(t,yo(e,3),!1,!0):[]}function Wa(t,e){return t&&t.length?hi(t,yo(e,3)):[]}function Ra(t){return t&&t.length?li(t):[]}function za(t,e){return t&&t.length?li(t,yo(e,2)):[]}function Da(t,e){return e="function"==typeof e?e:nt,t&&t.length?li(t,nt,e):[]}function Xa(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Gs(t))return e=Dl(t.length,e),!0}),M(e,function(e){return h(t,O(e))})}function Ga(t,e){if(!t||!t.length)return[];var n=Xa(t);return null==e?n:h(n,function(t){return o(e,nt,t)})}function Fa(t,e){return mi(t||[],e||[],Yn)}function Ya(t,e){return mi(t||[],e||[],ei)}function Ha(t){var e=n(t);return e.__chain__=!0,e}function Ua(t,e){return e(t),t}function Va(t,e){return e(t)}function Ja(){return Ha(this)}function Ka(){return new S(this.value(),this.__chain__)}function qa(){this.__values__===nt&&(this.__values__=mc(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?nt:this.__values__[this.__index__++]}}function Qa(){return this}function $a(t){for(var e,n=this;n instanceof y;){var r=Qo(n);r.__index__=0,r.__values__=nt,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function ts(){var t=this.__wrapped__;if(t instanceof J){var e=t;return this.__actions__.length&&(e=new J(this)),e=e.reverse(),e.__actions__.push({func:Va,args:[_a],thisArg:nt}),new S(e,this.__chain__)}return this.thru(_a)}function es(){return pi(this.__wrapped__,this.__actions__)}function ns(t,e,n){var r=hd(t)?u:ir;return n&&Eo(t,e,n)&&(e=nt),r(t,yo(e,3))}function rs(t,e){return(hd(t)?l:sr)(t,yo(e,3))}function is(t,e){return cr(ls(t,e),1)}function os(t,e){return cr(ls(t,e),kt)}function as(t,e,n){return n=n===nt?1:yc(n),cr(ls(t,e),n)}function ss(t,e){return(hd(t)?s:ff)(t,yo(e,3))}function cs(t,e){return(hd(t)?c:df)(t,yo(e,3))}function us(t,e,n,r){t=Xs(t)?t:Jc(t),n=n&&!r?yc(n):0;var i=t.length;return n<0&&(n=Dl(i+n,0)),fc(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&I(t,e,n)>-1}function ls(t,e){return(hd(t)?h:jr)(t,yo(e,3))}function fs(t,e,n,r){return null==t?[]:(hd(e)||(e=null==e?[]:[e]),n=r?nt:n,hd(n)||(n=null==n?[]:[n]),Gr(t,e,n))}function ds(t,e,n){var r=hd(t)?g:L,i=arguments.length<3;return r(t,yo(e,4),n,i,ff)}function hs(t,e,n){var r=hd(t)?m:L,i=arguments.length<3;return r(t,yo(e,4),n,i,df)}function ps(t,e){return(hd(t)?l:sr)(t,Ls(yo(e,3)))}function gs(t){return(hd(t)?jn:$r)(t)}function ms(t,e,n){return e=(n?Eo(t,e,n):e===nt)?1:yc(e),(hd(t)?Xn:ti)(t,e)}function vs(t){return(hd(t)?Gn:ni)(t)}function ys(t){if(null==t)return 0;if(Xs(t))return fc(t)?q(t):t.length;var e=Af(t);return e==Ut||e==$t?t.size:Nr(t).length}function Cs(t,e,n){var r=hd(t)?v:ii;return n&&Eo(t,e,n)&&(e=nt),r(t,yo(e,3))}function bs(t,e){if("function"!=typeof e)throw new al(ot);return t=yc(t),function(){if(--t<1)return e.apply(this,arguments)}}function ws(t,e,n){return e=n?nt:e,e=t&&null==e?t.length:e,oo(t,wt,nt,nt,nt,nt,e)}function Is(t,e){var n;if("function"!=typeof e)throw new al(ot);return t=yc(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=nt),n}}function As(t,e,n){e=n?nt:e;var r=oo(t,vt,nt,nt,nt,nt,nt,e);return r.placeholder=As.placeholder,r}function _s(t,e,n){e=n?nt:e;var r=oo(t,yt,nt,nt,nt,nt,nt,e);return r.placeholder=_s.placeholder,r}function xs(t,e,n){function r(e){var n=d,r=h;return d=h=nt,y=e,g=t.apply(r,n)}function i(t){return y=t,m=Of(s,e),C?r(t):g}function o(t){var n=t-v,r=t-y,i=e-n;return b?Xl(i,p-r):i}function a(t){var n=t-v,r=t-y;return v===nt||n>=e||n<0||b&&r>=p}function s(){var t=ed();if(a(t))return c(t);m=Of(s,o(t))}function c(t){return m=nt,w&&d?r(t):(d=h=nt,g)}function u(){m!==nt&&yf(m),y=0,d=v=h=m=nt}function l(){return m===nt?g:c(ed())}function f(){var t=ed(),n=a(t);if(d=arguments,h=this,v=t,n){if(m===nt)return i(v);if(b)return m=Of(s,e),r(v)}return m===nt&&(m=Of(s,e)),g}var d,h,p,g,m,v,y=0,C=!1,b=!1,w=!0;if("function"!=typeof t)throw new al(ot);return e=bc(e)||0,tc(n)&&(C=!!n.leading,b="maxWait"in n,p=b?Dl(bc(n.maxWait)||0,e):p,w="trailing"in n?!!n.trailing:w),f.cancel=u,f.flush=l,f}function Os(t){return oo(t,At)}function Ss(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new al(ot);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ss.Cache||on),n}function Ls(t){if("function"!=typeof t)throw new al(ot);return function(){var e=arguments;switch(e.length){case 0:
return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ts(t){return Is(2,t)}function ks(t,e){if("function"!=typeof t)throw new al(ot);return e=e===nt?e:yc(e),Qr(t,e)}function Ms(t,e){if("function"!=typeof t)throw new al(ot);return e=null==e?0:Dl(yc(e),0),Qr(function(n){var r=n[e],i=bi(n,0,e);return r&&p(i,r),o(t,this,i)})}function Es(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new al(ot);return tc(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xs(t,e,{leading:r,maxWait:e,trailing:i})}function Bs(t){return ws(t,1)}function Ns(t,e){return sd(yi(e),t)}function Zs(){if(!arguments.length)return[];var t=arguments[0];return hd(t)?t:[t]}function Ps(t){return $n(t,ft)}function js(t,e){return e="function"==typeof e?e:nt,$n(t,ft,e)}function Ws(t){return $n(t,ut|ft)}function Rs(t,e){return e="function"==typeof e?e:nt,$n(t,ut|ft,e)}function zs(t,e){return null==e||er(t,e,Pc(e))}function Ds(t,e){return t===e||t!==t&&e!==e}function Xs(t){return null!=t&&$s(t.length)&&!qs(t)}function Gs(t){return ec(t)&&Xs(t)}function Fs(t){return t===!0||t===!1||ec(t)&&pr(t)==Dt}function Ys(t){return ec(t)&&1===t.nodeType&&!uc(t)}function Hs(t){if(null==t)return!0;if(Xs(t)&&(hd(t)||"string"==typeof t||"function"==typeof t.splice||gd(t)||bd(t)||dd(t)))return!t.length;var e=Af(t);if(e==Ut||e==$t)return!t.size;if(jo(t))return!Nr(t).length;for(var n in t)if(dl.call(t,n))return!1;return!0}function Us(t,e){return xr(t,e)}function Vs(t,e,n){n="function"==typeof n?n:nt;var r=n?n(t,e):nt;return r===nt?xr(t,e,nt,n):!!r}function Js(t){if(!ec(t))return!1;var e=pr(t);return e==Ft||e==Gt||"string"==typeof t.message&&"string"==typeof t.name&&!uc(t)}function Ks(t){return"number"==typeof t&&Wl(t)}function qs(t){if(!tc(t))return!1;var e=pr(t);return e==Yt||e==Ht||e==zt||e==qt}function Qs(t){return"number"==typeof t&&t==yc(t)}function $s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Mt}function tc(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ec(t){return null!=t&&"object"==typeof t}function nc(t,e){return t===e||Lr(t,e,bo(e))}function rc(t,e,n){return n="function"==typeof n?n:nt,Lr(t,e,bo(e),n)}function ic(t){return cc(t)&&t!=+t}function oc(t){if(_f(t))throw new tl(it);return Tr(t)}function ac(t){return null===t}function sc(t){return null==t}function cc(t){return"number"==typeof t||ec(t)&&pr(t)==Vt}function uc(t){if(!ec(t)||pr(t)!=Kt)return!1;var e=Al(t);if(null===e)return!0;var n=dl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&fl.call(n)==ml}function lc(t){return Qs(t)&&t>=-Mt&&t<=Mt}function fc(t){return"string"==typeof t||!hd(t)&&ec(t)&&pr(t)==te}function dc(t){return"symbol"==typeof t||ec(t)&&pr(t)==ee}function hc(t){return t===nt}function pc(t){return ec(t)&&Af(t)==re}function gc(t){return ec(t)&&pr(t)==ie}function mc(t){if(!t)return[];if(Xs(t))return fc(t)?Q(t):Bi(t);if(Ll&&t[Ll])return G(t[Ll]());var e=Af(t);return(e==Ut?F:e==$t?U:Jc)(t)}function vc(t){if(!t)return 0===t?t:0;if((t=bc(t))===kt||t===-kt){return(t<0?-1:1)*Et}return t===t?t:0}function yc(t){var e=vc(t),n=e%1;return e===e?n?e-n:e:0}function Cc(t){return t?Qn(yc(t),0,Nt):0}function bc(t){if("number"==typeof t)return t;if(dc(t))return Bt;if(tc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Te,"");var n=Re.test(t);return n||De.test(t)?In(t.slice(2),n?2:8):We.test(t)?Bt:+t}function wc(t){return Ni(t,jc(t))}function Ic(t){return t?Qn(yc(t),-Mt,Mt):0===t?t:0}function Ac(t){return null==t?"":ui(t)}function _c(t,e){var n=lf(t);return null==e?n:Vn(n,e)}function xc(t,e){return b(t,yo(e,3),ur)}function Oc(t,e){return b(t,yo(e,3),lr)}function Sc(t,e){return null==t?t:hf(t,yo(e,3),jc)}function Lc(t,e){return null==t?t:pf(t,yo(e,3),jc)}function Tc(t,e){return t&&ur(t,yo(e,3))}function kc(t,e){return t&&lr(t,yo(e,3))}function Mc(t){return null==t?[]:fr(t,Pc(t))}function Ec(t){return null==t?[]:fr(t,jc(t))}function Bc(t,e,n){var r=null==t?nt:dr(t,e);return r===nt?n:r}function Nc(t,e){return null!=t&&xo(t,e,mr)}function Zc(t,e){return null!=t&&xo(t,e,vr)}function Pc(t){return Xs(t)?kn(t):Nr(t)}function jc(t){return Xs(t)?kn(t,!0):Zr(t)}function Wc(t,e){var n={};return e=yo(e,3),ur(t,function(t,r,i){Kn(n,e(t,r,i),t)}),n}function Rc(t,e){var n={};return e=yo(e,3),ur(t,function(t,r,i){Kn(n,r,e(t,r,i))}),n}function zc(t,e){return Dc(t,Ls(yo(e)))}function Dc(t,e){if(null==t)return{};var n=h(go(t),function(t){return[t]});return e=yo(e),Yr(t,n,function(t,n){return e(t,n[0])})}function Xc(t,e,n){e=Ci(e,t);var r=-1,i=e.length;for(i||(i=1,t=nt);++r<i;){var o=null==t?nt:t[Jo(e[r])];o===nt&&(r=i,o=n),t=qs(o)?o.call(t):o}return t}function Gc(t,e,n){return null==t?t:ei(t,e,n)}function Fc(t,e,n,r){return r="function"==typeof r?r:nt,null==t?t:ei(t,e,n,r)}function Yc(t,e,n){var r=hd(t),i=r||gd(t)||bd(t);if(e=yo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:tc(t)&&qs(o)?lf(Al(t)):{}}return(i?s:ur)(t,function(t,r,i){return e(n,t,r,i)}),n}function Hc(t,e){return null==t||fi(t,e)}function Uc(t,e,n){return null==t?t:di(t,e,yi(n))}function Vc(t,e,n,r){return r="function"==typeof r?r:nt,null==t?t:di(t,e,yi(n),r)}function Jc(t){return null==t?[]:N(t,Pc(t))}function Kc(t){return null==t?[]:N(t,jc(t))}function qc(t,e,n){return n===nt&&(n=e,e=nt),n!==nt&&(n=bc(n),n=n===n?n:0),e!==nt&&(e=bc(e),e=e===e?e:0),Qn(bc(t),e,n)}function Qc(t,e,n){return e=vc(e),n===nt?(n=e,e=0):n=vc(n),t=bc(t),yr(t,e,n)}function $c(t,e,n){if(n&&"boolean"!=typeof n&&Eo(t,e,n)&&(e=n=nt),n===nt&&("boolean"==typeof e?(n=e,e=nt):"boolean"==typeof t&&(n=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=vc(t),e===nt?(e=t,t=0):e=vc(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Yl();return Xl(t+i*(e-t+wn("1e-"+((i+"").length-1))),e)}return Jr(t,e)}function tu(t){return Hd(Ac(t).toLowerCase())}function eu(t){return(t=Ac(t))&&t.replace(Ge,Wn).replace(cn,"")}function nu(t,e,n){t=Ac(t),e=ui(e);var r=t.length;n=n===nt?r:Qn(yc(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function ru(t){return t=Ac(t),t&&Ie.test(t)?t.replace(be,Rn):t}function iu(t){return t=Ac(t),t&&Le.test(t)?t.replace(Se,"\\$&"):t}function ou(t,e,n){t=Ac(t),e=yc(e);var r=e?q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Qi(Zl(i),n)+t+Qi(Nl(i),n)}function au(t,e,n){t=Ac(t),e=yc(e);var r=e?q(t):0;return e&&r<e?t+Qi(e-r,n):t}function su(t,e,n){t=Ac(t),e=yc(e);var r=e?q(t):0;return e&&r<e?Qi(e-r,n)+t:t}function cu(t,e,n){return n||null==e?e=0:e&&(e=+e),Fl(Ac(t).replace(ke,""),e||0)}function uu(t,e,n){return e=(n?Eo(t,e,n):e===nt)?1:yc(e),qr(Ac(t),e)}function lu(){var t=arguments,e=Ac(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fu(t,e,n){return n&&"number"!=typeof n&&Eo(t,e,n)&&(e=n=nt),(n=n===nt?Nt:n>>>0)?(t=Ac(t),t&&("string"==typeof e||null!=e&&!yd(e))&&!(e=ui(e))&&D(t)?bi(Q(t),0,n):t.split(e,n)):[]}function du(t,e,n){return t=Ac(t),n=null==n?0:Qn(yc(n),0,t.length),e=ui(e),t.slice(n,n+e.length)==e}function hu(t,e,r){var i=n.templateSettings;r&&Eo(t,e,r)&&(e=nt),t=Ac(t),e=xd({},e,i,ao);var o,a,s=xd({},e.imports,i.imports,ao),c=Pc(s),u=N(s,c),l=0,f=e.interpolate||Fe,d="__p += '",h=il((e.escape||Fe).source+"|"+f.source+"|"+(f===Ae?Pe:Fe).source+"|"+(e.evaluate||Fe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++pn+"]")+"\n";t.replace(h,function(e,n,r,i,s,c){return r||(r=i),d+=t.slice(l,c).replace(Ye,R),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e}),d+="';\n";var g=e.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(me,""):d).replace(ve,"$1").replace(ye,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ud(function(){return el(c,p+"return "+d).apply(nt,u)});if(m.source=d,Js(m))throw m;return m}function pu(t){return Ac(t).toLowerCase()}function gu(t){return Ac(t).toUpperCase()}function mu(t,e,n){if((t=Ac(t))&&(n||e===nt))return t.replace(Te,"");if(!t||!(e=ui(e)))return t;var r=Q(t),i=Q(e);return bi(r,P(r,i),j(r,i)+1).join("")}function vu(t,e,n){if((t=Ac(t))&&(n||e===nt))return t.replace(Me,"");if(!t||!(e=ui(e)))return t;var r=Q(t);return bi(r,0,j(r,Q(e))+1).join("")}function yu(t,e,n){if((t=Ac(t))&&(n||e===nt))return t.replace(ke,"");if(!t||!(e=ui(e)))return t;var r=Q(t);return bi(r,P(r,Q(e))).join("")}function Cu(t,e){var n=_t,r=xt;if(tc(e)){var i="separator"in e?e.separator:i;n="length"in e?yc(e.length):n,r="omission"in e?ui(e.omission):r}t=Ac(t);var o=t.length;if(D(t)){var a=Q(t);o=a.length}if(n>=o)return t;var s=n-q(r);if(s<1)return r;var c=a?bi(a,0,s).join(""):t.slice(0,s);if(i===nt)return c+r;if(a&&(s+=c.length-s),yd(i)){if(t.slice(s).search(i)){var u,l=c;for(i.global||(i=il(i.source,Ac(je.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var f=u.index;c=c.slice(0,f===nt?s:f)}}else if(t.indexOf(ui(i),s)!=s){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r}function bu(t){return t=Ac(t),t&&we.test(t)?t.replace(Ce,zn):t}function wu(t,e,n){return t=Ac(t),e=n?nt:e,e===nt?X(t)?et(t):C(t):t.match(e)||[]}function Iu(t){var e=null==t?0:t.length,n=yo();return t=e?h(t,function(t){if("function"!=typeof t[1])throw new al(ot);return[n(t[0]),t[1]]}):[],Qr(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Au(t){return tr($n(t,ut))}function _u(t){return function(){return t}}function xu(t,e){return null==t||t!==t?e:t}function Ou(t){return t}function Su(t){return Br("function"==typeof t?t:$n(t,ut))}function Lu(t){return Wr($n(t,ut))}function Tu(t,e){return Rr(t,$n(e,ut))}function ku(t,e,n){var r=Pc(e),i=fr(e,r);null!=n||tc(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=fr(e,Pc(e)));var o=!(tc(n)&&"chain"in n&&!n.chain),a=qs(t);return s(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Bi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function Mu(){return xn._===this&&(xn._=vl),this}function Eu(){}function Bu(t){return t=yc(t),Qr(function(e){return Xr(e,t)})}function Nu(t){return Bo(t)?O(Jo(t)):Hr(t)}function Zu(t){return function(e){return null==t?nt:dr(t,e)}}function Pu(){return[]}function ju(){return!1}function Wu(){return{}}function Ru(){return""}function zu(){return!0}function Du(t,e){if((t=yc(t))<1||t>Mt)return[];var n=Nt,r=Xl(t,Nt);e=yo(e),t-=Nt;for(var i=M(r,e);++n<t;)e(n);return i}function Xu(t){return hd(t)?h(t,Jo):dc(t)?[t]:Bi(Lf(Ac(t)))}function Gu(t){var e=++hl;return Ac(t)+e}function Fu(t){return t&&t.length?or(t,Ou,gr):nt}function Yu(t,e){return t&&t.length?or(t,yo(e,2),gr):nt}function Hu(t){return x(t,Ou)}function Uu(t,e){return x(t,yo(e,2))}function Vu(t){return t&&t.length?or(t,Ou,Pr):nt}function Ju(t,e){return t&&t.length?or(t,yo(e,2),Pr):nt}function Ku(t){return t&&t.length?k(t,Ou):0}function qu(t,e){return t&&t.length?k(t,yo(e,2)):0}e=null==e?xn:Dn.defaults(xn.Object(),e,Dn.pick(xn,hn));var Qu=e.Array,$u=e.Date,tl=e.Error,el=e.Function,nl=e.Math,rl=e.Object,il=e.RegExp,ol=e.String,al=e.TypeError,sl=Qu.prototype,cl=el.prototype,ul=rl.prototype,ll=e["__core-js_shared__"],fl=cl.toString,dl=ul.hasOwnProperty,hl=0,pl=function(){var t=/[^.]+$/.exec(ll&&ll.keys&&ll.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gl=ul.toString,ml=fl.call(rl),vl=xn._,yl=il("^"+fl.call(dl).replace(Se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cl=Ln?e.Buffer:nt,bl=e.Symbol,wl=e.Uint8Array,Il=Cl?Cl.allocUnsafe:nt,Al=Y(rl.getPrototypeOf,rl),_l=rl.create,xl=ul.propertyIsEnumerable,Ol=sl.splice,Sl=bl?bl.isConcatSpreadable:nt,Ll=bl?bl.iterator:nt,Tl=bl?bl.toStringTag:nt,kl=function(){try{var t=wo(rl,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ml=e.clearTimeout!==xn.clearTimeout&&e.clearTimeout,El=$u&&$u.now!==xn.Date.now&&$u.now,Bl=e.setTimeout!==xn.setTimeout&&e.setTimeout,Nl=nl.ceil,Zl=nl.floor,Pl=rl.getOwnPropertySymbols,jl=Cl?Cl.isBuffer:nt,Wl=e.isFinite,Rl=sl.join,zl=Y(rl.keys,rl),Dl=nl.max,Xl=nl.min,Gl=$u.now,Fl=e.parseInt,Yl=nl.random,Hl=sl.reverse,Ul=wo(e,"DataView"),Vl=wo(e,"Map"),Jl=wo(e,"Promise"),Kl=wo(e,"Set"),ql=wo(e,"WeakMap"),Ql=wo(rl,"create"),$l=ql&&new ql,tf={},ef=Ko(Ul),nf=Ko(Vl),rf=Ko(Jl),of=Ko(Kl),af=Ko(ql),sf=bl?bl.prototype:nt,cf=sf?sf.valueOf:nt,uf=sf?sf.toString:nt,lf=function(){function t(){}return function(e){if(!tc(e))return{};if(_l)return _l(e);t.prototype=e;var n=new t;return t.prototype=nt,n}}();n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ae,variable:"",imports:{_:n}},n.prototype=y.prototype,n.prototype.constructor=n,S.prototype=lf(y.prototype),S.prototype.constructor=S,J.prototype=lf(y.prototype),J.prototype.constructor=J,He.prototype.clear=Ue,He.prototype.delete=Ve,He.prototype.get=Je,He.prototype.has=Ke,He.prototype.set=qe,Qe.prototype.clear=$e,Qe.prototype.delete=tn,Qe.prototype.get=en,Qe.prototype.has=nn,Qe.prototype.set=rn,on.prototype.clear=an,on.prototype.delete=un,on.prototype.get=ln,on.prototype.has=fn,on.prototype.set=dn,vn.prototype.add=vn.prototype.push=yn,vn.prototype.has=Cn,bn.prototype.clear=An,bn.prototype.delete=_n,bn.prototype.get=On,bn.prototype.has=Sn,bn.prototype.set=Tn;var ff=Ri(ur),df=Ri(lr,!0),hf=zi(),pf=zi(!0),gf=$l?function(t,e){return $l.set(t,e),t}:Ou,mf=kl?function(t,e){return kl(t,"toString",{configurable:!0,enumerable:!1,value:_u(e),writable:!0})}:Ou,vf=Qr,yf=Ml||function(t){return xn.clearTimeout(t)},Cf=Kl&&1/U(new Kl([,-0]))[1]==kt?function(t){return new Kl(t)}:Eu,bf=$l?function(t){return $l.get(t)}:Eu,wf=Pl?function(t){return null==t?[]:(t=rl(t),l(Pl(t),function(e){return xl.call(t,e)}))}:Pu,If=Pl?function(t){for(var e=[];t;)p(e,wf(t)),t=Al(t);return e}:Pu,Af=pr;(Ul&&Af(new Ul(new ArrayBuffer(1)))!=ae||Vl&&Af(new Vl)!=Ut||Jl&&"[object Promise]"!=Af(Jl.resolve())||Kl&&Af(new Kl)!=$t||ql&&Af(new ql)!=re)&&(Af=function(t){var e=pr(t),n=e==Kt?t.constructor:nt,r=n?Ko(n):"";if(r)switch(r){case ef:return ae;case nf:return Ut;case rf:return"[object Promise]";case of:return $t;case af:return re}return e});var _f=ll?qs:ju,xf=Uo(gf),Of=Bl||function(t,e){return xn.setTimeout(t,e)},Sf=Uo(mf),Lf=function(t){var e=Ss(t,function(t){return n.size===st&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Oe.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,n,r,i){e.push(r?i.replace(/\\(\\)?/g,"$1"):n||t)}),e}),Tf=Qr(function(t,e){return Gs(t)?rr(t,cr(e,1,Gs,!0)):[]}),kf=Qr(function(t,e){var n=va(e);return Gs(n)&&(n=nt),Gs(t)?rr(t,cr(e,1,Gs,!0),yo(n,2)):[]}),Mf=Qr(function(t,e){var n=va(e);return Gs(n)&&(n=nt),Gs(t)?rr(t,cr(e,1,Gs,!0),nt,n):[]}),Ef=Qr(function(t){var e=h(t,vi);return e.length&&e[0]===t[0]?Cr(e):[]}),Bf=Qr(function(t){var e=va(t),n=h(t,vi);return e===va(n)?e=nt:n.pop(),n.length&&n[0]===t[0]?Cr(n,yo(e,2)):[]}),Nf=Qr(function(t){var e=va(t),n=h(t,vi);return e="function"==typeof e?e:nt,e&&n.pop(),n.length&&n[0]===t[0]?Cr(n,nt,e):[]}),Zf=Qr(ba),Pf=ho(function(t,e){var n=null==t?0:t.length,r=qn(t,e);return Vr(t,h(e,function(t){return Mo(t,n)?+t:t}).sort(Ti)),r}),jf=Qr(function(t){return li(cr(t,1,Gs,!0))}),Wf=Qr(function(t){var e=va(t);return Gs(e)&&(e=nt),li(cr(t,1,Gs,!0),yo(e,2))}),Rf=Qr(function(t){var e=va(t);return e="function"==typeof e?e:nt,li(cr(t,1,Gs,!0),nt,e)}),zf=Qr(function(t,e){return Gs(t)?rr(t,e):[]}),Df=Qr(function(t){return gi(l(t,Gs))}),Xf=Qr(function(t){var e=va(t);return Gs(e)&&(e=nt),gi(l(t,Gs),yo(e,2))}),Gf=Qr(function(t){var e=va(t);return e="function"==typeof e?e:nt,gi(l(t,Gs),nt,e)}),Ff=Qr(Xa),Yf=Qr(function(t){var e=t.length,n=e>1?t[e-1]:nt;return n="function"==typeof n?(t.pop(),n):nt,Ga(t,n)}),Hf=ho(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return qn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof J&&Mo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Va,args:[i],thisArg:nt}),new S(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(i)}),Uf=ji(function(t,e,n){dl.call(t,n)?++t[n]:Kn(t,n,1)}),Vf=Hi(sa),Jf=Hi(ca),Kf=ji(function(t,e,n){dl.call(t,n)?t[n].push(e):Kn(t,n,[e])}),qf=Qr(function(t,e,n){var r=-1,i="function"==typeof e,a=Xs(t)?Qu(t.length):[];return ff(t,function(t){a[++r]=i?o(e,t,n):wr(t,e,n)}),a}),Qf=ji(function(t,e,n){Kn(t,n,e)}),$f=ji(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),td=Qr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Eo(t,e[0],e[1])?e=[]:n>2&&Eo(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,cr(e,1),[])}),ed=El||function(){return xn.Date.now()},nd=Qr(function(t,e,n){var r=pt;if(n.length){var i=H(n,vo(nd));r|=Ct}return oo(t,r,e,n,i)}),rd=Qr(function(t,e,n){var r=pt|gt;if(n.length){var i=H(n,vo(rd));r|=Ct}return oo(e,r,t,n,i)}),id=Qr(function(t,e){return nr(t,1,e)}),od=Qr(function(t,e,n){return nr(t,bc(e)||0,n)});Ss.Cache=on;var ad=vf(function(t,e){e=1==e.length&&hd(e[0])?h(e[0],B(yo())):h(cr(e,1),B(yo()));var n=e.length;return Qr(function(r){for(var i=-1,a=Xl(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),sd=Qr(function(t,e){var n=H(e,vo(sd));return oo(t,Ct,nt,e,n)}),cd=Qr(function(t,e){var n=H(e,vo(cd));return oo(t,bt,nt,e,n)}),ud=ho(function(t,e){return oo(t,It,nt,nt,nt,e)}),ld=eo(gr),fd=eo(function(t,e){return t>=e}),dd=Ir(function(){return arguments}())?Ir:function(t){return ec(t)&&dl.call(t,"callee")&&!xl.call(t,"callee")},hd=Qu.isArray,pd=Mn?B(Mn):Ar,gd=jl||ju,md=En?B(En):_r,vd=Bn?B(Bn):Sr,yd=Nn?B(Nn):kr,Cd=Zn?B(Zn):Mr,bd=Pn?B(Pn):Er,wd=eo(Pr),Id=eo(function(t,e){return t<=e}),Ad=Wi(function(t,e){if(jo(e)||Xs(e))return void Ni(e,Pc(e),t);for(var n in e)dl.call(e,n)&&Yn(t,n,e[n])}),_d=Wi(function(t,e){Ni(e,jc(e),t)}),xd=Wi(function(t,e,n,r){Ni(e,jc(e),t,r)}),Od=Wi(function(t,e,n,r){Ni(e,Pc(e),t,r)}),Sd=ho(qn),Ld=Qr(function(t){return t.push(nt,ao),o(xd,nt,t)}),Td=Qr(function(t){return t.push(nt,so),o(Nd,nt,t)}),kd=Ji(function(t,e,n){t[e]=n},_u(Ou)),Md=Ji(function(t,e,n){dl.call(t,e)?t[e].push(n):t[e]=[n]},yo),Ed=Qr(wr),Bd=Wi(function(t,e,n){zr(t,e,n)}),Nd=Wi(function(t,e,n,r){zr(t,e,n,r)}),Zd=ho(function(t,e){var n={};if(null==t)return n;var r=!1;e=h(e,function(e){return e=Ci(e,t),r||(r=e.length>1),e}),Ni(t,go(t),n),r&&(n=$n(n,ut|lt|ft,co));for(var i=e.length;i--;)fi(n,e[i]);return n}),Pd=ho(function(t,e){return null==t?{}:Fr(t,e)}),jd=io(Pc),Wd=io(jc),Rd=Gi(function(t,e,n){return e=e.toLowerCase(),t+(n?tu(e):e)}),zd=Gi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Dd=Gi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xd=Xi("toLowerCase"),Gd=Gi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Fd=Gi(function(t,e,n){return t+(n?" ":"")+Hd(e)}),Yd=Gi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Hd=Xi("toUpperCase"),Ud=Qr(function(t,e){try{return o(t,nt,e)}catch(t){return Js(t)?t:new tl(t)}}),Vd=ho(function(t,e){return s(e,function(e){e=Jo(e),Kn(t,e,nd(t[e],t))}),t}),Jd=Ui(),Kd=Ui(!0),qd=Qr(function(t,e){return function(n){return wr(n,t,e)}}),Qd=Qr(function(t,e){return function(n){return wr(t,n,e)}}),$d=qi(h),th=qi(u),eh=qi(v),nh=to(),rh=to(!0),ih=Ki(function(t,e){return t+e},0),oh=ro("ceil"),ah=Ki(function(t,e){return t/e},1),sh=ro("floor"),ch=Ki(function(t,e){return t*e},1),uh=ro("round"),lh=Ki(function(t,e){return t-e},0);return n.after=bs,n.ary=ws,n.assign=Ad,n.assignIn=_d,n.assignInWith=xd,n.assignWith=Od,n.at=Sd,n.before=Is,n.bind=nd,n.bindAll=Vd,n.bindKey=rd,n.castArray=Zs,n.chain=Ha,n.chunk=$o,n.compact=ta,n.concat=ea,n.cond=Iu,n.conforms=Au,n.constant=_u,n.countBy=Uf,n.create=_c,n.curry=As,n.curryRight=_s,n.debounce=xs,n.defaults=Ld,n.defaultsDeep=Td,n.defer=id,n.delay=od,n.difference=Tf,n.differenceBy=kf,n.differenceWith=Mf,n.drop=na,n.dropRight=ra,n.dropRightWhile=ia,n.dropWhile=oa,n.fill=aa,n.filter=rs,n.flatMap=is,n.flatMapDeep=os,n.flatMapDepth=as,n.flatten=ua,n.flattenDeep=la,n.flattenDepth=fa,n.flip=Os,n.flow=Jd,n.flowRight=Kd,n.fromPairs=da,n.functions=Mc,n.functionsIn=Ec,n.groupBy=Kf,n.initial=ga,n.intersection=Ef,n.intersectionBy=Bf,n.intersectionWith=Nf,n.invert=kd,n.invertBy=Md,n.invokeMap=qf,n.iteratee=Su,n.keyBy=Qf,n.keys=Pc,n.keysIn=jc,n.map=ls,n.mapKeys=Wc,n.mapValues=Rc,n.matches=Lu,n.matchesProperty=Tu,n.memoize=Ss,n.merge=Bd,n.mergeWith=Nd,n.method=qd,n.methodOf=Qd,n.mixin=ku,n.negate=Ls,n.nthArg=Bu,n.omit=Zd,n.omitBy=zc,n.once=Ts,n.orderBy=fs,n.over=$d,n.overArgs=ad,n.overEvery=th,n.overSome=eh,n.partial=sd,n.partialRight=cd,n.partition=$f,n.pick=Pd,n.pickBy=Dc,n.property=Nu,n.propertyOf=Zu,n.pull=Zf,n.pullAll=ba,n.pullAllBy=wa,n.pullAllWith=Ia,n.pullAt=Pf,n.range=nh,n.rangeRight=rh,n.rearg=ud,n.reject=ps,n.remove=Aa,n.rest=ks,n.reverse=_a,n.sampleSize=ms,n.set=Gc,n.setWith=Fc,n.shuffle=vs,n.slice=xa,n.sortBy=td,n.sortedUniq=Ea,n.sortedUniqBy=Ba,n.split=fu,n.spread=Ms,n.tail=Na,n.take=Za,n.takeRight=Pa,n.takeRightWhile=ja,n.takeWhile=Wa,n.tap=Ua,n.throttle=Es,n.thru=Va,n.toArray=mc,n.toPairs=jd,n.toPairsIn=Wd,n.toPath=Xu,n.toPlainObject=wc,n.transform=Yc,n.unary=Bs,n.union=jf,n.unionBy=Wf,n.unionWith=Rf,n.uniq=Ra,n.uniqBy=za,n.uniqWith=Da,n.unset=Hc,n.unzip=Xa,n.unzipWith=Ga,n.update=Uc,n.updateWith=Vc,n.values=Jc,n.valuesIn=Kc,n.without=zf,n.words=wu,n.wrap=Ns,n.xor=Df,n.xorBy=Xf,n.xorWith=Gf,n.zip=Ff,n.zipObject=Fa,n.zipObjectDeep=Ya,n.zipWith=Yf,n.entries=jd,n.entriesIn=Wd,n.extend=_d,n.extendWith=xd,ku(n,n),n.add=ih,n.attempt=Ud,n.camelCase=Rd,n.capitalize=tu,n.ceil=oh,n.clamp=qc,n.clone=Ps,n.cloneDeep=Ws,n.cloneDeepWith=Rs,n.cloneWith=js,n.conformsTo=zs,n.deburr=eu,n.defaultTo=xu,n.divide=ah,n.endsWith=nu,n.eq=Ds,n.escape=ru,n.escapeRegExp=iu,n.every=ns,n.find=Vf,n.findIndex=sa,n.findKey=xc,n.findLast=Jf,n.findLastIndex=ca,n.findLastKey=Oc,n.floor=sh,n.forEach=ss,n.forEachRight=cs,n.forIn=Sc,n.forInRight=Lc,n.forOwn=Tc,n.forOwnRight=kc,n.get=Bc,n.gt=ld,n.gte=fd,n.has=Nc,n.hasIn=Zc,n.head=ha,n.identity=Ou,n.includes=us,n.indexOf=pa,n.inRange=Qc,n.invoke=Ed,n.isArguments=dd,n.isArray=hd,n.isArrayBuffer=pd,n.isArrayLike=Xs,n.isArrayLikeObject=Gs,n.isBoolean=Fs,n.isBuffer=gd,n.isDate=md,n.isElement=Ys,n.isEmpty=Hs,n.isEqual=Us,n.isEqualWith=Vs,n.isError=Js,n.isFinite=Ks,n.isFunction=qs,n.isInteger=Qs,n.isLength=$s,n.isMap=vd,n.isMatch=nc,n.isMatchWith=rc,n.isNaN=ic,n.isNative=oc,n.isNil=sc,n.isNull=ac,n.isNumber=cc,n.isObject=tc,n.isObjectLike=ec,n.isPlainObject=uc,n.isRegExp=yd,n.isSafeInteger=lc,n.isSet=Cd,n.isString=fc,n.isSymbol=dc,n.isTypedArray=bd,n.isUndefined=hc,n.isWeakMap=pc,n.isWeakSet=gc,n.join=ma,n.kebabCase=zd,n.last=va,n.lastIndexOf=ya,n.lowerCase=Dd,n.lowerFirst=Xd,n.lt=wd,n.lte=Id,n.max=Fu,n.maxBy=Yu,n.mean=Hu,n.meanBy=Uu,n.min=Vu,n.minBy=Ju,n.stubArray=Pu,n.stubFalse=ju,n.stubObject=Wu,n.stubString=Ru,n.stubTrue=zu,n.multiply=ch,n.nth=Ca,n.noConflict=Mu,n.noop=Eu,n.now=ed,n.pad=ou,n.padEnd=au,n.padStart=su,n.parseInt=cu,n.random=$c,n.reduce=ds,n.reduceRight=hs,n.repeat=uu,n.replace=lu,n.result=Xc,n.round=uh,n.runInContext=t,n.sample=gs,n.size=ys,n.snakeCase=Gd,n.some=Cs,n.sortedIndex=Oa,n.sortedIndexBy=Sa,n.sortedIndexOf=La,n.sortedLastIndex=Ta,n.sortedLastIndexBy=ka,n.sortedLastIndexOf=Ma,n.startCase=Fd,n.startsWith=du,n.subtract=lh,n.sum=Ku,n.sumBy=qu,n.template=hu,n.times=Du,n.toFinite=vc,n.toInteger=yc,n.toLength=Cc,n.toLower=pu,n.toNumber=bc,n.toSafeInteger=Ic,n.toString=Ac,n.toUpper=gu,n.trim=mu,n.trimEnd=vu,n.trimStart=yu,n.truncate=Cu,n.unescape=bu,n.uniqueId=Gu,n.upperCase=Yd,n.upperFirst=Hd,n.each=ss,n.eachRight=cs,n.first=ha,ku(n,function(){var t={};return ur(n,function(e,r){dl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),s(["drop","take"],function(t,e){J.prototype[t]=function(n){n=n===nt?1:Dl(yc(n),0);var r=this.__filtered__&&!e?new J(this):this.clone();return r.__filtered__?r.__takeCount__=Xl(n,r.__takeCount__):r.__views__.push({size:Xl(n,Nt),type:t+(r.__dir__<0?"Right":"")}),r},J.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Lt||3==n;J.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:yo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");J.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");J.prototype[t]=function(){return this.__filtered__?new J(this):this[n](1)}}),J.prototype.compact=function(){return this.filter(Ou)},J.prototype.find=function(t){return this.filter(t).head()},J.prototype.findLast=function(t){return this.reverse().find(t)},J.prototype.invokeMap=Qr(function(t,e){return"function"==typeof t?new J(this):this.map(function(n){return wr(n,t,e)})}),J.prototype.reject=function(t){return this.filter(Ls(yo(t)))},J.prototype.slice=function(t,e){t=yc(t);var n=this;return n.__filtered__&&(t>0||e<0)?new J(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==nt&&(e=yc(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},J.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},J.prototype.toArray=function(){return this.take(Nt)},ur(J.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=n[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,c=e instanceof J,u=s[0],l=c||hd(e),f=function(t){var e=o.apply(n,p([t],s));return i&&d?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,h=!!this.__actions__.length,g=a&&!d,m=c&&!h;if(!a&&l){e=m?e:new J(this);var v=t.apply(e,s);return v.__actions__.push({func:Va,args:[f],thisArg:nt}),new S(v,d)}return g&&m?t.apply(this,s):(v=this.thru(f),g?i?v.value()[0]:v.value():v)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=sl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(hd(n)?n:[],t)}return this[r](function(n){return e.apply(hd(n)?n:[],t)})}}),ur(J.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(tf[i]||(tf[i]=[])).push({name:e,func:r})}}),tf[Vi(nt,gt).name]=[{name:"wrapper",func:nt}],J.prototype.clone=$,J.prototype.reverse=tt,J.prototype.value=Ze,n.prototype.at=Hf,n.prototype.chain=Ja,n.prototype.commit=Ka,n.prototype.next=qa,n.prototype.plant=$a,n.prototype.reverse=ts,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=es,n.prototype.first=n.prototype.head,Ll&&(n.prototype[Ll]=Qa),n}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(xn._=Dn,define(function(){return Dn})):Sn?((Sn.exports=Dn)._=Dn,On._=Dn):xn._=Dn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,c=r(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(c[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(c[s[f]]=n[s[f]])}}return c}},{}],80:[function(t,e,n){!function(){"use strict";function t(t,e){t(e()),e(t)}function n(t,e){e(t()),t(e),e(t)}function r(t){return void 0===t}function i(t){return"function"!=typeof t}function o(t){return"function"==typeof t}function a(t){if(!o(t))throw new Error("transform expects an observable");return t}function s(t,e){for(var n in t)t[n](e)}function c(t,e){delete t[t.indexOf(e)]}function u(t,e,n){(t.on||t.addEventListener).call(t,e,n,!1)}function l(t,e,n){(t.removeListener||t.removeEventListener||t.off).call(t,e,n,!1)}function f(t){function e(t){return r(t)?n:i(t)?s(o,n=t):(o.push(t),t(n),function(){c(o,t)})}var n=t,o=[];return e.set=function(t){s(o,n=t)},e}function d(t,e){return function(n){return r(n)?t.get(e):i(n)?t.set(e,n):(u(t,"change:"+e,n),n(t.get(e)),function(){l(t,"change:"+e,n)})}}function h(t,e,n){return a(t),function(o){return r(o)?e(t()):t(i(o)?(n||e)(o):function(t){o(e(t))})}}function p(t){return h(t,function(t){return!t})}function g(t,e,n,r){function i(){r(o(n)?n():t[n])}return u(t,e,i),i(),function(){l(t,e,i)}}function m(t,e,n){return e=e||"value",n=n||"input",function(o){return r(o)?t[e]:i(o)?t[e]=o:g(t,n,e,o)}}function v(t){function e(){return t[t.selectedIndex].value}function n(e){for(var n=0;n<t.options.length;n++)t.options[n].value==e&&(t.selectedIndex=n)}return function(o){return r(o)?t.options[t.selectedIndex].value:i(o)?n(o):g(t,"change",e,o)}}function y(t,e,n){var o=!1;return function(a){function s(){o||a(o=!0)}function c(){o&&a(o=!1)}return r(a)?o:i(a)?void 0:(u(t,e,s),u(t,n||e,c),a(o),function(){l(t,e,s),l(t,n||e,c)})}}function C(t,e){var n=t.map(function(t){return t()}),r=!0,i=f();return t.forEach(function(t,o){t(function(t){n[o]=t,r||i(e.apply(null,n))})}),i(e.apply(null,n)),r=!1,i(function(){e.apply(null,n)}),i}function b(t,e,n){return h(t,function(t){return t?e:n},function(t){return t==e})}function w(){var t,e=[];return function(n){return r(n)?t:i(n)?t!==n?s(e,t=n):"":(e.push(n),n(t),function(){c(e,n)})}}var I=f;I.bind1=t,I.bind2=n,I.value=f,I.not=p,I.property=d,I.input=I.attribute=m,I.select=v,I.compute=C,I.transform=h,I.boolean=b,I.toggle=y,I.hover=function(t){return y(t,"mouseover","mouseout")},I.focus=function(t){return y(t,"focus","blur")},I.signal=w,"object"==typeof e?e.exports=I:window.observable=I}()},{}],81:[function(t,e,n){var r=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),a=r(t.slice(n+1));void 0===e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},{"for-each":67,trim:96}],82:[function(t,e,n){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i})},{}],83:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function s(){m&&p&&(m=!1,p.length?g=p.concat(g):v=-1,g.length&&c())}function c(){if(!m){var t=o(s);m=!0;for(var e=g.length;e;){for(p=g,g=[];++v<e;)p&&p[v].run();v=-1,e=g.length}p=null,m=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var f,d,h=e.exports={}
;!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(t){d=i}}();var p,g=[],m=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];g.push(new u(t,e)),1!==g.length||m||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],84:[function(t,e,n){"use strict";function r(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[o(e,t),"[",r,"]"].join(""):[o(e,t),"[",o(r,t),"]=",o(n,t)].join("")};case"bracket":return function(e,n){return null===n?o(e,t):[o(e,t),"[]=",o(n,t)].join("")};default:return function(e,n){return null===n?o(e,t):[o(e,t),"=",o(n,t)].join("")}}}function i(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(r[t]=n);void 0===r[t]&&(r[t]={}),r[t][e[1]]=n};case"bracket":return function(t,n,r){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===r[t]?void(r[t]=[n]):void(r[t]=[].concat(r[t],n)):void(r[t]=n)};default:return function(t,e,n){if(void 0===n[t])return void(n[t]=e);n[t]=[].concat(n[t],e)}}}function o(t,e){return e.encode?e.strict?s(t):encodeURIComponent(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var s=t("strict-uri-encode"),c=t("object-assign");n.extract=function(t){return t.split("?")[1]||""},n.parse=function(t,e){e=c({arrayFormat:"none"},e);var n=i(e),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(i),o,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=a(n):t[e]=n,t},Object.create(null))):r},n.stringify=function(t,e){e=c({encode:!0,strict:!0,arrayFormat:"none"},e);var n=r(e);return t?Object.keys(t).sort().map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return o(r,e);if(Array.isArray(i)){var a=[];return i.slice().forEach(function(t){void 0!==t&&a.push(n(r,t,a.length))}),a.join("&")}return o(r,e)+"="+o(i,e)}).filter(function(t){return t.length>0}).join("&"):""}},{"object-assign":79,"strict-uri-encode":90}],85:[function(t,e,n){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},r.splitSections=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},r.matchPrefix=function(t,e){return r.splitLines(t).filter(function(t){return 0===t.indexOf(e)})},r.parseCandidate=function(t){var e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");for(var n={foundation:e[0],component:e[1],protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],port:parseInt(e[5],10),type:e[7]},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":n.relatedAddress=e[r+1];break;case"rport":n.relatedPort=parseInt(e[r+1],10);break;case"tcptype":n.tcpType=e[r+1];break;default:n[e[r]]=e[r+1]}return n},r.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.ip),e.push(t.port);var n=t.type;return e.push("typ"),e.push(n),"host"!==n&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),"candidate:"+e.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var e=t.substr(9).split(" "),n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.numChannels=3===e.length?parseInt(e[2],10):1,n},r.writeRtpMap=function(t){var e=t.payloadType;return void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType),"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==t.numChannels?"/"+t.numChannels:"")+"\r\n"},r.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},r.parseFmtp=function(t){for(var e,n={},r=t.substr(t.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)e=r[i].trim().split("="),n[e[0].trim()]=e[1];return n},r.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var r=[];Object.keys(t.parameters).forEach(function(e){r.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return e},r.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(t){var e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(t){e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(t){var e=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,e-7),10)},r=t.indexOf(":",e);return r>-1?(n.attribute=t.substr(e+1,r-e-1),n.value=t.substr(r+1)):n.attribute=t.substr(e+1),n},r.getMid=function(t){var e=r.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},r.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:r.matchPrefix(t+e,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,e){var n="a=setup:"+e+"\r\n";return t.fingerprints.forEach(function(t){n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),n},r.getIceParameters=function(t,e){var n=r.splitLines(t);return n=n.concat(r.splitLines(e)),{usernameFragment:n.filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},r.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(t),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(t,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(t,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),e.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(t,"a=extmap:").forEach(function(t){e.headerExtensions.push(r.parseExtmap(t))}),e},r.writeRtpDescription=function(t,e){var n="";n+="m="+t+" ",n+=e.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=e.codecs.map(function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach(function(t){n+=r.writeRtpMap(t),n+=r.writeFmtp(t),n+=r.writeRtcpFb(t)});var i=0;return e.codecs.forEach(function(t){t.maxptime>i&&(i=t.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",e.headerExtensions.forEach(function(t){n+=r.writeExtmap(t)}),n},r.parseRtpEncodingParameters=function(t){var e,n=[],i=r.parseRtpParameters(t),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(e=u[0][1]),i.codecs.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10),rtx:{ssrc:e}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:e,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(t,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),n.forEach(function(t){t.maxBitrate=l})),n},r.parseRtcpParameters=function(t){var e={},n=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute})[0];n&&(e.cname=n.value,e.ssrc=n.ssrc);var i=r.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=i.length>0,e.compound=0===i.length;var o=r.matchPrefix(t,"a=rtcp-mux");return e.mux=o.length>0,e},r.parseMsid=function(t){var e,n=r.matchPrefix(t,"a=msid:");if(1===n.length)return e=n[0].substr(7).split(" "),{stream:e[0],track:e[1]};var i=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"msid"===t.attribute});return i.length>0?(e=i[0].value.split(" "),{stream:e[0],track:e[1]}):void 0},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(t,e,n,i){var o=r.writeRtpDescription(t.kind,e);if(o+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?o+="a=sendrecv\r\n":t.rtpSender?o+="a=sendonly\r\n":t.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.rtpSender){var a="msid:"+i.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+a,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(t,e){for(var n=r.splitLines(t),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return e?r.getDirection(e):"sendrecv"},r.getKind=function(t){return r.splitLines(t)[0].split(" ")[0].substr(2)},r.isRejected=function(t){return"0"===t.split(" ",2)[1]},e.exports=r},{}],86:[function(t,e,n){function r(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(t),r.removeAllRanges(),r.addRange(i),e=r.toString()}return e}e.exports=r},{}],87:[function(t,e,n){var r=t("cookie"),i=t("./lib/setter");e.exports=function(t,e,n){var o=r.serialize(t,e,n);i(o,n)}},{"./lib/setter":88,cookie:89}],88:[function(t,e,n){e.exports=function(t,e){document.cookie=t}},{}],89:[function(t,e,n){function r(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");var n={},r=e||{},i=t.split(/; */),s=r.decode||a;return i.forEach(function(t){var e=t.indexOf("=");if(!(e<0)){var r=t.substr(0,e).trim(),i=t.substr(++e,t.length).trim();'"'==i[0]&&(i=i.slice(1,-1)),void 0==n[r]&&(n[r]=o(i,s))}}),n}function i(t,e,n){var r=n||{},i=r.encode||s;if(!c.test(t))throw new TypeError("argument name is invalid");var o=i(e);if(o&&!c.test(o))throw new TypeError("argument val is invalid");var a=[t+"="+o];if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a.push("Max-Age="+u)}if(r.domain){if(!c.test(r.domain))throw new TypeError("option domain is invalid");a.push("Domain="+r.domain)}if(r.path){if(!c.test(r.path))throw new TypeError("option path is invalid");a.push("Path="+r.path)}return r.expires&&a.push("Expires="+r.expires.toUTCString()),r.httpOnly&&a.push("HttpOnly"),r.secure&&a.push("Secure"),a.join("; ")}function o(t,e){try{return e(t)}catch(e){return t}}n.parse=r,n.serialize=i;var a=decodeURIComponent,s=encodeURIComponent,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},{}],90:[function(t,e,n){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},{}],91:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define(function(){return r(t,t.document)}):"object"==typeof n?e.exports=t.document?r(t,t.document):function(t){return r(t,t.document)}:t.SVG=r(t,t.document)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e,n,r){return n+r.replace(C.regex.dots," .")}function r(t){for(var e=t.slice(0),n=e.length;n--;)Array.isArray(e[n])&&(e[n]=r(e[n]));return e}function i(t,e){return t instanceof e}function o(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function a(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function l(t,e,n){if(null==e||null==n){var r=t.bbox();null==e?e=r.width/r.height*n:null==n&&(n=r.height/r.width*e)}return{width:e,height:n}}function f(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function d(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function h(t){return t instanceof C.Matrix||(t=new C.Matrix(t)),t}function p(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function g(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}function m(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&m(e.childNodes[n]);return C.adopt(e).id(C.eid(e.nodeName))}function v(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function y(t){var e=t.toString().match(C.regex.reference);if(e)return e[1]}var C=this.SVG=function(t){if(C.supported)return t=new C.Doc(t),C.parser.draw||C.prepare(),t};if(C.ns="http://www.w3.org/2000/svg",C.xmlns="http://www.w3.org/2000/xmlns/",C.xlink="http://www.w3.org/1999/xlink",C.svgjs="http://svgjs.com/svgjs",C.supported=function(){return!!e.createElementNS&&!!e.createElementNS(C.ns,"svg").createSVGRect}(),!C.supported)return!1;C.did=1e3,C.eid=function(t){return"Svgjs"+s(t)+C.did++},C.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},C.extend=function(){var t,e,n,r;for(t=[].slice.call(arguments),e=t.pop(),r=t.length-1;r>=0;r--)if(t[r])for(n in e)t[r].prototype[n]=e[n];C.Set&&C.Set.inherit&&C.Set.inherit()},C.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,C.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&C.extend(e,t.extend),t.construct&&C.extend(t.parent||C.Container,t.construct),e},C.adopt=function(e){if(!e)return null;if(e.instance)return e.instance;var n;return n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new C.Nested:new C.Doc:"linearGradient"==e.nodeName?new C.Gradient("linear"):"radialGradient"==e.nodeName?new C.Gradient("radial"):C[s(e.nodeName)]?new(C[s(e.nodeName)]):new C.Element(e),n.type=e.nodeName,n.node=e,e.instance=n,n instanceof C.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n},C.prepare=function(){var t=e.getElementsByTagName("body")[0],n=(t?new C.Doc(t):C.adopt(e.documentElement).nested()).size(2,0);C.parser={body:t||e.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:n.polyline().node,path:n.path().node,native:C.create("svg")}},C.parser={native:C.create("svg")},e.addEventListener("DOMContentLoaded",function(){C.parser.draw||C.prepare()},!1),C.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},C.utils={map:function(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)i.push(e(t[n]));return i},filter:function(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)e(t[n])&&i.push(t[n]);return i},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},C.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},C.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?C.regex.isRgb.test(t)?(e=C.regex.rgb.exec(t.replace(C.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):C.regex.isHex.test(t)&&(e=C.regex.hex.exec(c(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},C.extend(C.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new C.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new C.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),C.Color.test=function(t){return t+="",C.regex.isHex.test(t)||C.regex.isRgb.test(t)},C.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},C.Color.isColor=function(t){return C.Color.isRgb(t)||C.Color.test(t)},C.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},C.extend(C.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.indexOf(this.value[t])==-1&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new C.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(C.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=r(this.value),t}}),C.PointArray=function(t,e){C.Array.call(this,t,e||[[0,0]])},C.PointArray.prototype=new C.Array,C.PointArray.prototype.constructor=C.PointArray,C.extend(C.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new C.PointArray(r)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t}else t=t.trim().split(C.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,r=t.length;n<r;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.value.length-1;r>=0;r--)this.value[r]=[this.value[r][0]+t,this.value[r][1]+e];return this},size:function(t,e){var n,r=this.bbox();for(n=this.value.length-1;n>=0;n--)r.width&&(this.value[n][0]=(this.value[n][0]-r.x)*t/r.width+r.x),r.height&&(this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y);return this},bbox:function(){return C.parser.poly.setAttribute("points",this.toString()),C.parser.poly.getBBox()}});for(var b={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},w="mlhvqtcsaz".split(""),I=0,A=w.length;I<A;++I)b[w[I]]=function(t){return function(e,n,r){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var i=0,o=e.length;i<o;++i)e[i]=e[i]+(i%2?n.y:n.x);return b[t](e,n,r)}}(w[I].toUpperCase());C.PathArray=function(t,e){C.Array.call(this,t,e||[["M",0,0]])},C.PathArray.prototype=new C.Array,C.PathArray.prototype.constructor=C.PathArray,C.extend(C.PathArray,{toString:function(){return g(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.value.length-1;i>=0;i--)r=this.value[i][0],"M"==r||"L"==r||"T"==r?(this.value[i][1]+=t,this.value[i][2]+=e):"H"==r?this.value[i][1]+=t:"V"==r?this.value[i][1]+=e:"C"==r||"S"==r||"Q"==r?(this.value[i][1]+=t,this.value[i][2]+=e,this.value[i][3]+=t,this.value[i][4]+=e,"C"==r&&(this.value[i][5]+=t,this.value[i][6]+=e)):"A"==r&&(this.value[i][6]+=t,this.value[i][7]+=e);return this},size:function(t,e){var n,r,i=this.bbox();for(n=this.value.length-1;n>=0;n--)r=this.value[n][0],"M"==r||"L"==r||"T"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y):"H"==r?this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x:"V"==r?this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y:"C"==r||"S"==r||"Q"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y,this.value[n][3]=(this.value[n][3]-i.x)*t/i.width+i.x,this.value[n][4]=(this.value[n][4]-i.y)*e/i.height+i.y,"C"==r&&(this.value[n][5]=(this.value[n][5]-i.x)*t/i.width+i.x,this.value[n][6]=(this.value[n][6]-i.y)*e/i.height+i.y)):"A"==r&&(this.value[n][1]=this.value[n][1]*t/i.width,this.value[n][2]=this.value[n][2]*e/i.height,this.value[n][6]=(this.value[n][6]-i.x)*t/i.width+i.x,this.value[n][7]=(this.value[n][7]-i.y)*e/i.height+i.y);return this},equalCommands:function(t){var e,n,r;for(t=new C.PathArray(t),r=this.value.length===t.value.length,e=0,n=this.value.length;r&&e<n;e++)r=this.value[e][0]===t.value[e][0];return r},morph:function(t){return t=new C.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,r,i,o=this.value,a=this.destination.value,s=[],c=new C.PathArray;for(e=0,n=o.length;e<n;e++){for(s[e]=[o[e][0]],r=1,i=o[e].length;r<i;r++)s[e][r]=o[e][r]+(a[e][r]-o[e][r])*t;"A"===s[e][0]&&(s[e][4]=+(0!=s[e][4]),s[e][5]=+(0!=s[e][5]))}return c.value=s,c},parse:function(t){if(t instanceof C.PathArray)return t.valueOf();var e,r,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(C.regex.numbersWithDots,n).replace(C.regex.pathLetters," $& ").replace(C.regex.hyphen,"$1 -").trim().split(C.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var r=[],o=new C.Point,a=new C.Point,s=0,c=t.length;do{C.regex.isPathLetter.test(t[s])?(e=t[s],++s):"M"==e?e="L":"m"==e&&(e="l"),r.push(b[e].call(null,t.slice(s,s+=i[e.toUpperCase()]).map(parseFloat),o,a))}while(c>s);return r},bbox:function(){return C.parser.path.setAttribute("d",this.toString()),C.parser.path.getBBox()}}),C.Number=C.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(C.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof C.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new C.Number(t),new C.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new C.Number(t),new C.Number(this-t,this.unit||t.unit)},times:function(t){return t=new C.Number(t),new C.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new C.Number(t),new C.Number(this/t,this.unit||t.unit)},to:function(t){var e=new C.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new C.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new C.Number(this.destination).minus(this).times(t).plus(this):this}}}),C.Element=C.invent({create:function(t){this._stroke=C.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=l(this,t,e);return this.width(new C.Number(n.width)).height(new C.Number(n.height))},clone:function(t,e){this.writeDataToDom();var n=m(this.node.cloneNode(!0));return t?t.add(n):this.after(n),n},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(C.regex.delimiter)},hasClass:function(t){return this.classes().indexOf(t)!=-1},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return C.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=C.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;if("#document"==n.node.parentNode.nodeName)return null;n=C.adopt(n.node.parentNode)}},doc:function(){return this instanceof C.Doc?this:this.parent(C.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return o(this.node,t)},native:function(){return this.node},svg:function(t){var n=e.createElement("svg");if(!(t&&this instanceof C.Parent))return n.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,i=n.firstChild.childNodes.length;r<i;r++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){(this.each?this:this.lines()).each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return i(this,t)}}}),C.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},C.morph=function(t){return function(e,n){return new C.MorphObj(e,n).at(t)}},C.Situation=C.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new C.Number(t.duration).valueOf(),this.delay=new C.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),C.FX=C.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"==typeof t&&(e=t.ease,n=t.delay,t=t.duration);var r=new C.Situation({duration:t||1e3,delay:n||0,ease:C.easing[e||"-"]||e});return this.queue(r),this},delay:function(t){var e=new C.Situation({duration:t,delay:0,ease:C.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof C.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){
this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof C.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof C.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n,r=this.situation;if(r.init)return this;for(t in r.animations)for(n=this.target()[t](),Array.isArray(n)||(n=[n]),Array.isArray(r.animations[t])||(r.animations[t]=[r.animations[t]]),e=n.length;e--;)r.animations[t][e]instanceof C.Number&&(n[e]=new C.Number(n[e])),r.animations[t][e]=n[e].morph(r.animations[t][e]);for(t in r.attrs)r.attrs[t]=new C.MorphObj(this.target().attr(t),r.attrs[t]);for(t in r.styles)r.styles[t]=new C.MorphObj(this.target().style(t),r.styles[t]);return r.initialTransformation=this.target().matrixify(),r.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last(),n=function n(r){r.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))};return this.target().on("finished.fx",n),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,C.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after(function(){this.off("during.fx",n)}),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,C.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){if(t||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var e,n,r;e=Math.max(this.absPos,0),n=Math.floor(e),this.situation.loops===!0||n<this.situation.loops?(this.pos=e-n,r=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,r=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-r)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var i=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=i&&(this.situation.once[o].call(this.target(),this.pos,i),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:i,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=i,this):this},eachAt:function(){var t,e,n,r=this,i=this.target(),o=this.situation;for(t in o.animations)n=[].concat(o.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t}),i[t].apply(i,n);for(t in o.attrs)n=[t].concat(o.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t}),i.attr.apply(i,n);for(t in o.styles)n=[t].concat(o.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t}),i.style.apply(i,n);if(o.transforms.length){for(n=o.initialTransformation,t=0,e=o.transforms.length;t<e;t++){var a=o.transforms[t];a instanceof C.Matrix?n=a.relative?n.multiply((new C.Matrix).morph(a).at(o.ease(this.pos))):n.morph(a).at(o.ease(this.pos)):(a.relative||a.undo(n.extract()),n=n.multiply(a.at(o.ease(this.pos))))}i.matrix(n)}return this},once:function(t,e,n){var r=this.last();return n||(t=r.ease(t)),r.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:C.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new C.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new C.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),C.MorphObj=C.invent({create:function(t,e){return C.Color.isColor(e)?new C.Color(t).morph(e):C.regex.delimiter.test(t)?new C.Array(t).morph(e):C.regex.numberAndUnit.test(e)?new C.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),C.extend(C.FX,{attr:function(t,e,n){if("object"==typeof t)for(var r in t)this.attr(r,t[r]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof C.G)return this.transform({x:t},e),this;var n=new C.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof C.G)return this.transform({y:t},e),this;var n=new C.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new C.Number(t))},cy:function(t){return this.add("cy",new C.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target()instanceof C.Text)this.attr("font-size",t);else{var n;t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new C.Number(t)).add("height",new C.Number(e))}return this},width:function(t){return this.add("width",new C.Number(t))},height:function(t){return this.add("height",new C.Number(t))},plot:function(t,e,n,r){return 4==arguments.length?this.plot([t,e,n,r]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new C.Number(t)):this},viewbox:function(t,e,n,r){return this.target()instanceof C.Container&&this.add("viewbox",new C.ViewBox(t,e,n,r)),this},update:function(t){if(this.target()instanceof C.Stop){if("number"==typeof t||t instanceof C.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),C.Box=C.invent({create:function(t,e,n,r){if(!("object"!=typeof t||t instanceof C.Element))return C.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=r),v(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,v(e)},transform:function(t){var e,n=1/0,r=-(1/0),i=1/0,o=-(1/0);return[new C.Point(this.x,this.y),new C.Point(this.x2,this.y),new C.Point(this.x,this.y2),new C.Point(this.x2,this.y2)].forEach(function(e){e=e.transform(t),n=Math.min(n,e.x),r=Math.max(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.y)}),e=new this.constructor,e.x=n,e.width=r-n,e.y=i,e.height=o-i,v(e),e}}}),C.BBox=C.invent({create:function(t){if(C.Box.apply(this,[].slice.call(arguments)),t instanceof C.Element){var n;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=e)throw new Exception("Element not in the dom")}n=t.node.getBBox()}catch(e){if(t instanceof C.Shape){var i=t.clone(C.parser.draw.instance).show();n=i.node.getBBox(),i.remove()}else n={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}C.Box.call(this,n)}},inherit:C.Box,parent:C.Element,construct:{bbox:function(){return new C.BBox(this)}}}),C.BBox.prototype.constructor=C.BBox,C.extend(C.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),C.RBox=C.invent({create:function(t){C.Box.apply(this,[].slice.call(arguments)),t instanceof C.Element&&C.Box.call(this,t.node.getBoundingClientRect())},inherit:C.Box,parent:C.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new C.RBox(this).transform(t.screenCTM().inverse()):new C.RBox(this).addOffset()}}}),C.RBox.prototype.constructor=C.RBox,C.Matrix=C.invent({create:function(t){var e,n=d([1,0,0,1,0,0]);for(t=t instanceof C.Element?t.matrixify():"string"==typeof t?d(t.split(C.regex.delimiter).map(parseFloat)):6==arguments.length?d([].slice.call(arguments)):Array.isArray(t)?d(t):"object"==typeof t?t:n,e=x.length-1;e>=0;--e)this[x[e]]=null!=t[x[e]]?t[x[e]]:n[x[e]]},extend:{extract:function(){var t=f(this,0,1),e=f(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new C.Matrix(this)}},clone:function(){return new C.Matrix(this)},morph:function(t){return this.destination=new C.Matrix(t),this},at:function(t){return this.destination?new C.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new C.Matrix(this.native().multiply(h(t).native()))},inverse:function(){return new C.Matrix(this.native().inverse())},translate:function(t,e){return new C.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,n,r){return 1==arguments.length?e=t:3==arguments.length&&(r=n,n=e,e=t),this.around(n,r,new C.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=C.utils.radians(t),this.around(e,n,new C.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,n,r){return 1==arguments.length?e=t:3==arguments.length&&(r=n,n=e,e=t),t=C.utils.radians(t),e=C.utils.radians(e),this.around(n,r,new C.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,n){return this.multiply(new C.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new C.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=C.parser.native.createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:C.Element,construct:{ctm:function(){return new C.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof C.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new C.Matrix(e)}return new C.Matrix(this.node.getScreenCTM())}}}),C.Point=C.invent({create:function(t,e){var n,r={x:0,y:0};n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:r,this.x=n.x,this.y=n.y},extend:{clone:function(){return new C.Point(this)},morph:function(t,e){return this.destination=new C.Point(t,e),this},at:function(t){return this.destination?new C.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=C.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new C.Point(this.native().matrixTransform(t.native()))}}}),C.extend(C.Element,{point:function(t,e){return new C.Point(t,e).transform(this.screenCTM().inverse())}}),C.extend(C.Element,{attr:function(t,e,n){if(null==t){for(t={},e=this.node.attributes,n=e.length-1;n>=0;n--)t[e[n].nodeName]=C.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return e=this.node.getAttribute(t),null==e?C.defaults.attrs[t]:C.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(C.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof C.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new C.Number(e):C.Color.isColor(e)?e=new C.Color(e):Array.isArray(e)&&(e=new C.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),C.extend(C.Element,{transform:function(t,e){var n,r,i=this;if("object"!=typeof t)return n=new C.Matrix(i).extract(),"string"==typeof t?n[t]:n;if(n=new C.Matrix(i),e=!!e||!!t.relative,null!=t.a)n=e?n.multiply(new C.Matrix(t)):new C.Matrix(t);else if(null!=t.rotation)p(t,i),n=e?n.rotate(t.rotation,t.cx,t.cy):n.rotate(t.rotation-n.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(p(t,i),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var o=n.extract();t.scaleX=1*t.scaleX/o.scaleX,t.scaleY=1*t.scaleY/o.scaleY}n=n.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(p(t,i),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var o=n.extract();n=n.multiply((new C.Matrix).skew(o.skewX,o.skewY,t.cx,t.cy).inverse())}n=n.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?i.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=i.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,n=(new C.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?n=n.translate(t.x,t.y):(null!=t.x&&(n.e=t.x),null!=t.y&&(n.f=t.y)));return this.attr("transform",n)}}),C.extend(C.FX,{transform:function(t,e){var n,r,i=this.target();return"object"!=typeof t?(n=new C.Matrix(i).extract(),"string"==typeof t?n[t]:n):(e=!!e||!!t.relative,null!=t.a?n=new C.Matrix(t):null!=t.rotation?(p(t,i),n=new C.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(p(t,i),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,n=new C.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(p(t,i),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,n=new C.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?i.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=i.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,n=(new C.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(n=new C.Translate(t.x,t.y)),n?(n.relative=e,this.last().transforms.push(n),this._callStart()):this)}}),C.extend(C.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(C.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(C.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(d(e[1])):t[e[0]].apply(t,e[1])},new C.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),C.Transformation=C.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,e===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,r=this.arguments.length;n<r;++n)e.push(this[this.arguments[n]]);var i=this._undo||new C.Matrix;return i=(new C.Matrix).morph(C.Matrix.prototype[this.method].apply(i,e)).at(t),this.inversed?i.inverse():i},undo:function(t){for(var e=0,n=this.arguments.length;e<n;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(C[s(this.method)])(t,!0).at(1),this}}}),C.Translate=C.invent({parent:C.Matrix,inherit:C.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),C.Rotate=C.invent({parent:C.Matrix,inherit:C.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new C.Matrix).rotate((new C.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),C.Scale=C.invent({parent:C.Matrix,inherit:C.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),C.Skew=C.invent({parent:C.Matrix,inherit:C.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),C.extend(C.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!C.regex.isCss.test(t))return this.node.style[a(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[a(t)]=null===e||C.regex.isBlank.test(e)?"":e;return this}}),C.Parent=C.invent({create:function(t){this.constructor.call(this,t)},inherit:C.Element,extend:{children:function(){return C.utils.map(C.utils.filterSVGElements(this.node.childNodes),function(t){return C.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return C.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)i[n]instanceof C.Element&&t.apply(i[n],[n,i]),e&&i[n]instanceof C.Container&&i[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),C.extend(C.Parent,{ungroup:function(t,e){return 0===e||this instanceof C.Defs||this.node==C.parser.draw?this:(t=t||(this instanceof C.Doc?this:this.parent(C.Parent)),e=e||1/0,this.each(function(){return this instanceof C.Defs?this:this instanceof C.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),C.Container=C.invent({create:function(t){this.constructor.call(this,t)},inherit:C.Parent}),C.ViewBox=C.invent({create:function(t){var e,n,r,i,o,a,s,c=[0,0,0,0],u=1,l=1,f=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof C.Element){for(a=t,s=t,o=(t.attr("viewBox")||"").match(f),t.bbox,r=new C.Number(t.width()),i=new C.Number(t.height());"%"==r.unit;)u*=r.value,r=new C.Number(a instanceof C.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==i.unit;)l*=i.value,i=new C.Number(s instanceof C.Doc?s.parent().offsetHeight:s.parent().height()),s=s.parent();this.x=0,this.y=0,this.width=r*u,this.height=i*l,this.zoom=1,o&&(e=parseFloat(o[0]),n=parseFloat(o[1]),r=parseFloat(o[2]),i=parseFloat(o[3]),this.zoom=this.width/this.height>r/i?this.height/i:this.width/r,this.x=e,this.y=n,this.width=r,this.height=i)}else t="string"==typeof t?t.match(f).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):c,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,r){return this.destination=new C.ViewBox(t,e,n,r),this},at:function(t){return this.destination?new C.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:C.Container,construct:{viewbox:function(t,e,n,r){return 0==arguments.length?new C.ViewBox(this):this.attr("viewBox",new C.ViewBox(t,e,n,r))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){C.Element.prototype[t]=function(e){return C.on(this.node,t,e),this}}),C.listeners=[],C.handlerMap=[],C.listenerId=0,C.on=function(t,e,n,r,i){var o=n.bind(r||t.instance||t),a=(C.handlerMap.indexOf(t)+1||C.handlerMap.push(t))-1,s=e.split(".")[0],c=e.split(".")[1]||"*";C.listeners[a]=C.listeners[a]||{},C.listeners[a][s]=C.listeners[a][s]||{},C.listeners[a][s][c]=C.listeners[a][s][c]||{},n._svgjsListenerId||(n._svgjsListenerId=++C.listenerId),C.listeners[a][s][c][n._svgjsListenerId]=o,t.addEventListener(s,o,i||!1)},C.off=function(t,e,n){var r=C.handlerMap.indexOf(t),i=e&&e.split(".")[0],o=e&&e.split(".")[1],a="";if(r!=-1)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;C.listeners[r][i]&&C.listeners[r][i][o||"*"]&&(t.removeEventListener(i,C.listeners[r][i][o||"*"][n],!1),delete C.listeners[r][i][o||"*"][n])}else if(o&&i){if(C.listeners[r][i]&&C.listeners[r][i][o]){for(n in C.listeners[r][i][o])C.off(t,[i,o].join("."),n);delete C.listeners[r][i][o]}}else if(o)for(e in C.listeners[r])for(a in C.listeners[r][e])o===a&&C.off(t,[e,o].join("."));else if(i){if(C.listeners[r][i]){for(a in C.listeners[r][i])C.off(t,[i,a].join("."));delete C.listeners[r][i]}}else{for(e in C.listeners[r])C.off(t,e);delete C.listeners[r],delete C.handlerMap[r]}},C.extend(C.Element,{on:function(t,e,n,r){return C.on(this.node,t,e,n,r),this},off:function(t,e){return C.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new t.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),C.Defs=C.invent({create:"defs",inherit:C.Container}),C.G=C.invent({create:"g",inherit:C.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new C.G)}}}),C.extend(C.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof C.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof C.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),C.Mask=C.invent({create:function(){this.constructor.call(this,C.create("mask")),this.targets=[]},inherit:C.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new C.Mask)}}}),C.extend(C.Element,{maskWith:function(t){return this.masker=t instanceof C.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),C.ClipPath=C.invent({create:function(){this.constructor.call(this,C.create("clipPath")),this.targets=[]},inherit:C.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new C.ClipPath)}}}),C.extend(C.Element,{clipWith:function(t){return this.clipper=t instanceof C.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),C.Gradient=C.invent({create:function(t){this.constructor.call(this,C.create(t+"Gradient")),this.type=t},inherit:C.Container,extend:{at:function(t,e,n){return this.put(new C.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),C.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),C.extend(C.Gradient,C.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new C.Number(t),fy:new C.Number(e)}):this.attr({x1:new C.Number(t),y1:new C.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new C.Number(t),cy:new C.Number(e)}):this.attr({x2:new C.Number(t),y2:new C.Number(e)})}}),C.extend(C.Defs,{gradient:function(t,e){return this.put(new C.Gradient(t)).update(e)}}),C.Stop=C.invent({create:"stop",inherit:C.Element,extend:{update:function(t){return("number"==typeof t||t instanceof C.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new C.Number(t.offset)),this}}}),C.Pattern=C.invent({create:"pattern",inherit:C.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),C.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),C.extend(C.Defs,{pattern:function(t,e,n){return this.put(new C.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),C.Doc=C.invent({create:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,"svg"==t.nodeName?this.constructor.call(this,t):(this.constructor.call(this,C.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:C.Container,extend:{namespace:function(){return this.attr({xmlns:C.ns,version:"1.1"}).attr("xmlns:xlink",C.xlink,C.xmlns).attr("xmlns:svgjs",C.svgjs,C.xmlns)},defs:function(){if(!this._defs){var t;(t=this.node.getElementsByTagName("defs")[0])?this._defs=C.adopt(t):this._defs=new C.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,C.parser.draw.parentNode||this.node.appendChild(C.parser.draw),this}}}),C.Shape=C.invent({create:function(t){this.constructor.call(this,t)},inherit:C.Element}),C.Bare=C.invent({create:function(t,e){if(this.constructor.call(this,C.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:C.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),C.extend(C.Parent,{element:function(t,e){
return this.put(new C.Bare(t,e))}}),C.Symbol=C.invent({create:"symbol",inherit:C.Container,construct:{symbol:function(){return this.put(new C.Symbol)}}}),C.Use=C.invent({create:"use",inherit:C.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,C.xlink)}},construct:{use:function(t,e){return this.put(new C.Use).element(t,e)}}}),C.Rect=C.invent({create:"rect",inherit:C.Shape,construct:{rect:function(t,e){return this.put(new C.Rect).size(t,e)}}}),C.Circle=C.invent({create:"circle",inherit:C.Shape,construct:{circle:function(t){return this.put(new C.Circle).rx(new C.Number(t).divide(2)).move(0,0)}}}),C.extend(C.Circle,C.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),C.Ellipse=C.invent({create:"ellipse",inherit:C.Shape,construct:{ellipse:function(t,e){return this.put(new C.Ellipse).size(t,e).move(0,0)}}}),C.extend(C.Ellipse,C.Rect,C.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),C.extend(C.Circle,C.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new C.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new C.Number(t).divide(2))},size:function(t,e){var n=l(this,t,e);return this.rx(new C.Number(n.width).divide(2)).ry(new C.Number(n.height).divide(2))}}),C.Line=C.invent({create:"line",inherit:C.Shape,extend:{array:function(){return new C.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new C.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=l(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,r){return C.Line.prototype.plot.apply(this.put(new C.Line),null!=t?[t,e,n,r]:[0,0,0,0])}}}),C.Polyline=C.invent({create:"polyline",inherit:C.Shape,construct:{polyline:function(t){return this.put(new C.Polyline).plot(t||new C.PointArray)}}}),C.Polygon=C.invent({create:"polygon",inherit:C.Shape,construct:{polygon:function(t){return this.put(new C.Polygon).plot(t||new C.PointArray)}}}),C.extend(C.Polyline,C.Polygon,{array:function(){return this._array||(this._array=new C.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new C.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=l(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),C.extend(C.Line,C.Polyline,C.Polygon,{morphArray:C.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),C.Path=C.invent({create:"path",inherit:C.Shape,extend:{morphArray:C.PathArray,array:function(){return this._array||(this._array=new C.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new C.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=l(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new C.Path).plot(t||new C.PathArray)}}}),C.Image=C.invent({create:"image",inherit:C.Shape,extend:{load:function(e){if(!e)return this;var n=this,r=new t.Image;return C.on(r,"load",function(){var t=n.parent(C.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(r.width,r.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:r.width,height:r.height,ratio:r.width/r.height,url:e}))}),C.on(r,"error",function(t){"function"==typeof n._error&&n._error.call(n,t)}),this.attr("href",r.src=this.src=e,C.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new C.Image).load(t).size(e||0,n||e||0)}}}),C.Text=C.invent({create:function(){this.constructor.call(this,C.create("text")),this.dom.leading=new C.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",C.defaults.attrs["font-family"])},inherit:C.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){for(var t="",e=this.node.childNodes,n=0,r=e.length;n<r;++n)0!=n&&3!=e[n].nodeType&&1==C.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{t=t.split("\n");for(var n=0,i=t.length;n<i;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new C.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=C.utils.map(C.utils.filterSVGElements(t.childNodes),function(t){return C.adopt(t)});return new C.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading*new C.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=r:(this.attr("dy",r+n),n=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new C.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new C.Text).text(t)},plain:function(t){return this.put(new C.Text).plain(t)}}}),C.Tspan=C.invent({create:"tspan",inherit:C.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(C.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),C.extend(C.Text,C.Tspan,{plain:function(t){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new C.Tspan;return this._build===!1&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),C.TextPath=C.invent({create:"textPath",inherit:C.Parent,parent:C.Text,construct:{morphArray:C.PathArray,path:function(t){for(var e=new C.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,C.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return C.adopt(this.node.firstChild)}}}),C.Nested=C.invent({create:function(){this.constructor.call(this,C.create("svg")),this.style("overflow","visible")},inherit:C.Container,construct:{nested:function(){return this.put(new C.Nested)}}}),C.A=C.invent({create:"a",inherit:C.Container,extend:{to:function(t){return this.attr("href",t,C.xlink)},show:function(t){return this.attr("show",t,C.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new C.A).to(t)}}}),C.extend(C.Element,{linkTo:function(t){var e=new C.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),C.Marker=C.invent({create:"marker",inherit:C.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),C.extend(C.Defs,{marker:function(t,e,n){return this.put(new C.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),C.extend(C.Line,C.Polyline,C.Polygon,C.Path,{marker:function(t,e,n,r){var i=["marker"];return"all"!=t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof C.Marker?arguments[1]:this.doc().marker(e,n,r),this.attr(i,t)}});var _={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if(void 0===n)return this;if("string"==typeof n||C.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=_[t].length-1;e>=0;e--)null!=n[_[t][e]]&&this.attr(_.prefix(t,_[t][e]),n[_[t][e]]);return this},C.extend(C.Element,C.FX,n)}),C.extend(C.Element,C.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,r){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:r})},scale:function(t,e,n,r){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:r})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new C.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new C.Number(t).plus(this instanceof C.FX?0:this.x()),!0)},dy:function(t){return this.y(new C.Number(t).plus(this instanceof C.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),C.extend(C.Rect,C.Ellipse,C.Circle,C.Gradient,C.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new C.Number(t)):this.rx(t).ry(null==e?t:e)}}),C.extend(C.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),C.extend(C.Parent,C.Text,C.Tspan,C.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),C.Set=C.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new C.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new C.Set(t)}}}),C.FX.Set=C.invent({create:function(t){this.set=t}}),C.Set.inherit=function(){var t,e=[];for(var t in C.Shape.prototype)"function"==typeof C.Shape.prototype[t]&&"function"!=typeof C.Set.prototype[t]&&e.push(t);e.forEach(function(t){C.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new C.FX.Set(this)):this}}),e=[];for(var t in C.FX.prototype)"function"==typeof C.FX.prototype[t]&&"function"!=typeof C.FX.Set.prototype[t]&&e.push(t);e.forEach(function(t){C.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},C.extend(C.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:n===!0||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),C.extend(C.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),C.get=function(t){var n=e.getElementById(y(t)||t);return C.adopt(n)},C.select=function(t,n){return new C.Set(C.utils.map((n||e).querySelectorAll(t),function(t){return C.adopt(t)}))},C.extend(C.Parent,{select:function(t){return C.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof t.CustomEvent){var O=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=e.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r};O.prototype=t.Event.prototype,t.CustomEvent=O}return function(e){for(var n=0,r=["moz","webkit"],i=0;i<r.length&&!t.requestAnimationFrame;++i)e.requestAnimationFrame=e[r[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),C})},{}],92:[function(t,e,n){function r(t,e){return t.ctrlKey==(e.ctrlKey||!1)&&t.altKey==(e.altKey||!1)&&t.shiftKey==(e.shiftKey||!1)&&t.metaKey==(e.metaKey||!1)&&t.keyCode==(e.keyCode||0)&&t.charCode==(e.charCode||0)||(t=document.createEvent("Event"),t.initEvent(e.type,e.bubbles,e.cancelable),t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.keyCode=e.keyCode||0,t.charCode=e.charCode||0),t}var i=(window,document||{}),o=(i.documentElement,!0);try{i.createEvent("KeyEvents")}catch(t){o=!1}var a=function(t,e){e=e||{};var n=l(t),a=n;"KeyboardEvent"===n&&o&&(n="KeyEvents",a="KeyEvent");var s=i.createEvent(n),u="init"+a,f="function"==typeof s[u]?u:"initEvent",d=c[f],h=[],p={};e.type=t;for(var g=0;g<d.length;++g){var m=d[g],v=e[m];void 0===v&&(v=s[m]),p[m]=!0,h.push(v)}s[f].apply(s,h),"KeyboardEvent"===n&&(s=r(s,e));for(var m in e)p[m]||(s[m]=e[m]);return s},s=function(t,e){e=e||{};var n=i.createEventObject();n.type=t;for(var r in e)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports=i.createEvent?a:s;var c=t("./init.json"),u=t("./types.json"),l=function(){var t={};for(var e in u)for(var n=u[e],r=0;r<n.length;r++)t[n[r]]=e;return function(e){return t[e]||"Event"}}()},{"./init.json":93,"./types.json":94}],93:[function(t,e,n){e.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],94:[function(t,e,n){e.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],95:[function(t,e,n){function r(){}r.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function r(){i.off(t,r),e.apply(n,arguments)}var i=this;return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},e.exports=r},{}],96:[function(t,e,n){function r(t){return t.replace(/^\s*|\s*$/g,"")}n=e.exports=r,n.left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],97:[function(t,e,n){"use strict";n.prepUrl=function(t,e){function n(t,n){if(""===e[n])return t;var r=t.indexOf("?")===-1?"?":"&",i=encodeURIComponent(n);return n=":"+encodeURIComponent(n),t+r+i+"="+n}if(!t)throw new Error("No url provided.");if(!e)return t;for(var r in e)if(e[r]instanceof Array)for(var i=0;i<e[r].length;i++)t=n(t,r);else t.indexOf(":"+r)===-1&&(t=n(t,r));return t},n.tokenise=function(t,e,r){function i(t,e,n){var r=new RegExp(":"+encodeURIComponent(e));return t.replace(r,encodeURI(n))}r&&(t=n.prepUrl(t,e));for(var o in e)if(e[o]instanceof Array)for(var a in e[o])t=i(t,o,e[o][a]);else t=i(t,o,e[o]);return t}},{}],98:[function(t,e,n){var r=t("./v1"),i=t("./v4"),o=i;o.v1=r,o.v4=i,e.exports=o},{"./v1":101,"./v4":102}],99:[function(t,e,n){function r(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);e.exports=r},{}],100:[function(t,e,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],101:[function(t,e,n){function r(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var a=void 0!==t.clockseq?t.clockseq:c,f=void 0!==t.msecs?t.msecs:(new Date).getTime(),d=void 0!==t.nsecs?t.nsecs:l+1,h=f-u+(d-l)/1e4;if(h<0&&void 0===t.clockseq&&(a=a+1&16383),(h<0||f>u)&&void 0===t.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,l=d,c=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var g=f/4294967296*1e4&268435455;i[r++]=g>>>8&255,i[r++]=255&g,i[r++]=g>>>24&15|16,i[r++]=g>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=t.node||s,v=0;v<6;++v)i[r+v]=m[v];return e?e:o(i)}var i=t("./lib/rng"),o=t("./lib/bytesToUuid"),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],c=16383&(a[6]<<8|a[7]),u=0,l=0;e.exports=r},{"./lib/bytesToUuid":99,"./lib/rng":100}],102:[function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var a=t.random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[r+s]=a[s];return e||o(a)}var i=t("./lib/rng"),o=t("./lib/bytesToUuid");e.exports=r},{"./lib/bytesToUuid":99,"./lib/rng":100}],103:[function(t,e,n){"use strict";!function(){var n=t("./utils").log,r=t("./utils").browserDetails;e.exports.browserDetails=r,e.exports.extractVersion=t("./utils").extractVersion,e.exports.disableLog=t("./utils").disableLog;var i=t("./chrome/chrome_shim")||null,o=t("./edge/edge_shim")||null,a=t("./firefox/firefox_shim")||null,s=t("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),e.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":104,"./edge/edge_shim":106,"./firefox/firefox_shim":108,"./safari/safari_shim":110,"./utils":111}],104:[function(t,e,n){"use strict";var r=t("../utils.js").log,i=t("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){var e=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=t),this.addEventListener("addstream",this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[t.stream],e.dispatchEvent(r)}),t.stream.getTracks().forEach(function(e){var n=new Event("track");n.track=e,n.receiver={track:e},n.streams=[t.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(t){var e=this;if(this._srcObject=t,this.src&&URL.revokeObjectURL(this.src),!t)return void(this.src="");this.src=URL.createObjectURL(t),t.addEventListener("addtrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)}),t.addEventListener("removetrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)})}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(t,e){r("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy);var n=new webkitRTCPeerConnection(t,e),i=n.getStats.bind(n);return n.getStats=function(t,e,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof t)return i(t,e);var a=function(t){var e={};return t.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),e[n.id]=n}),e},s=function(t,e){var n=new Map(Object.keys(t).map(function(e){return[e,t[e]]}));return e=e||t,Object.keys(e).forEach(function(t){n[t]=e[t]}),n};if(arguments.length>=2){var c=function(t){o[1](s(a(t)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(e,n){1===o.length&&"object"==typeof t?i.apply(r,[function(t){e(s(a(t)))},n]):i.apply(r,[function(t){e(s(a(t),t.result()))},n])}).then(e,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(t){var e=webkitRTCPeerConnection.prototype[t];webkitRTCPeerConnection.prototype[t]=function(){var t=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){e.apply(t,[r,i,n])})}return e.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=webkitRTCPeerConnection.prototype[t];webkitRTCPeerConnection.prototype[t]=function(){var t=arguments,n=this,r=new Promise(function(r,i){e.apply(n,[t[0],r,i])});return t.length<2?r:r.then(function(){t[1].apply(null,[])},function(e){t.length>=3&&t[2].apply(null,[e])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=webkitRTCPeerConnection.prototype[t];webkitRTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:t("./getusermedia")}},{"../utils.js":111,"./getusermedia":105}],105:[function(t,e,n){"use strict";var r=t("../utils.js").log;e.exports=function(){var t=function(t){if("object"!=typeof t||t.mandatory||t.optional)return t;var e={};return Object.keys(t).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof t[n]?t[n]:{ideal:t[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==r.ideal){e.optional=e.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,e.optional.push(o),o={},o[i("max",n)]=r.ideal,e.optional.push(o)):(o[i("",n)]=r.ideal,e.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(e.mandatory=e.mandatory||{},e.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(t){void 0!==r[t]&&(e.mandatory=e.mandatory||{},e.mandatory[i(t,n)]=r[t])})}}),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e},e=function(e,n){if(e=JSON.parse(JSON.stringify(e)),e&&e.audio&&(e.audio=t(e.audio)),e&&"object"==typeof e.video){var i=e.video.facingMode;if((i=i&&("object"==typeof i?i:{ideal:i}))&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(t){return"videoinput"===t.kind});var a=o.find(function(t){return t.label.toLowerCase().indexOf("back")!==-1})||o.length&&o[o.length-1];return a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=t(e.video),r("chrome: "+JSON.stringify(e)),n(e)});e.video=t(e.video)}return r("chrome: "+JSON.stringify(e)),n(e)},n=function(t){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[t.name]||t.name,message:t.message,constraint:t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(t,r,i){e(t,function(t){navigator.webkitGetUserMedia(t,r,function(t){i(n(t))})})};navigator.getUserMedia=i;var o=function(t){return new Promise(function(e,n){navigator.getUserMedia(t,e,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(t){var e={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){t(n.map(function(t){return{label:t.label,kind:e[t.kind],deviceId:t.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t,function(t){return a(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(n(t))})})}}else navigator.mediaDevices.getUserMedia=function(t){return o(t)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":111}],106:[function(t,e,n){"use strict";var r=t("sdp"),i=t("../utils").browserDetails,o={shimPeerConnection:function(){if(window.RTCIceGatherer){window.RTCIceCandidate||(window.RTCIceCandidate=function(t){return t}),window.RTCSessionDescription||(window.RTCSessionDescription=function(t){return t});var t=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(e){t.set.call(this,e);var n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}window.RTCPeerConnection=function(t){var e=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]=n[t].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return e.localStreams},this.getRemoteStreams=function(){return e.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},t&&t.iceTransportPolicy)switch(t.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=t.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=t&&"max-bundle"===t.bundlePolicy,t&&t.iceServers){
var r=JSON.parse(JSON.stringify(t.iceServers));this.iceOptions.iceServers=r.filter(function(t){if(t&&t.urls){var e=t.urls;return"string"==typeof e&&(e=[e]),!!(e=e.filter(function(t){return 0===t.indexOf("turn:")&&t.indexOf("transport=udp")!==-1&&t.indexOf("turn:[")===-1||0===t.indexOf("stun:")&&i.version>=14393})[0])}return!1})}this._config=t,this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var t=this,e=r.splitSections(t.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)n.candidate.candidate.indexOf("typ endOfCandidates")===-1&&(e[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<e.length;r++)e[r].indexOf("\r\na=end-of-candidates\r\n")===-1&&(e[r]+="a=end-of-candidates\r\n");if(t.localDescription.sdp=e.join(""),t.dispatchEvent(n),null!==t.onicecandidate&&t.onicecandidate(n),!n.candidate&&"complete"!==t.iceGatheringState){t.transceivers.every(function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state})&&(t.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this._config},window.RTCPeerConnection.prototype.addStream=function(t){var e=t.clone();t.getTracks().forEach(function(t,n){var r=e.getTracks()[n];t.addEventListener("enabled",function(t){r.enabled=t.enabled})}),this.localStreams.push(e),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(t){var e=this.localStreams.indexOf(t);e>-1&&(this.localStreams.splice(e,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(t){return!!t.rtpSender}).map(function(t){return t.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(t){return!!t.rtpReceiver}).map(function(t){return t.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return t.codecs.forEach(function(t){for(var r=0;r<e.codecs.length;r++){var i=e.codecs[r];if(t.name.toLowerCase()===i.name.toLowerCase()&&t.clockRate===i.clockRate){i.numChannels=Math.min(t.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(e){for(var n=0;n<t.rtcpFeedback.length;n++)if(t.rtcpFeedback[n].type===e.type&&t.rtcpFeedback[n].parameter===e.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(t){for(var r=0;r<e.headerExtensions.length;r++){var i=e.headerExtensions[r];if(t.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(t,e){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:e};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);s.candidate.candidate.indexOf("typ endOfCandidates")===-1?l[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":l[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var f=n.transceivers.every(function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&f&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),f&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete");break;case"complete":}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(t,e,n){var i=this._getCommonCapabilities(t.localCapabilities,t.remoteCapabilities);e&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:r.localCName},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&("video"===t.kind&&t.recvEncodingParameters&&t.recvEncodingParameters.forEach(function(t){delete t.rtx}),i.encodings=t.recvEncodingParameters,i.rtcp={cname:t.cname},t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(t){var e,n,i=this;if("offer"===t.type)this._pendingOffer&&(e=r.splitSections(t.sdp),n=e.shift(),e.forEach(function(t,e){var n=r.parseRtpParameters(t);i._pendingOffer[e].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===t.type){e=r.splitSections(i.remoteDescription.sdp),n=e.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;e.forEach(function(t,e){var a=i.transceivers[e],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,l=a.localCapabilities,f=a.remoteCapabilities;if("0"!==t.split("\n",1)[0].split(" ",2)[1]&&!a.isDatachannel){var d=r.getIceParameters(t,n);if(o){var h=r.matchPrefix(t,"a=candidate:").map(function(t){return r.parseCandidate(t)}).filter(function(t){return"1"===t.component});h.length&&c.setRemoteCandidates(h)}var p=r.getDtlsParameters(t,n);o&&(p.role="server"),i.usingBundle&&0!==e||(c.start(s,d,o?"controlling":"controlled"),u.start(p));var g=i._getCommonCapabilities(l,f);i._transceive(a,g.codecs.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(t){var e=this,n=new MediaStream,i=[],o=r.splitSections(t.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),l=u[0].substr(2).split(" "),f=l[0],d="0"===l[1],h=r.getDirection(o,a),p=r.matchPrefix(o,"a=mid:");if(p=p.length?p[0].substr(6):r.generateIdentifier(),"application"===f&&"DTLS/SCTP"===l[2])return void(e.transceivers[c]={mid:p,isDatachannel:!0});var g,m,v,y,C,b,w,I,A,_,x,O,S=r.parseRtpParameters(o);d||(x=r.getIceParameters(o,a),O=r.getDtlsParameters(o,a),O.role="client"),I=r.parseRtpEncodingParameters(o);var L,T=r.matchPrefix(o,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute})[0];T&&(L=T.value);var k=r.matchPrefix(o,"a=end-of-candidates",a).length>0,M=r.matchPrefix(o,"a=candidate:").map(function(t){return r.parseCandidate(t)}).filter(function(t){return"1"===t.component});if("offer"!==t.type||d)"answer"!==t.type||d||(g=e.transceivers[c],m=g.iceGatherer,v=g.iceTransport,y=g.dtlsTransport,C=g.rtpSender,b=g.rtpReceiver,w=g.sendEncodingParameters,A=g.localCapabilities,e.transceivers[c].recvEncodingParameters=I,e.transceivers[c].remoteCapabilities=S,e.transceivers[c].cname=L,(s||k)&&M.length&&v.setRemoteCandidates(M),e.usingBundle&&0!==c||(v.start(m,x,"controlling"),y.start(O)),e._transceive(g,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h),!b||"sendrecv"!==h&&"sendonly"!==h?delete g.rtpReceiver:(_=b.track,i.push([_,b]),n.addTrack(_)));else{var E=e.usingBundle&&c>0?{iceGatherer:e.transceivers[0].iceGatherer,iceTransport:e.transceivers[0].iceTransport,dtlsTransport:e.transceivers[0].dtlsTransport}:e._createIceAndDtlsTransports(p,c);if(k&&E.iceTransport.setRemoteCandidates(M),A=RTCRtpReceiver.getCapabilities(f),A.codecs=A.codecs.filter(function(t){return"rtx"!==t.name}),w=[{ssrc:1001*(2*c+2)}],b=new RTCRtpReceiver(E.dtlsTransport,f),_=b.track,i.push([_,b]),n.addTrack(_),e.localStreams.length>0&&e.localStreams[0].getTracks().length>=c){var B;"audio"===f?B=e.localStreams[0].getAudioTracks()[0]:"video"===f&&(B=e.localStreams[0].getVideoTracks()[0]),B&&(C=new RTCRtpSender(B,E.dtlsTransport))}e.transceivers[c]={iceGatherer:E.iceGatherer,iceTransport:E.iceTransport,dtlsTransport:E.dtlsTransport,localCapabilities:A,remoteCapabilities:S,rtpSender:C,rtpReceiver:b,kind:f,mid:p,cname:L,sendEncodingParameters:w,recvEncodingParameters:I},e._transceive(e.transceivers[c],!1,"sendrecv"===h||"sendonly"===h)}}),this.remoteDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}return n.getTracks().length&&(e.remoteStreams.push(n),window.setTimeout(function(){var t=new Event("addstream");t.stream=n,e.dispatchEvent(t),null!==e.onaddstream&&window.setTimeout(function(){e.onaddstream(t)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],e.dispatchEvent(t),null!==e.ontrack&&window.setTimeout(function(){e.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(t){t.iceTransport&&t.iceTransport.stop(),t.dtlsTransport&&t.dtlsTransport.stop(),t.rtpSender&&t.rtpSender.stop(),t.rtpReceiver&&t.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this.dispatchEvent(e),null!==this.onsignalingstatechange&&this.onsignalingstatechange(e)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var t=new Event("negotiationneeded");this.dispatchEvent(t),null!==this.onnegotiationneeded&&this.onnegotiationneeded(t)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var t,e=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(t){n[t.iceTransport.state]++,n[t.dtlsTransport.state]++}),n.connected+=n.completed,t="new",n.failed>0?t="failed":n.connecting>0||n.checking>0?t="connecting":n.disconnected>0?t="disconnected":n.new>0?t="new":(n.connected>0||n.completed>0)&&(t="connected"),t!==e.iceConnectionState){e.iceConnectionState=t;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var t=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var e;1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(i=e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(o=e.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(t){n.push({kind:t.kind,track:t,wantReceive:"audio"===t.kind?i>0:o>0}),"audio"===t.kind?i--:"video"===t.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(e,n){var i=e.track,o=e.kind,a=r.generateIdentifier(),c=t.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:t._createIceAndDtlsTransports(a,n),u=RTCRtpSender.getCapabilities(o);u.codecs=u.codecs.filter(function(t){return"rtx"!==t.name}),u.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1")});var l,f,d=[{ssrc:1001*(2*n+1)}];i&&(l=new RTCRtpSender(i,c.dtlsTransport)),e.wantReceive&&(f=new RTCRtpReceiver(c.dtlsTransport,o)),s[n]={iceGatherer:c.iceGatherer,iceTransport:c.iceTransport,dtlsTransport:c.dtlsTransport,localCapabilities:u,remoteCapabilities:null,rtpSender:l,rtpReceiver:f,kind:o,mid:a,sendEncodingParameters:d,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(t){return t.mid}).join(" ")+"\r\n"),n.forEach(function(e,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",t.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var t=this,e=r.writeSessionBoilerplate();this.usingBundle&&(e+="a=group:BUNDLE "+this.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(e+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=t._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);e+=r.writeMediaSection(n,i,"answer",t.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:e});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(t){if(t){var e=t.sdpMLineIndex;if(t.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===t.sdpMid){e=n;break}var i=this.transceivers[e];if(i){var o=Object.keys(t.candidate).length>0?r.parseCandidate(t.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[e+1]+=(o.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}else this.transceivers.forEach(function(t){t.iceTransport.addRemoteCandidate({})});return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var t=[];this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){e[n]&&t.push(e[n].getStats())})});var e=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(t).then(function(t){t.forEach(function(t){Object.keys(t).forEach(function(e){r.set(e,t[e]),r[e]=t[e]})}),e&&window.setTimeout(e,0,r),n(r)})})}}};e.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:t("./getusermedia")}},{"../utils":111,"./getusermedia":107,sdp:85}],107:[function(t,e,n){"use strict";e.exports=function(){var t=function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}}},e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return e(n).catch(function(e){return Promise.reject(t(e))})}}},{}],108:[function(t,e,n){"use strict";var r=t("../utils").browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=t),this.addEventListener("addstream",this._ontrackpoly=function(t){t.stream.getTracks().forEach(function(e){var n=new Event("track");n.track=e,n.receiver={track:e},n.streams=[t.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(t){this.mozSrcObject=t}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){if(r.version<38&&t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var o=t.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(t.iceServers[i])}t.iceServers=n}return new mozRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;if(RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},r.version<48){var e=function(t){var e=new Map;return Object.keys(t).forEach(function(n){e.set(n,t[n]),e[n]=t[n]}),e},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,r,i){return n.apply(this,[t||null]).then(function(t){return e(t)}).then(r,i)}}}}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:t("./getusermedia")}},{"../utils":111,"./getusermedia":109}],109:[function(t,e,n){"use strict";var r=t("../utils").log,i=t("../utils").browserDetails;e.exports=function(){var t=function(t){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,constraint:t.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},e=function(e,n,o){var a=function(t){if("object"!=typeof t||t.require)return t;var e=[];return Object.keys(t).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=t[n]="object"==typeof t[n]?t[n]:{ideal:t[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||e.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:t[n]=r.exact,delete r.exact),void 0!==r.ideal){t.advanced=t.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,t.advanced.push(i),delete r.ideal,Object.keys(r).length||delete t[n]}}}),e.length&&(t.require=e),t};return e=JSON.parse(JSON.stringify(e)),i.version<38&&(r("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),r("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,n,function(e){o(t(e))})},n=function(t){return new Promise(function(n,r){e(t,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(t){t([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(t){if("NotFoundError"===t.name)return[];throw t})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(t){t.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(t(e))})}}navigator.getUserMedia=function(t,n,r){if(i.version<44)return e(t,n,r);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(t).then(n,r)}}},{"../utils":111}],110:[function(t,e,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],111:[function(t,e,n){"use strict";var r=!0,i={disableLog:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(r=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(t,e,n){var r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var t={};if(t.browser=null,t.version=null,"undefined"==typeof window||!window.navigator)return t.browser="Not a browser.",t;if(navigator.mozGetUserMedia)t.browser="firefox",t.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)t.browser="chrome",t.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return t.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",t;t.browser="safari",t.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return t.browser="Not a supported browser.",t;t.browser="edge",t.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return t}};e.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},{}],112:[function(t,e,n){function r(){}e.exports=r,r.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(t,e,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[t]=this.callbacks[t]||[]).push(o),this},e.once=function(t,e,n){function r(){i.off(t,r),s.apply(this,arguments)}var i=this,o=3===arguments.length,a=o?arguments[1]:void 0,s=o?arguments[2]:arguments[1];return this.on(t,a,r),this},e.releaseGroup=function(t){this.callbacks=this.callbacks||{};var e,n,r,i;for(e in this.callbacks)for(i=this.callbacks[e],n=0,r=i.length;n<r;n++)i[n]._groupName===t&&(i.splice(n,1),n--,r--);return this},e.off=function(t,e){this.callbacks=this.callbacks||{};var n,r=this.callbacks[t];return r?1===arguments.length?(delete this.callbacks[t],this):(n=r.indexOf(e),r.splice(n,1),0===r.length&&delete this.callbacks[t],this):this},e.emit=function(t){this.callbacks=this.callbacks||{};var e,n,r,i=[].slice.call(arguments,1),o=this.callbacks[t],a=this.getWildcardCallbacks(t);if(o)for(r=o.slice(),e=0,n=r.length;e<n&&r[e];++e)r[e].apply(this,i);if(a)for(n=a.length,r=a.slice(),e=0,n=r.length;e<n&&r[e];++e)r[e].apply(this,[t].concat(i));return this},e.getWildcardCallbacks=function(t){this.callbacks=this.callbacks||{};var e,n,r=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[e]));return r}},r.mixin(r)},{}],113:[function(t,e,n){"use strict";function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,n){var r=t;return l(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=d(e,{uri:t}),r.callback=n,r}function o(t,e,n){return e=i(t,e,n),a(e)}function a(t){function e(){4===l.readyState&&setTimeout(a,0)}function n(){var t=void 0;if(t=l.response?l.response:l.responseText||s(l),b)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(p),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,u(t,w)}function a(){if(!h){var e;clearTimeout(p),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=w,i=null;return 0!==e?(r={body:n(),statusCode:e,method:m,headers:{},url:g,rawRequest:l},l.getAllResponseHeaders&&(r.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var c=!1,u=function(e,n,r){c||(c=!0,t.callback(e,n,r))},l=t.xhr||null;l||(l=t.cors||t.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,h,p,g=l.url=t.uri||t.url,m=l.method=t.method||"GET",v=t.body||t.data,y=l.headers=t.headers||{},C=!!t.sync,b=!1,w={body:void 0,headers:{},statusCode:0,method:m,url:g,rawRequest:l};if("json"in t&&t.json!==!1&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),v=JSON.stringify(t.json===!0?v:t.json))),l.onreadystatechange=e,l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){h=!0},l.ontimeout=i,l.open(m,g,!C,t.username,t.password),C||(l.withCredentials=!!t.withCredentials),!C&&t.timeout>0&&(p=setTimeout(function(){if(!h){h=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),l.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&l.setRequestHeader(d,y[d]);else if(t.headers&&!r(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(v||null),l}function s(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function c(){}var u=t("global/window"),l=t("is-function"),f=t("parse-headers"),d=t("xtend");e.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||c,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(e,n,r){return n=i(e,n,r),n.method=t.toUpperCase(),a(n)}})},{"global/window":68,"is-function":76,"parse-headers":81,xtend:114}],114:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t}e.exports=r;var i=Object.prototype.hasOwnProperty},{}]},{},[11]);
//# sourceMappingURL=/static/widget/js//aww3.min.js.map
